# Food Chainâ„¢ TCG â€” Complete Design Document

**Version:** 1.0  
**Last Updated:** December 2024  
**Â© 2025 Food Chainâ„¢ TCG. All Rights Reserved.**

-----

## Table of Contents

1. [Game Overview](#1-game-overview)
1. [Core Rules](#2-core-rules)
1. [Card Database](#3-card-database)
1. [Keyword & Effect Glossary](#4-keyword--effect-glossary)
1. [Technical Implementation](#5-technical-implementation)
1. [Miscellaneous Implementation Notes](#6-miscellaneous-implementation-notes)

-----

## 1. Game Overview

Food Chain TCG is a two-player trading card game combining elements of Magic: The Gathering, Yu-Gi-Oh!, and Hearthstone. The game features a unique consumption mechanic where predator creatures gain power by consuming prey creatures on the field.

### 1.1 Win Condition

A player wins by reducing their opponent (referred to as â€œRivalâ€) from 10 HP to 0 HP.

### 1.2 Deck Construction

Each player builds a deck from exactly one of five animal categories: Bird, Fish, Mammal, Reptile, or Amphibian. Each category has a pool of 50 unique cards. A deck must contain exactly 20 cards with only one copy of any card permitted (tokens generated by effects are exempt from this restriction). Additionally, a deck must contain more prey cards than predator cards (e.g., 7 prey and 6 predators is valid; 6 prey and 6 predators is not).

### 1.3 Game Setup

Both players draw 5 cards at game start. Players roll a d10 to determine turn order; the higher roll chooses whether to go first or second. The player who goes first does not draw on their first turn. The player who goes second draws normally when their turn begins.

-----

## 2. Core Rules

### 2.1 Card Types

**Predator:** Creature cards with ATK and HP values. When played, predators may consume 1-3 friendly prey (or edible predators) currently on the field. Consuming activates the predatorâ€™s effect and grants +1 ATK and +1 HP per point of nutrition consumed. Playing a predator without consuming is called â€œdry droppingâ€ and does not activate its effect.

**Prey:** Creature cards with ATK, HP, and nutrition values. Prey exist independently on the field and may attack. When consumed by a friendly predator, prey move to the carrion pile.

**Spell:** Single-use cards with an effect. Counts toward the one-card-per-turn limit. May only be played during main phases. Moves to exile pile after use.

**Free Spell:** Functions identically to a spell but does not count toward the one-card-per-turn limit. May only be played during main phases. Moves to exile pile after use.

**Trap:** Held in hand until triggered by an enemy action during the opponentâ€™s turn. Resolves before the triggering action completes. Moves to exile pile after use.

**Field Spell:** A spell subtype that remains on the field providing ongoing effects. Takes up one of the three field slots. Only one field spell may be active at a time; playing a new one replaces the existing one.

**Token:** A creature generated by an effect rather than played from hand. Tokens function as normal creatures, go to carrion when destroyed, and can be consumed. Tokens are visually distinguished from regular cards.

### 2.2 Zones

**Hand:** Cards held by a player. No maximum hand size.

**Deck:** The face-down pile a player draws from. When empty, the player stops drawing but play continues.

**Field:** The active play area holding a maximum of 3 cards (creatures and field spells combined) per player.

**Carrion Pile:** The discard zone for destroyed creatures. Both predators and prey go here when their HP reaches 0 or when prey are consumed. Some effects interact with the carrion pile.

**Exile Pile:** The discard zone for used spells, free spells, and traps.

### 2.3 Turn Structure

A turn proceeds through the following phases in order:

**Start Phase:** Process start-of-turn triggers (e.g., Leafy Seadragon summoning, Tuna Eggs hatching, frozen creatures dying from neurotoxin). No standard player actions.

**Draw Phase:** The active player draws one card from their deck. If the deck is empty, this phase is skipped. The first playerâ€™s very first turn skips this phase.

**Main Phase 1:** The active player may play one card (predator, prey, spell, or trap). Free spells may be played and do not count toward this limit.

**Before Combat:** Creatures with â€œbefore combatâ€ effects (e.g., Electric Eel) may activate. The controlling player chooses targets for each creature with such an effect, resolving them one at a time. Multiple creatures may target the same enemy.

**Combat Phase:** The active player may declare attacks with any number of eligible creatures. Each creature may attack once. See Combat Rules below.

**Main Phase 2:** If no card was played during Main Phase 1, the active player may play one card here. Free spells remain unrestricted.

**End Phase:** Process end-of-turn triggers (e.g., Blobfish eating enemy prey, field spell effects). Refresh exhausted creatures (remove exhaustion status). Turn passes to opponent.

**Card Limit Rule:** Only one non-free-spell card may be played per turn, across both main phases combined.

### 2.4 Combat Rules

**Summoning Exhaustion:** A creature cannot attack the Rival directly until it has been on the field since the start of the controlling playerâ€™s turn (i.e., survived one full turn cycle). However, creatures may attack enemy creatures immediately upon being played, unless they have the Passive keyword.

**Attack Declaration:** During the combat phase, the active player selects creatures to attack with, then declares targets for each attacker.

**Target Selection:** The attacking player chooses targets. Valid targets are enemy creatures or the Rival (if summoning exhaustion has expired). Targeting is modified by keywords: Hidden creatures cannot be targeted by attacks; Invisible creatures cannot be targeted by attacks or spells; Lure creatures must be attacked if able; Acuity allows targeting Hidden and Invisible creatures.

**Damage Resolution:** When a creature attacks another creature, both deal damage equal to their ATK simultaneously. Damage reduces HP. A creature with 0 or less HP is destroyed and moves to the carrion pile. When a creature attacks the Rival directly, the Rival loses HP equal to the attackerâ€™s ATK.

**Barrier:** If a creature has barrier, the first instance of damage it would receive is prevented and the barrier is consumed.

**Slain Effects:** If a creature has a â€œslainâ€ effect, it triggers only when that creature dies in combat against another creature. Slain effects do not trigger if the creature is consumed by a friendly predator, killed by a spell, or destroyed by other means.

### 2.5 Consumption System

**Timing:** Consumption occurs only at the moment a predator is played. It cannot occur at any other time.

**Valid Targets:** Only friendly prey and friendly predators with the Edible keyword currently on the field may be consumed. Predators with the Scavenge keyword may additionally consume from the carrion pile.

**Quantity:** A predator may consume 0, 1, 2, or 3 valid targets in a single consumption action (total between field and carrion for scavenge).

**Nutrition Gain:** The predator gains +1 ATK and +1 HP for each point of nutrition consumed. For edible predators, the nutrition value equals their ATK.

**Effect Activation:** If at least one target is consumed, the predatorâ€™s effect activates once. Consuming multiple targets does not activate the effect multiple times.

**Dry Dropping:** Playing a predator without consuming any targets is permitted. The predator enters play with its base stats and its effect does not activate. Dry-dropped predators are visually indicated.

**Consumed Target Destination:** All consumed targets from the field move to the carrion pile. Consumed targets from carrion (via scavenge) are removed from carrion.

### 2.6 Trap System

Traps are held in hand and can only be played (set) during the controlling playerâ€™s main phase, counting toward the one-card-per-turn limit. Once set, traps remain hidden and activate during the opponentâ€™s turn when their trigger condition is met.

**Trigger Types:**

- â€œWhen attackedâ€ â€” triggers when any of your creatures is attacked
- â€œWhen attacked directlyâ€ / â€œdirect attackâ€ â€” triggers when the Rival is attacked
- â€œWhen rival plays a predâ€ â€” triggers when opponent plays a predator creature
- â€œWhen rival plays a preyâ€ â€” triggers when opponent plays a prey creature

Traps resolve before the triggering action completes. For attack-triggered traps, damage has not yet been dealt. For play-triggered traps, the creature enters the field but may lose abilities or suffer other effects.

### 2.7 Discard Alternate Activations

Some cards have effects prefixed with â€œDiscard:â€ which represents an alternate activation from hand. The player discards that card from their hand to trigger the effect. This can be done during the appropriate window (e.g., â€œDiscard: negate direct attackâ€ can only be activated when a direct attack is declared). Discard activations do not count toward the one-card-per-turn limit but can only be used during the specified trigger window.

### 2.8 Additional Rules

**Immune Creatures:** Can only take damage from direct creature attacks. Immune to spell damage, effect damage, and all other damage sources.

**Frozen Status:** A frozen creature cannot attack and cannot be consumed. The frozen status lasts until the end of the frozen creatureâ€™s controllerâ€™s turn, at which point the creature dies.

**â€œKillâ€ vs â€œDamageâ€:** Effects that say â€œkillâ€ instantly destroy the target regardless of HP. Effects that â€œdeal damageâ€ reduce HP and only destroy if HP reaches 0.

**â€œPlayâ€ vs â€œSummonâ€:** When an effect says â€œplayâ€ a creature, it enters the field but its on-play effect does not trigger. The summoned creature is typically a token.

**Draw Effects:** If an effect says â€œdrawâ€ without specifying a number, draw 1 card.

-----

## 3. Card Database

### 3.1 Card Data Structure

Each card follows this data structure:

```javascript
{
  id: string,           // Unique identifier (e.g., 'f_py1')
  name: string,         // Display name
  type: string,         // 'predator' | 'prey' | 'spell' | 'freespell' | 'trap'
  atk: number,          // Attack value (creatures only)
  hp: number,           // Hit points (creatures only)
  nutrition: number,    // Nutrition value (prey only)
  keywords: string[],   // Array of keyword identifiers
  effect: string,       // Human-readable effect description
  
  // Effect hooks (optional, for implementation)
  onPlay: string,           // Effect when played
  onConsume: string,        // Effect when predator consumes (predators only)
  slainEffect: string,      // Effect when slain in combat
  slainCard: object,        // Card to add to hand on slain
  slainSummon: object,      // Token to summon on slain
  startOfTurn: string,      // Start of turn trigger
  endOfTurn: string,        // End of turn trigger
  beforeCombat: string,     // Before combat damage trigger
  beforeCombatDefend: string, // Before combat when defending
  discardEffect: string,    // Discard from hand alternate activation
  summons: object[],        // Array of tokens this card creates
  
  // Spell-specific
  effectType: string,       // Categorized effect type for implementation
  isFieldSpell: boolean,    // Whether this is a field spell
  trigger: string,          // Trap trigger condition
  
  // Runtime state (added during gameplay)
  uid: string,              // Unique instance identifier
  exhausted: boolean,       // Cannot attack Rival directly
  hasBarrier: boolean,      // Has active barrier
  frozen: boolean,          // Is frozen
  frozenDiesTurn: number,   // Turn number when frozen creature dies
  dryDropped: boolean,      // Was dry dropped (predators)
  isToken: boolean,         // Is a token creature
}
```

### 3.2 Fish Deck (50 Cards)

#### Prey (23 cards)

**Atlantic Flying Fish** â€” 1/1 (1) â€” Keywords: haste â€” Effect: Play Flying Fish | Haste â€” Summons Flying Fish token (1/1, nutrition 1, haste)

**Blobfish** â€” 1/1 (1) â€” Keywords: passive, immune â€” Effect: Passive | End of turn, eat target enemy prey | Immune â€” End of turn effect auto-targets first enemy prey

**Celestial Eye Goldfish** â€” 1/1 (1) â€” Effect: Draw 2 | Rival reveals hand â€” On play draws 2 cards and shows opponentâ€™s hand for 3 seconds

**Ghost Eel** â€” 1/1 (1) â€” Keywords: hidden â€” Effect: Discard: negate direct attack | Hidden â€” Can be discarded from hand to negate an incoming direct attack

**Golden Angelfish** â€” 1/1 (1) â€” Effect: Draw 1 | Creatures gain barrier â€” On play draws 1 and grants barrier to all friendly creatures

**Hardhead Catfish** â€” 1/1 (1) â€” Keywords: barrier â€” Effect: Barrier | Slain, play Catfish â€” When slain summons Catfish token (1/1, barrier)

**Jumping Mullet** â€” 1/1 (1) â€” Keywords: freeplay â€” Effect: Free play | Defending, return to hand | Targeted, return to hand â€” Returns to hand when attacked or targeted by spells

**Leafy Seadragon** â€” 1/1 (1) â€” Keywords: invisible â€” Effect: Invisible | Start of turn, play Leafy â€” Each start of turn summons Leafy token (0/1, nutrition 0, hidden)

**Portuguese Man Oâ€™ War Legion** â€” 1/1 (1) â€” Keywords: passive â€” Effect: Play 2 Portuguese Man Oâ€™ War | Passive | Defending before combat, deal 1 damage â€” Summons 2 Man Oâ€™ War tokens, each deals 1 damage to attacker before combat

**Psychedelic Frogfish** â€” 1/1 (1) â€” Keywords: ambush, invisible â€” Effect: Ambush (currently null) | Invisible

**Rainbow Sardines** â€” 1/1 (1) â€” Effect: Play 2 Sardines | Heal 1 | Slain play Sardine â€” Summons 2 Sardine tokens, heals player 1 HP, slain summons another Sardine

**White Suckerfish** â€” 1/1 (1) â€” Keywords: freeplay â€” Effect: Free play | Discard: target pred gains +1/+1 â€” Can be discarded to buff a predator

**Blue-ringed Octopus** â€” 1/1 (1) â€” Keywords: invisible, neurotoxic â€” Effect: Invisible | Neurotoxic â€” Combat applies frozen + delayed death

**Golden Kingfish** â€” 1/2 (1) â€” Effect: Discard: target pred gains end of turn, play Golden Trevally | Draw 2 | Target pred gains end of turn, play Golden Trevally â€” Complex effect with discard alternate

**Cannibal Fish** â€” 2/1 (2) â€” Effect: Either play Lancetfish or gain +2/+2 â€” Player choice on play (currently defaults to +2/+2)

**Black Drum** â€” 2/2 (2) â€” Keywords: ambush â€” Effect: Creatures gain +1/+0 | Ambush (currently null) â€” On play gives all creatures +1 ATK

**Deep-sea Angler** â€” 2/2 (2) â€” Keywords: lure â€” Effect: Play 2 Angler Eggs | Lure â€” Summons 2 Angler Egg tokens (0/1, passive, lure)

**Electric Eel** â€” 2/2 (2) â€” Effect: Before combat, deal 2 damage â€” At before combat phase, deals 2 damage to chosen target

**King Salmon** â€” 2/2 (2) â€” Effect: Slain, add Salmon to hand â€” When slain adds Salmon card (1/1, nutrition 1, freeplay) to hand

**Kingfish** â€” 3/2 (2) â€” Keywords: haste â€” Effect: Haste

**Silver King** â€” 3/3 (3) â€” Effect: Discard 1 | Draw 3 â€” On play draws 3 then must discard 1

**Placeholder Fish A** â€” 2/2 (2) â€” Placeholder card

**Placeholder Fish B** â€” 2/2 (2) â€” Placeholder card

#### Predators (15 cards)

**Beluga Whale** â€” 1/3 â€” Effect: Creatures gain +2/+0 â€” On consume, all friendly creatures gain +2 ATK

**Hourglass Dolphin** â€” 2/2 â€” Effect: Play copy â€” On consume, creates a token copy of itself

**Sailfish** â€” 3/1 â€” Keywords: freeplay, haste â€” Effect: Free play | Haste

**Wahoo** â€” 3/2 â€” Keywords: haste, edible â€” Effect: Haste | Edible â€” Can be consumed by other predators

**Alligator Gar** â€” 3/3 â€” Keywords: barrier â€” Effect: Barrier | Slain, add Scale Arrows to hand â€” When slain adds Scale Arrows free spell to hand

**Atlantic Bluefin Tuna** â€” 3/3 â€” Keywords: edible â€” Effect: Play 2 Tuna Eggs | Edible â€” On consume summons 2 Tuna Egg tokens (0/1, nutrition 0, passive) that become Tuna (2/2, edible) at start of turn

**Goliath Grouper** â€” 3/3 â€” Keywords: edible â€” Effect: Kill target prey | Edible â€” On consume kills an enemy prey

**Greenland Shark** â€” 3/3 â€” Keywords: scavenge â€” Effect: Scavenge â€” Can consume from carrion pile

**Shortfin Mako** â€” 3/3 â€” Effect: Deal 3 damage to any target â€” On consume deals 3 damage to any target

**Swordfish** â€” 4/2 â€” Keywords: haste â€” Effect: Haste

**Narwhal** â€” 4/4 â€” Effect: Creatures gain immune â€” On consume grants immune to all friendly creatures

**Tiger Shark** â€” 4/4 â€” Effect: Copy abilities of a carrion pred â€” On consume copies keywords/effects from a predator in carrion

**Black Marlin** â€” 5/3 â€” Keywords: ambush â€” Effect: Ambush (currently null)

**Great White Shark** â€” 5/5 â€” Keywords: acuity â€” Effect: Kill target enemy | Acuity â€” On consume kills any enemy creature, can target hidden/invisible

**Orca** â€” 6/6 â€” Effect: Add a card from deck to hand â€” On consume tutors any card from deck

#### Spells (5 cards)

**Net** â€” Effect: Kill enemy prey â€” Targets and kills one enemy prey creature

**Fish Food** â€” Effect: Creatures gain +2/+2 â€” Buffs all friendly creatures

**Oil Spill** â€” Effect: Kill all animals â€” Destroys all creatures on both sides

**Harpoon** â€” Effect: Deal 4 damage to target enemy then gain control of it â€” Damages enemy, if survives steals it (if field has room)

**Ship of Gold** â€” Effect: Draw 4

#### Free Spells (5 cards)

**Edible** â€” Effect: Target pred creature gains edible â€” Grants edible keyword to friendly predator

**Fisherman** â€” Effect: Add a card from your deck to hand â€” Tutor effect

**Undertow** â€” Effect: Target enemy loses abilities â€” Permanently removes all keywords and effects from target

**Magnificent Sea Anemone** â€” Field Spell â€” Effect: End of turn play Oscellaris Clownfish â€” Each end of turn summons Clownfish token (1/1, nutrition 1, hidden)

**Scale Arrows** â€” Effect: Kill all enemies â€” Generated by Alligator Gar slain effect

#### Traps (3 cards)

**Cramp** â€” Trigger: rivalPlaysPred â€” Effect: When rival plays a pred it loses abilities â€” Played pred enters field without abilities

**Riptide** â€” Trigger: rivalPlaysPrey â€” Effect: When rival plays a prey it loses abilities â€” Played prey enters field without abilities

**Maelstrom** â€” Trigger: directAttack â€” Effect: When target enemy attacks directly, negate attack | Deal 2 damage to players & animals â€” Negates attack and deals 2 to everything

### 3.3 Mammal Deck

To be provided. Structure follows Fish deck format.

### 3.4 Bird Deck

To be provided. Structure follows Fish deck format.

### 3.5 Reptile Deck

To be provided. Structure follows Fish deck format.

### 3.6 Amphibian Deck

To be provided. Structure follows Fish deck format.

-----

## 4. Keyword & Effect Glossary

### 4.1 Keywords

**Haste** â€” This creature can attack the Rival directly on the turn it is played, ignoring summoning exhaustion.

**Free Play** â€” Playing this card does not count toward the one-card-per-turn limit. Enables same-turn consumption combos with predators.

**Hidden** â€” This creature cannot be targeted by attacks. Can still be targeted by spells. Does not prevent AoE damage.

**Invisible** â€” This creature cannot be targeted by attacks or spells. Does not prevent AoE damage or untargeted effects.

**Lure** â€” Enemy creatures must attack this creature if able. If multiple Lure creatures exist, attacker chooses among them.

**Immune** â€” This creature can only take damage from direct creature attacks. Immune to spell damage, ability damage, and all other damage sources.

**Barrier** â€” Prevents the first instance of damage this creature would receive. The barrier is then consumed and does not regenerate.

**Passive** â€” This creature cannot attack. It can still defend, be consumed, and use other abilities.

**Edible** â€” This predator can be consumed by another predator as if it were prey. Its nutrition value equals its ATK.

**Scavenge** â€” When this predator is played, it may consume targets from the carrion pile in addition to (or instead of) creatures on the field. Total consumed still limited to 3.

**Acuity** â€” This creature can target Hidden and Invisible creatures with attacks. Also applies to targeted effects on consume.

**Neurotoxic** â€” When this creature deals combat damage to another creature, the damaged creature becomes Frozen and will die at the end of its controllerâ€™s next turn.

**Ambush** â€” Currently undefined. Reserved for future implementation.

**Frozen** â€” This creature cannot attack and cannot be consumed. At the end of this creatureâ€™s controllerâ€™s turn, the frozen creature dies.

### 4.2 Effect Terms

**Slain** â€” A trigger condition that activates when this creature dies in combat against another creature. Does not trigger when consumed by a friendly predator, killed by spells, or destroyed by other non-combat means.

**Dry Drop** â€” Playing a predator without consuming any prey. The predator enters with base stats and its consume effect does not activate. Indicated visually.

**Consume** â€” The act of a predator eating prey when played. The predator gains +1/+1 per nutrition point and activates its effect.

**Nutrition** â€” The stat on prey cards determining how much +ATK/+HP a predator gains when consuming it. Edible predators use their ATK as nutrition.

**Kill** â€” Instantly destroy the target regardless of its current HP. Killed creatures go to carrion.

**Play / Summon** â€” Create a creature token on the field. The tokenâ€™s on-play effect does not trigger.

**Tutor** â€” Search your deck for a card and add it to your hand.

**Rival** â€” Your opponent player. â€œAttack Rivalâ€ means dealing direct damage to opponent HP.

**Carrion** â€” The discard pile for destroyed creatures. Some effects interact with carrion.

**Exile** â€” The discard pile for used spells and traps. Generally does not interact with other effects.

**Field Spell** â€” A spell that stays on the field providing ongoing effects. Takes one field slot. Only one active at a time.

**Token** â€” A creature created by an effect. Functions normally, goes to carrion when destroyed, can be consumed.

**Before Combat** â€” A phase between Main Phase 1 and Combat where certain effects trigger. Creatures with these effects choose targets one at a time.

### 4.3 Trigger Windows

**On Play** â€” Triggers immediately when the card is played from hand to field.

**On Consume** â€” Triggers when a predator successfully consumes at least one prey.

**Start of Turn** â€” Triggers at the beginning of the controlling playerâ€™s turn, before draw phase.

**End of Turn** â€” Triggers at the end of the controlling playerâ€™s turn, before passing to opponent.

**Before Combat** â€” Triggers after Main Phase 1, before attacks are declared.

**When Defending** â€” Triggers when this creature is chosen as an attack target.

**When Attacked Directly** â€” Triggers when the Rival is attacked.

**When Rival Plays** â€” Triggers when opponent plays a card of the specified type.

**Discard Activation** â€” Special effects activated by discarding the card from hand during the appropriate trigger window.

-----

## 5. Technical Implementation

### 5.1 Recommended Tech Stack

**Frontend:** React with functional components and hooks for state management.

**Hosting:** Vercel or Netlify for static hosting with automatic deploys from GitHub.

**Database:** Supabase for card data, player accounts, and real-time multiplayer via websockets.

**Card Data:** JSON or JavaScript module files, one per deck category, imported at build time.

### 5.2 State Architecture

The game state should be managed as a single source of truth containing:

```javascript
{
  // Player states
  p1: {
    id: number,
    hp: number,
    deck: Card[],
    hand: Card[],
    field: Card[],      // Max 3
    carrion: Card[],
    exile: Card[],
    traps: Card[],      // Set traps (hidden from opponent)
  },
  p2: { /* same structure */ },
  
  // Game state
  turn: 1 | 2,
  phase: 'waiting' | 'main1' | 'beforeCombat' | 'combat' | 'main2' | 'end' | 'passing',
  cardPlayed: boolean,
  isFirstTurn: boolean,
  fieldSpell: Card | null,
  
  // UI state
  attackers: string[],      // UIDs of creatures selected to attack
  targetMode: string | null,
  selected: Card | null,
  consumeMode: Card | null,
  toConsume: string[],
  toConsumeCarrion: number[],
  pendingTrap: object | null,
  
  // History
  history: Event[],
}
```

### 5.3 Effect System Architecture

Effects should be implemented as a hook-based system where cards declare which hooks they use, and the game engine calls those hooks at appropriate times.

**Effect Hooks:**

- `onPlay(card, gameState)` â€” Called when card enters field
- `onConsume(predator, consumed[], gameState)` â€” Called after consumption
- `onSlain(card, killer, gameState)` â€” Called when card dies in combat
- `onStartOfTurn(card, gameState)` â€” Called at turn start for each card
- `onEndOfTurn(card, gameState)` â€” Called at turn end for each card
- `onBeforeCombat(card, gameState)` â€” Called during before combat phase
- `onDefend(card, attacker, gameState)` â€” Called when card is attacked
- `onTargeted(card, source, gameState)` â€” Called when card is targeted by spell
- `onDiscard(card, trigger, gameState)` â€” Called for discard activations

Each effect function should return a state modification object or array of modifications to apply.

### 5.4 Targeting System

Implement targeting as a modal flow:

1. Player initiates action requiring target (spell, attack, etc.)
1. Set `targetMode` to appropriate mode string
1. Render valid targets as selectable
1. On target selection, validate against restrictions (hidden, invisible, lure, acuity)
1. Execute effect and clear target mode

**Target Modes:**

- `'attack'` â€” Selecting attack target
- `'spell-enemy'` â€” Targeting enemy creature with spell
- `'spell-friendly'` â€” Targeting friendly creature
- `'spell-enemy-prey'` â€” Targeting enemy prey specifically
- `'spell-harpoon'` â€” Special mode for Harpoon (damage + steal)
- `'spell-friendly-pred'` â€” Targeting friendly predator specifically

### 5.5 Turn Flow Implementation

```
GAME START
â”œâ”€â”€ Both players draw 5
â”œâ”€â”€ Dice roll for turn order
â”œâ”€â”€ Winner chooses first/second
â””â”€â”€ Begin first turn

TURN LOOP
â”œâ”€â”€ PASS SCREEN (if not first turn)
â”‚   â””â”€â”€ Opponent confirms they are ready
â”œâ”€â”€ START PHASE
â”‚   â”œâ”€â”€ Process startOfTurn effects
â”‚   â””â”€â”€ Handle frozen creature deaths
â”œâ”€â”€ DRAW PHASE
â”‚   â””â”€â”€ Draw 1 (skip if first player's first turn or deck empty)
â”œâ”€â”€ MAIN PHASE 1
â”‚   â”œâ”€â”€ May play 1 card (not free spell)
â”‚   â”œâ”€â”€ May play unlimited free spells
â”‚   â””â”€â”€ Trap triggers: rivalPlaysPred, rivalPlaysPrey
â”œâ”€â”€ BEFORE COMBAT PHASE
â”‚   â””â”€â”€ Resolve beforeCombat effects (player chooses targets)
â”œâ”€â”€ COMBAT PHASE
â”‚   â”œâ”€â”€ Select attackers
â”‚   â”œâ”€â”€ Declare targets for each attacker
â”‚   â”œâ”€â”€ Check trap triggers: attacked, directAttack
â”‚   â”œâ”€â”€ Resolve beforeCombatDefend effects
â”‚   â”œâ”€â”€ Apply barrier
â”‚   â”œâ”€â”€ Deal damage simultaneously
â”‚   â”œâ”€â”€ Process neurotoxic
â”‚   â”œâ”€â”€ Process slain effects
â”‚   â””â”€â”€ Move dead creatures to carrion
â”œâ”€â”€ MAIN PHASE 2
â”‚   â””â”€â”€ May play 1 card if none played in Main 1
â”œâ”€â”€ END PHASE
â”‚   â”œâ”€â”€ Process endOfTurn effects
â”‚   â”œâ”€â”€ Clear exhaustion from creatures
â”‚   â””â”€â”€ Clear frozen status (creature dies)
â””â”€â”€ Pass to opponent (show PASS SCREEN)
```

### 5.6 Multiplayer Considerations (Future)

For 1v1 online play with lobby codes:

- Use Supabase Realtime for game state synchronization
- Generate unique lobby codes (6 alphanumeric characters)
- Store game state in database, both clients subscribe to changes
- Implement turn validation server-side to prevent cheating
- Add reconnection handling for dropped connections
- Consider spectator mode for shared lobby viewing

-----

## 6. Miscellaneous Implementation Notes

### 6.1 UI/UX Decisions

**Two-Step Card Play:** Tapping a card in hand first shows its details in an info panel, then presents Play/Cancel buttons. This prevents accidental plays and allows card inspection.

**Pass Screen:** Between turns, display a â€œPass to Player Xâ€ screen requiring confirmation. This prevents the incoming player from seeing the opponentâ€™s hand during device handoff in local multiplayer.

**Card Inspection Panel:** A fixed black panel at the bottom of the game screen shows details of the last tapped card. For spells/traps, shows effect text. For creatures, shows keyword glossary entries.

**Visual Indicators:**

- ðŸ’¤ Exhausted (cannot attack Rival)
- ðŸ‚ Dry Dropped (predator played without consuming)
- ðŸ›¡ï¸ Barrier active
- â„ï¸ Frozen
- âšª Token (also dashed border)

**Color Coding:**

- Red background: Predator
- Green background: Prey
- Blue background: Spell
- Purple background: Free Spell
- Orange background: Trap

### 6.2 Accessibility

- Ensure sufficient color contrast for all text
- Icons should have text alternatives
- Touch targets should be minimum 44x44 pixels
- Support screen readers where feasible

### 6.3 Random Deck Generator

For quick testing, implement a â€œRandom Deckâ€ button that generates a valid 20-card deck: 7 prey, 6 predators, 4 spells, 2 free spells, 1 trap. This automatically satisfies the prey > predator requirement.
