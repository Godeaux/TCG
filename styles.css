:root {
  /* Fluid base: ~16px at 720p, ~22px at 1080p, ~26px at 1440p */
  font-size: clamp(15px, 1vw + 3px, 26px);

  --bg-dark: #0a0e14;
  --bg-card: #1a1f2e;
  --bg-card-hover: #252b3d;
  --bg-field: #12161f;
  --bg-overlay: rgba(5, 8, 12, 0.7);

  --gold: #d4a853;
  --gold-light: #f0d078;
  --gold-dark: #a67c32;

  --hp-red: #e74c3c;
  --atk-yellow: #f1c40f;
  --mana-blue: #3498db;

  --predator: #c0392b;
  --prey: #27ae60;
  --spell: #2980b9;
  --freespell: #8e44ad;
  --trap: #d35400;

  --text-primary: #f5f5f5;
  --text-secondary: #94a3b8;
  --text-muted: #64748b;

  --border-subtle: rgba(255, 255, 255, 0.08);
  --border-gold: rgba(212, 168, 83, 0.5);

  --font-display: "Bebas Neue", sans-serif;
  --font-body: "Barlow", sans-serif;

  /* Font scale (rem-based, relative to fluid root) */
  --font-xs: 0.75rem;    /* ~10.5-13.5px */
  --font-sm: 0.875rem;   /* ~12.25-15.75px */
  --font-base: 1rem;     /* ~14-18px (root size) */
  --font-lg: 1.125rem;   /* ~15.75-20.25px */
  --font-xl: 1.375rem;   /* ~19.25-24.75px */
  --font-2xl: 1.75rem;   /* ~24.5-31.5px */
  --font-3xl: 2.25rem;   /* ~31.5-40.5px */

  --card-radius: 8px;
  --transition-fast: 0.15s ease;
  --transition-medium: 0.25s ease;
  --action-bar-safe: clamp(170px, 18vh, 240px);
  --field-max-height: min(66vh, 700px);
  --field-gap: clamp(8px, 1.5vw, 16px);
  --hand-overlap: clamp(24px, 3vw, 48px);

  /* Minimum heights for zoom stability */
  --min-container-height: 600px;
  --min-pages-height: 500px;
  --min-battlefield-height: 480px;
  --min-hand-height: clamp(90px, 14vh, 140px);
  --min-inspector-height: 200px;
  --min-log-height: 150px;
  --min-piles-height: 80px;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* Adjust minimums for extreme zoom scenarios */
@media (max-height: 500px) {
  :root {
    --min-container-height: 500px;
    --min-battlefield-height: 380px;
    --min-hand-height: 80px;
    --min-inspector-height: 120px;
    --min-log-height: 120px;
    --min-piles-height: 60px;
  }
}

.hidden {
  display: none;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  height: 100%;
  overflow: hidden;
  background: var(--bg-dark);
  color: var(--text-primary);
  font-family: var(--font-body);
  line-height: 1.45;
  width: 100vw;
  max-width: 100vw;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 0);
  background-size: 4px 4px;
  opacity: 0.18;
  z-index: 0;
}

button {
  font-family: inherit;
  cursor: pointer;
  border: none;
  background: none;
  color: inherit;
}

.muted {
  color: var(--text-muted);
}

.game-container {
  position: fixed;
  inset: 0;
  z-index: 1;
  height: 100vh;
  height: 100dvh;
  max-height: 100vh;
  max-height: 100dvh;
  min-height: 0;
  display: flex;
  flex-direction: column;
  padding-top: calc(12px + var(--safe-top));
  padding-bottom: calc(12px + var(--safe-bottom));
  width: 100vw;
  max-width: 100vw;
  min-width: 320px;
  overflow: hidden;
}

.top-bar {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 18px;
  border-bottom: 1px solid var(--border-gold);
  gap: 12px;
}

/* Minimal top bar - player info moved to scoreboard row */
.top-bar-minimal {
  justify-content: center;
  padding: 4px 18px;
  min-height: 0;
  border-bottom: none;
}

.top-bar-minimal .turn-badge {
  position: relative;
  left: auto;
  top: auto;
  transform: none;
}

.player-badge {
  display: flex;
  align-items: center;
  gap: 12px;
  background: rgba(255, 255, 255, 0.02);
  padding: 8px 12px;
  border-radius: 999px;
  position: relative;
}

.player-info {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
}

.player-info.right {
  text-align: right;
  flex-direction: row-reverse;
}

.player-name {
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  font-size: var(--font-lg);
}

.ai-speed-toggle {
  background: transparent;
  border: none;
  padding: 0;
  margin-left: 4px;
  font-size: var(--font-base);
  cursor: pointer;
  transition: transform 0.15s;
  vertical-align: middle;
  line-height: 1;
}

.ai-speed-toggle:hover {
  transform: scale(1.15);
}

.ai-speed-toggle:active {
  transform: scale(0.95);
}

.ai-speed-toggle.ai-paused {
  animation: pause-pulse 1.5s ease-in-out infinite;
  color: #ff9800;
}

@keyframes pause-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.1); }
}

.player-stats {
  display: flex;
  gap: 6px;
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.player-badge.is-active {
  box-shadow: 0 0 0 rgba(240, 208, 120, 0.35);
  animation: active-breathe 2.6s ease-in-out infinite;
}

.player-badge.is-active .player-name {
  text-shadow: 0 0 10px rgba(240, 208, 120, 0.65);
}

.turn-badge {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  padding: 6px 16px;
  border-radius: 999px;
  border: 1px solid var(--border-gold);
  background: rgba(212, 168, 83, 0.1);
  text-align: center;
  min-width: 110px;
  animation: glow 2.5s ease-in-out infinite;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  z-index: 5;
}

.turn-number {
  display: block;
  font-family: var(--font-display);
  font-size: var(--font-base);
  letter-spacing: 0.08em;
}

.phase-label {
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.turn-badge:hover:not(:disabled) {
  transform: translate(-50%, -50%) translateY(-1px);
  box-shadow: 0 6px 18px rgba(212, 168, 83, 0.25);
}

.turn-badge:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  box-shadow: none;
}

.turn-badge:focus-visible {
  outline: 2px solid var(--gold-light);
  outline-offset: 2px;
}

/* Surrender Button */
.surrender-btn {
  position: absolute;
  left: calc(50% - 130px);
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  padding: 4px 8px;
  font-size: 18px;
  cursor: pointer;
  transition: transform 0.15s, filter 0.15s;
  opacity: 0.7;
  z-index: 5;
}

.surrender-btn:hover {
  transform: translateY(-50%) scale(1.15);
  opacity: 1;
  filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.3));
}

.surrender-btn:active {
  transform: translateY(-50%) scale(0.95);
}

/* Surrender Overlay */
.surrender-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 2000;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(4px);
}

.surrender-overlay.active {
  display: flex;
}

.surrender-dialog {
  background: var(--bg-primary);
  border: 2px solid var(--border-gold);
  border-radius: 16px;
  padding: 32px 48px;
  text-align: center;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  animation: surrender-dialog-pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes surrender-dialog-pop {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.surrender-title {
  font-family: var(--font-display);
  font-size: 24px;
  margin-bottom: 12px;
  color: var(--gold);
}

.surrender-message {
  font-size: 16px;
  color: var(--text-secondary);
  margin-bottom: 24px;
}

.surrender-actions {
  display: flex;
  gap: 16px;
  justify-content: center;
}

.surrender-btn-yes,
.surrender-btn-no {
  padding: 10px 28px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s;
  border: none;
}

.surrender-btn-yes {
  background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(229, 62, 62, 0.3);
}

.surrender-btn-yes:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(229, 62, 62, 0.4);
}

.surrender-btn-no {
  background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
}

.surrender-btn-no:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(66, 153, 225, 0.4);
}

.pages-container {
  flex: 1;
  position: relative;
  overflow: visible; /* Allow cards to overflow */
  padding: clamp(12px, 2vw, 20px) clamp(8px, 1vw, 14px) 0;
  width: 100%;
  max-width: 100%;
  min-height: var(--min-pages-height); /* Ensure content area doesn't collapse */
}

.page {
  position: absolute;
  inset: 0;
  opacity: 0;
  transform: translateX(20px);
  transition: opacity var(--transition-medium), transform var(--transition-medium);
  pointer-events: none;
  overflow: visible; /* Allow hand cards to overflow upward */
}

.page.active {
  opacity: 1;
  transform: translateX(0);
  pointer-events: auto;
}

.page.exit-left {
  opacity: 0;
  transform: translateX(-20px);
}

.battlefield-layout-three-column {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 2fr) minmax(0, 1fr);
  gap: clamp(10px, 1.5vw, 18px);
  height: 100%;
  max-height: 100%;
  min-height: var(--min-battlefield-height); /* Prevent collapse at high zoom */
  width: 100%;
  max-width: 100%;
  overflow: visible; /* Allow hand cards to overflow upward */
}

/* Two-column layout (no left inspector) */
.battlefield-layout-two-column {
  display: grid;
  grid-template-columns: minmax(0, 3fr) minmax(0, 1fr);
  gap: clamp(10px, 1.5vw, 18px);
  height: 100%;
  max-height: 100%;
  min-height: var(--min-battlefield-height);
  width: 100%;
  max-width: 100%;
  overflow: visible;
}

.battlefield-left-column,
.battlefield-right-column {
  display: flex;
  flex-direction: column;
  gap: clamp(8px, 1.2vw, 16px);
  min-width: 0;
  max-width: 100%;
  min-height: 0;
  overflow-y: auto; /* Enable scrolling if content is too tall for viewport */
  overflow-x: hidden;
}

.battlefield-center-column {
  display: flex;
  flex-direction: column;
  gap: clamp(8px, 1.2vw, 16px); /* Add gap between battlefield and hand */
  min-width: 0;
  width: 100%;
  max-width: 100%;
  height: 100%;
  min-height: 0;
  position: relative;
  overflow-x: hidden;
  overflow-y: visible; /* Allow cards to overflow upward */
}

.battlefield-layout {
  display: grid;
  grid-template-rows: auto minmax(0, 2.33fr) minmax(0, 1fr); /* opponent strip / field / hand ratio */
  gap: clamp(6px, 1vw, 12px); /* Tighter gap for better packing */
  flex: 1; /* Take available space and shrink as needed */
  min-height: 0; /* Allow to shrink completely if needed */
  min-width: 0;
  width: 100%;
  overflow: visible; /* No scrolling, let it pack tightly */
}

.battlefield-region {
  min-height: 0;
  min-width: 0;
  position: relative;
  overflow: visible; /* Allow cards to overflow */
  display: flex;
  flex-direction: column;
  flex: 1;
}

.battle-effects {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 4;
}

.battlefield {
  display: flex;
  flex-direction: column;
  gap: var(--field-gap);
  flex: 1;
  min-height: 0;
  height: 100%;
  max-height: 100%;
  justify-content: space-between;
  width: 100%;
  max-width: 100%;
}

.field-row {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--field-gap);
  width: 100%;
  min-height: 0; /* Allow flexbox to manage height */
  flex: 1; /* Take equal space in parent grid */
}

.field-slot {
  background: var(--bg-field);
  border: 1px dashed var(--border-subtle);
  border-radius: var(--card-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  font-size: var(--font-sm);
  width: 100%;
  height: 100%;
  min-height: 0;
  padding: 4px;
  box-sizing: border-box;
}

/* Cards in field slots maintain standard playing card dimensions */
.field-slot .card {
  width: auto;
  height: 100%;
  max-height: 100%;
  aspect-ratio: 5 / 7; /* Standard playing card ratio */
  margin: 0;
  box-sizing: border-box;
}

.field-slot .card .card-inner {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.field-slot .card .card-name {
  font-size: var(--font-xs);
}

.field-slot .card .card-image-container {
  /* Inherit proportions from base card styles */
}

.field-slot .card .card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.field-slot .card .card-stats-row {
  padding: 0 2px;
}

.field-slot .card .card-stat {
  font-size: var(--font-xs);
  padding: 0 2px;
}

.field-slot .card .card-keywords {
  font-size: var(--font-xs);
}

.field-slot .card .card-effect {
  font-size: var(--font-xs);
}

.field-divider {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 0;
  min-width: 0;
}

.divider-line {
  flex: 1;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
  opacity: 0.6;
}

.divider-orb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: radial-gradient(circle, var(--gold-light), var(--gold-dark));
  box-shadow: 0 0 12px rgba(212, 168, 83, 0.6);
}

.field-divider-text {
  font-size: var(--font-xs);
  letter-spacing: 0.01em;
  color: var(--text-secondary);
  text-align: center;
  white-space: nowrap;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
}

.mobile-nav-left,
.mobile-nav-right {
  display: none;
  position: absolute;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--border-gold);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  align-items: center;
  justify-content: center;
  color: var(--gold-light);
  cursor: pointer;
  transition: all var(--transition-fast);
  z-index: 10;
}

.mobile-nav-left {
  left: 8px;
}

.mobile-nav-right {
  right: 8px;
}

.mobile-nav-left:hover,
.mobile-nav-right:hover {
  background: rgba(212, 168, 83, 0.3);
  transform: scale(1.1);
}

.mobile-nav-left:active,
.mobile-nav-right:active {
  transform: scale(0.95);
}

/* Field Controls (turn button + surrender) in field divider */
.field-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
}

.field-turn-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 18px;
  border-radius: 999px;
  border: 1px solid var(--border-gold);
  background: rgba(212, 168, 83, 0.1);
  color: var(--gold-light);
  font-family: var(--font-display);
  font-size: 16px;
  letter-spacing: 0.05em;
  cursor: pointer;
  transition: all var(--transition-fast);
  animation: glow 2.5s ease-in-out infinite;
}

.field-turn-btn:hover:not(:disabled) {
  background: rgba(212, 168, 83, 0.2);
  box-shadow: 0 4px 12px rgba(212, 168, 83, 0.25);
}

.field-turn-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  animation: none;
}

.field-turn-number {
  font-weight: 600;
}

.field-phase-label {
  opacity: 0.8;
}

/* AI Thinking Indicator */
.field-phase-label.ai-thinking {
  color: var(--accent-gold, #d4a853);
  animation: ai-thinking-glow 1.5s ease-in-out infinite;
  font-weight: 600;
  text-shadow: 0 0 10px rgba(212, 168, 83, 0.5);
}

@keyframes ai-thinking-glow {
  0%, 100% {
    opacity: 0.8;
    text-shadow: 0 0 8px rgba(212, 168, 83, 0.3);
  }
  50% {
    opacity: 1;
    text-shadow: 0 0 16px rgba(212, 168, 83, 0.7);
  }
}

.field-surrender-btn {
  background: transparent;
  border: none;
  padding: 6px;
  font-size: 20px;
  cursor: pointer;
  opacity: 0.7;
  transition: all 0.15s;
}

.field-surrender-btn:hover {
  opacity: 1;
  transform: scale(1.1);
}

.field-resync-btn {
  background: transparent;
  border: none;
  padding: 6px;
  font-size: 20px;
  cursor: pointer;
  opacity: 0.7;
  transition: all 0.15s;
  display: none;
}

.field-resync-btn:hover {
  opacity: 1;
  transform: scale(1.1);
}

.field-resync-btn.online {
  display: inline-block;
}

.info-toggle {
  position: absolute;
  right: 0;
  font-size: 10px;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border-subtle);
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-secondary);
  transition: color var(--transition-fast), border-color var(--transition-fast);
}

.info-toggle:hover {
  color: var(--gold-light);
  border-color: var(--border-gold);
}

.info-toggle--back {
  position: static;
  padding: 4px 10px;
  font-size: 11px;
}

.hand-panel {
  display: flex;
  align-items: stretch;
  padding: 0.5vh 16px 1vh;
  background: linear-gradient(180deg, rgba(10, 14, 20, 0.4), rgba(10, 14, 20, 0.95));
  border-top: 1px solid var(--border-subtle);
  box-shadow: 0 -12px 24px rgba(0, 0, 0, 0.4);
  border-radius: 16px 16px 0 0;
  overflow: visible;
  width: 100%;
  box-sizing: border-box;

  /* VIEWPORT-RELATIVE: always 28% of screen height */
  height: 28vh;
  min-height: 28vh;
  flex-shrink: 0;
}

.hand-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  overflow: visible;
}

.hand-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  padding: 0 8px;
  flex-shrink: 0;
  height: 2.5vh;
}

.hand-title {
  font-family: var(--font-display);
  font-size: 2vh;
  letter-spacing: 0.05em;
}

.hand-hint {
  font-size: 1.5vh;
  color: var(--text-muted);
}

.hand-grid {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  flex-wrap: nowrap;
  gap: 0;
  overflow: visible;
  flex: 1;
  position: relative;
  z-index: 1;
}

.hand-grid .card {
  /* VIEWPORT-RELATIVE: card height is ~22% of viewport, width from aspect ratio */
  height: 22vh;
  width: auto;
  aspect-ratio: 5 / 7;
  flex: 0 0 auto;
  margin-left: calc(var(--hand-overlap, 0px) * -1);
  transform-origin: bottom center;
  /* Cards rest mostly visible with small offset */
  transform: translateY(calc(10% + var(--card-offset-y, 0px))) rotate(var(--card-rotation, 0deg));
  /* Snappy bounce transition */
  transition: transform 0.18s cubic-bezier(0.34, 1.3, 0.64, 1), box-shadow 0.15s ease-out, z-index 0s;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
  position: relative;
  z-index: calc(10 + var(--card-index, 0));
}

.hand-grid .card:first-child {
  margin-left: 0;
}

.hand-grid .card.hand-focus {
  z-index: 2000;
  /* Lift and enlarge card 1.5x */
  transform: translateY(-60%) scale(1.5) rotate(0deg);
  box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6);
}

.hand-grid .card .card-name {
  font-size: 1.4vh;
}

.hand-grid .card .card-header {
  padding: 0.5vh 0.6vh;
}

.hand-grid .card .card-footer {
  padding: 0.5vh 0.6vh;
  gap: 0.4vh;
}

.hand-grid .card .card-stat-box {
  padding: 0.3vh 0.5vh;
  gap: 0.3vh;
}

.hand-grid .card .card-stat-box .stat-emoji {
  font-size: 1.3vh;
}

.hand-grid .card .card-stat-box .stat-value {
  font-size: 1.4vh;
}

.hand-grid .card .card-text-area {
  font-size: 1.2vh;
}

.hand-grid .card .card-actions {
  gap: 0.4vh;
}

.hand-grid .card .card-actions button {
  font-size: 1.1vh;
  padding: 0.4vh 0.6vh;
}

/* ============================================================================
   SCOREBOARD ROW (replaces opponent hand strip)
   Shows both players' info with opponent hand cards centered
   ============================================================================ */

.scoreboard-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 60px;
  min-height: 60px;
  max-height: 60px;
  padding: 6px 14px;
  background: linear-gradient(180deg, rgba(10, 14, 20, 0.6), rgba(10, 14, 20, 0.3));
  border-bottom: 1px solid var(--border-subtle);
  border-radius: 0 0 8px 8px;
  overflow: visible;
  flex-shrink: 0;
}

.scoreboard-left,
.scoreboard-right {
  flex: 0 0 auto;
  min-width: 160px;
}

.scoreboard-center {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: visible;
}

.scoreboard-player {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 12px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.02);
  transition: all 0.2s ease;
}

.scoreboard-left .scoreboard-player {
  flex-direction: row;
}

.scoreboard-right .scoreboard-player {
  flex-direction: row-reverse;
  margin-left: auto;
}

.scoreboard-player .player-name {
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  font-size: var(--font-lg);
  white-space: nowrap;
}

.scoreboard-stats {
  display: flex;
  gap: 8px;
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.scoreboard-right .scoreboard-stats {
  flex-direction: row-reverse;
}

.scoreboard-player .emote-toggle {
  padding: 4px 8px;
  font-size: var(--font-base);
  background: transparent;
  border: none;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.15s;
}

.scoreboard-player .emote-toggle:hover {
  opacity: 1;
}

/* Active player breathing animation on name text */
@keyframes name-breathe {
  0%, 100% {
    color: #ffffff;
    text-shadow: 0 0 4px rgba(255, 255, 255, 0.3);
  }
  50% {
    color: #f0d078;
    text-shadow: 0 0 12px rgba(240, 208, 120, 0.7);
  }
}

.scoreboard-player.is-active .player-name {
  animation: name-breathe 2.6s ease-in-out infinite;
}

/* Preserve gradient names during animation */
.scoreboard-player.is-active .player-name.name-gradient {
  animation: name-breathe-gradient 2.6s ease-in-out infinite;
}

@keyframes name-breathe-gradient {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 4px rgba(255, 255, 255, 0.3));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 12px rgba(240, 208, 120, 0.7));
  }
}

/* Legacy opponent-hand-strip kept for compatibility */
.opponent-hand-strip {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 50px;
  min-height: 50px;
  max-height: 50px;
  padding: 4px 12px;
  background: linear-gradient(180deg, rgba(10, 14, 20, 0.6), rgba(10, 14, 20, 0.3));
  border-bottom: 1px solid var(--border-subtle);
  border-radius: 0 0 8px 8px;
  overflow: visible;
  flex-shrink: 0;
}

.opponent-hand-cards {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  height: 100%;
  overflow: visible;
}

/* Opponent card back styling */
.opponent-hand-cards .card-back {
  width: 30px;
  height: 42px;
  background: linear-gradient(135deg, #1a2332 0%, #0d1117 100%);
  border: 1px solid var(--border-gold);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  margin-left: -12px;
  transition: transform 0.15s ease, margin 0.15s ease, box-shadow 0.15s ease;
  position: relative;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

.opponent-hand-cards .card-back:first-child {
  margin-left: 0;
}

/* Card back inner pattern */
.opponent-hand-cards .card-back::before {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid rgba(212, 168, 83, 0.2);
  border-radius: 2px;
  pointer-events: none;
}

/* Hover state - card raises slightly */
.opponent-hand-cards .card-back.opponent-hovered {
  transform: translateY(-8px) scale(1.1);
  z-index: 10;
  box-shadow: 0 8px 16px rgba(212, 168, 83, 0.3);
  margin-left: 4px;
  margin-right: 4px;
}

.opponent-hand-cards .card-back.opponent-hovered:first-child {
  margin-left: 0;
}

/* Dragging state - card being dragged (hidden from strip) */
.opponent-hand-cards .card-back.opponent-dragging {
  opacity: 0.3;
  transform: scale(0.9);
}

/* ============================================================================
   AI FLYING CARD ANIMATION
   Card that flies from opponent hand to field
   ============================================================================ */

.ai-flying-card {
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  width: 60px;
  height: 84px;
}

.ai-flying-card-back {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border: 2px solid #d4a853;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.4),
    0 0 20px rgba(212, 168, 83, 0.3);
  backface-visibility: hidden;
}

/* Card flip reveal animation */
.ai-flying-card.revealing {
  animation: ai-card-reveal 0.2s ease-out forwards;
}

@keyframes ai-card-reveal {
  0% {
    transform: translate(-50%, -50%) scale(1.05) rotateY(0deg);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.1) rotateY(90deg);
    opacity: 0.8;
  }
  100% {
    transform: translate(-50%, -50%) scale(1) rotateY(180deg);
    opacity: 0;
  }
}

/* ============================================================================
   AI COMBAT VISUAL HIGHLIGHTS
   Selection and targeting glows during AI attacks
   ============================================================================ */

/* Attacker selection - orange pulsing glow */
.ai-attacker-selected {
  animation: ai-attacker-pulse 0.8s ease-in-out infinite !important;
  box-shadow:
    0 0 15px rgba(255, 165, 0, 0.7),
    0 0 30px rgba(255, 165, 0, 0.4),
    inset 0 0 10px rgba(255, 165, 0, 0.2) !important;
  z-index: 100;
}

@keyframes ai-attacker-pulse {
  0%, 100% {
    box-shadow:
      0 0 15px rgba(255, 165, 0, 0.6),
      0 0 25px rgba(255, 165, 0, 0.3);
  }
  50% {
    box-shadow:
      0 0 25px rgba(255, 165, 0, 0.9),
      0 0 40px rgba(255, 165, 0, 0.5);
  }
}

/* Target consideration - red/orange glow */
.ai-target-considering {
  animation: ai-target-pulse 0.6s ease-in-out infinite !important;
  box-shadow:
    0 0 15px rgba(255, 69, 0, 0.7),
    0 0 30px rgba(255, 69, 0, 0.4),
    inset 0 0 10px rgba(255, 69, 0, 0.2) !important;
  z-index: 99;
}

@keyframes ai-target-pulse {
  0%, 100% {
    box-shadow:
      0 0 12px rgba(255, 69, 0, 0.6),
      0 0 20px rgba(255, 69, 0, 0.3);
  }
  50% {
    box-shadow:
      0 0 20px rgba(255, 69, 0, 0.9),
      0 0 35px rgba(255, 69, 0, 0.5);
  }
}

/* Player field as target (for direct attacks) */
#player-field.ai-target-considering {
  position: relative;
}

#player-field.ai-target-considering::after {
  content: '';
  position: absolute;
  inset: -5px;
  border: 3px solid rgba(255, 69, 0, 0.6);
  border-radius: 8px;
  animation: ai-target-pulse 0.6s ease-in-out infinite;
  pointer-events: none;
}

/* ============================================================================
   AI HAND CARD SELECTION (Player 0 in AI vs AI mode)
   Visual feedback when AI player 0 selects cards from the bottom hand
   ============================================================================ */

/* AI selecting a card - raise and highlight */
.card.ai-selecting {
  transform: translateY(-20px) scale(1.05) !important;
  box-shadow:
    0 0 20px rgba(100, 200, 255, 0.7),
    0 0 40px rgba(100, 200, 255, 0.4) !important;
  z-index: 1000 !important;
  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out !important;
}

/* AI dragging a card - faded to show it's being moved */
.card.ai-dragging {
  opacity: 0.3 !important;
  transform: scale(0.95) !important;
  transition: opacity 0.15s ease-out, transform 0.15s ease-out !important;
}

/* ============================================================================
   AI ATTACK ARROW
   Animated arcing arrow showing attack path from attacker to target
   ============================================================================ */

/* Arrow container - hidden by default, animates in */
.ai-attack-arrow {
  opacity: 0;
  transition: opacity 0.15s ease-out;
}

.ai-attack-arrow.visible {
  opacity: 1;
}

.ai-attack-arrow.fading {
  opacity: 0;
  transition: opacity 0.2s ease-out;
}

/* Arrow path - glowing orange stroke with dash animation */
.ai-arrow-path {
  fill: none;
  stroke: rgba(255, 165, 0, 0.9);
  stroke-width: 4;
  stroke-linecap: round;
  filter: url(#arrow-glow);
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: arrow-draw 0.4s ease-out forwards, arrow-pulse 1s ease-in-out 0.4s infinite;
}

/* Arrowhead - matching orange with glow */
.ai-arrow-head {
  fill: rgba(255, 165, 0, 0.95);
  filter: url(#arrow-glow);
  opacity: 0;
  animation: arrowhead-appear 0.2s ease-out 0.35s forwards, arrow-pulse 1s ease-in-out 0.4s infinite;
}

/* Draw animation - line appears progressively */
@keyframes arrow-draw {
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

/* Arrowhead fade in */
@keyframes arrowhead-appear {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Pulsing glow effect */
@keyframes arrow-pulse {
  0%, 100% {
    stroke: rgba(255, 165, 0, 0.8);
    filter: url(#arrow-glow) drop-shadow(0 0 6px rgba(255, 165, 0, 0.5));
  }
  50% {
    stroke: rgba(255, 200, 50, 1);
    filter: url(#arrow-glow) drop-shadow(0 0 12px rgba(255, 165, 0, 0.8));
  }
}

/* ============================================================================
   OPPONENT CURSOR (Spirit Ball)
   Glowing orb that follows opponent's cursor position
   ============================================================================ */

.opponent-cursor {
  position: fixed;
  width: 20px;
  height: 20px;
  pointer-events: none;
  z-index: 9999;
  opacity: 0;
  transition: opacity 0.3s ease;
  transform: translate(-50%, -50%);
}

.opponent-cursor.active {
  opacity: 1;
}

.cursor-glow {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(212, 168, 83, 0.9) 0%, rgba(212, 168, 83, 0.4) 40%, transparent 70%);
  animation: cursor-pulse 1.5s ease-in-out infinite;
  box-shadow:
    0 0 10px rgba(212, 168, 83, 0.6),
    0 0 20px rgba(212, 168, 83, 0.4),
    0 0 30px rgba(212, 168, 83, 0.2);
}

@keyframes cursor-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.8;
  }
}

.cursor-trail {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 8px;
  height: 8px;
  margin: -4px 0 0 -4px;
  border-radius: 50%;
  background: var(--gold-light);
  box-shadow:
    0 0 6px var(--gold),
    0 0 12px rgba(212, 168, 83, 0.5);
}

/* ============================================================================
   OPPONENT DRAG PREVIEW
   Floating face-down card that follows drag position
   ============================================================================ */

.opponent-drag-preview {
  position: fixed;
  width: 80px;
  height: 112px;
  pointer-events: none;
  z-index: 9998;
  opacity: 0;
  transform: translate(-50%, -50%) rotate(-5deg);
  transition: opacity 0.15s ease;
}

.opponent-drag-preview.active {
  opacity: 1;
}

.opponent-drag-preview .card-back {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #1a2332 0%, #0d1117 100%);
  border: 2px solid var(--border-gold);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.5),
    0 0 20px rgba(212, 168, 83, 0.3);
  position: relative;
}

.opponent-drag-preview .card-back::before {
  content: '';
  position: absolute;
  inset: 6px;
  border: 1px solid rgba(212, 168, 83, 0.3);
  border-radius: 4px;
  pointer-events: none;
}

/* ============================================================================
   CARD FLIP ANIMATION
   3D flip effect when opponent plays a card
   ============================================================================ */

.card-flip-container {
  position: fixed;
  perspective: 1000px;
  pointer-events: none;
  z-index: 9997;
}

.card-flip {
  width: 100px;
  height: 140px;
  position: relative;
  transform-style: preserve-3d;
  animation: card-flip-animation 0.2s ease-out forwards;
}

@keyframes card-flip-animation {
  0% {
    transform: rotateY(180deg);
  }
  100% {
    transform: rotateY(0deg);
  }
}

.card-flip .card-flip-front,
.card-flip .card-flip-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 6px;
}

.card-flip .card-flip-front {
  background: var(--bg-card);
}

.card-flip .card-flip-back {
  transform: rotateY(180deg);
  background: linear-gradient(135deg, #1a2332 0%, #0d1117 100%);
  border: 2px solid var(--border-gold);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
}

.game-log-panel {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: clamp(8px, 1.2vw, 12px);
  padding: clamp(8px, 1.2vw, 14px);
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow-x: hidden;
  overflow-y: auto; /* Allow scrolling if log content is too tall */
  min-height: var(--min-log-height); /* Ensure minimum visibility */
  max-height: 100%; /* Don't exceed parent */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.card-inspector-panel {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: clamp(8px, 1.2vw, 12px);
  padding: clamp(8px, 1.2vw, 14px);
  display: flex;
  flex-direction: column;
  gap: clamp(6px, 1vw, 10px);
  flex: 1; /* Allow to grow but can shrink */
  min-height: var(--min-inspector-height); /* Ensure minimum visibility */
  max-height: 100%; /* Don't exceed parent */
  overflow-x: hidden;
  overflow-y: auto; /* Allow scrolling if content is too tall */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.inspector-header,
.log-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.inspector-header h3,
.log-header h3 {
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  color: var(--gold-light);
  font-size: var(--font-2xl);
  margin: 0;
}

/* Hide mobile close button on desktop */
.mobile-panel-close {
  display: none;
}

.inspector-content {
  flex: 1;
  overflow-y: auto; /* Allow scrolling if content is too tall */
  padding-right: 6px;
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.inspector-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-muted);
  font-style: italic;
  font-size: 13px;
}

.inspector-card-layout {
  display: flex;
  flex-direction: column;
  gap: 16px;
  height: 100%;
  min-height: 0;
}

.inspector-card-image {
  flex: 0 0 auto;
  width: 100%;
  margin: 0;
}

.inspector-image-container {
  width: 100%;
  aspect-ratio: 4 / 3;
  background: rgba(255, 255, 255, 0.03);
  border: 2px dashed var(--border-subtle);
  border-radius: var(--card-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.inspector-card-image-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: calc(var(--card-radius) - 2px);
}

.inspector-image-placeholder {
  font-size: 48px;
  opacity: 0.7;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  justify-content: center;
}

.inspector-card-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
  padding-right: 6px;
}

.inspector-card-content h4 {
  margin: 0;
  font-family: var(--font-display);
  font-size: 20px;
  color: var(--text-primary);
  letter-spacing: 0.04em;
}

/* Inspector card name rarity styling */
.inspector-card-content h4.rarity-common {
  color: #4ade80;
  text-shadow: 0 0 6px rgba(74, 222, 128, 0.4);
}

.inspector-card-content h4.rarity-uncommon {
  color: #60a5fa;
  text-shadow: 0 0 8px rgba(96, 165, 250, 0.5);
}

.inspector-card-content h4.rarity-rare {
  color: #c084fc;
  text-shadow: 0 0 10px rgba(192, 132, 252, 0.6);
}

.inspector-card-content h4.rarity-legendary {
  color: #fb923c;
  text-shadow:
    0 0 10px rgba(251, 146, 60, 0.7),
    0 0 20px rgba(251, 146, 60, 0.5);
  animation: legendary-glow 2s ease-in-out infinite;
}

.inspector-card-content h4.rarity-pristine {
  background: linear-gradient(
    90deg,
    #ffffff 0%,
    #ffd4e5 15%,
    #d4f1ff 30%,
    #e8d4ff 45%,
    #ffffff 60%,
    #d4ffe8 75%,
    #fff4d4 90%,
    #ffffff 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: pristine-shimmer 3s ease-in-out infinite;
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7));
}

.inspector-card-content .meta {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.inspector-card-content .effect {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin-top: 4px;
}

.inspector-card-content .keyword-glossary {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-subtle);
}

.inspector-card-content .keyword-glossary strong {
  font-size: 15px;
  color: var(--text-primary);
  display: block;
  margin-bottom: 6px;
}

.inspector-card-content .keyword-glossary ul {
  margin: 0;
  padding-left: 16px;
  list-style: none;
}

.inspector-card-content .keyword-glossary li {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 4px;
  line-height: 1.4;
}

.inspector-card-content .keyword-glossary li strong {
  color: var(--text-primary);
}

/* Deck construction mode - full width for content */
.inspector-deck-mode {
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding-right: 6px;
}

.inspector-deck-mode h4 {
  margin-top: 0;
  font-size: 20px;
}

.inspector-deck-mode .meta {
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 8px;
}

.inspector-deck-mode .effect {
  font-size: 14px;
  line-height: 1.5;
  margin: 12px 0;
}

.inspector-deck-mode .keyword-glossary {
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid var(--border-subtle);
}

.inspector-deck-mode .keyword-glossary strong {
  font-size: 15px;
  margin-bottom: 8px;
}

.inspector-deck-mode .keyword-glossary li {
  font-size: 13px;
  line-height: 1.4;
  margin-bottom: 6px;
}

/* Responsive inspector for mobile */
@media (max-width: 768px) {
  .inspector-card-layout {
    flex-direction: column;
    gap: 12px;
  }
  
  .inspector-card-image {
    width: 100%;
    max-width: 180px;
    margin: 0 auto;
  }
  
  .inspector-image-container {
    max-height: 200px;
  }
}

.log-content {
  flex: 1;
  overflow-y: auto;
  padding-right: 6px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 0;
  margin-top: 10px;
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.log-entry {
  font-size: var(--font-sm);
  color: var(--text-secondary);
  padding: 4px 6px;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 6px;
  border-left: 2px solid var(--border-gold);
}

.log-turn {
  font-weight: 600;
  color: var(--gold-light);
}

.log-action {
  margin-left: 8px;
}

.log-card-link {
  text-decoration: underline;
  text-decoration-color: var(--border-gold);
  text-underline-offset: 2px;
  cursor: pointer;
  color: var(--text-primary);
  transition: color 0.15s ease, text-decoration-color 0.15s ease;
}

.log-card-link:hover {
  color: var(--border-gold);
  text-decoration-color: currentColor;
}

.piles-section {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: clamp(8px, 1.2vw, 12px);
  padding: clamp(8px, 1.2vw, 14px);
  margin-top: clamp(8px, 1.2vw, 14px);
  flex-shrink: 0; /* Don't allow shrinking */
  min-height: var(--min-piles-height); /* Ensure piles remain visible */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.piles-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: clamp(4px, 0.8vw, 8px);
  width: 100%;
}

.pile-item {
  background: rgba(255, 255, 255, 0.02);
  border-radius: clamp(6px, 1vw, 8px);
  padding: clamp(6px, 1vw, 10px);
  text-align: center;
  font-size: var(--font-xs);
  color: var(--text-secondary);
  cursor: pointer;
  transition: background 0.15s ease;
}

.pile-item:hover {
  background: rgba(255, 255, 255, 0.06);
}

.pile-item > span {
  display: block;
  font-size: var(--font-xs);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 4px;
}

.pile-item strong {
  display: inline;
  font-size: var(--font-lg);
  color: var(--text-primary);
  font-weight: 600;
  white-space: nowrap;
}

/* ============================================
   ADVANTAGE TRACKER
   ============================================ */

.advantage-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: clamp(8px, 1vw, 12px);
  margin-bottom: clamp(8px, 1vw, 12px);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 8px;
}

.advantage-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 4px;
}

.advantage-header span {
  font-size: var(--font-xs);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-secondary);
}

.graph-toggle {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: var(--font-sm);
  opacity: 0.6;
  transition: opacity 0.2s;
  padding: 2px 4px;
}

.graph-toggle:hover {
  opacity: 1;
}

.graph-toggle.active {
  opacity: 1;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

.advantage-value {
  font-size: var(--font-2xl);
  font-weight: 700;
  font-family: var(--font-display);
  transition: color 0.3s ease;
}

.advantage-description {
  font-size: var(--font-xs);
  color: var(--text-secondary);
  margin-top: 2px;
}

.advantage-graph-container {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 6px;
  padding: 8px;
  margin-bottom: clamp(8px, 1vw, 12px);
}

.advantage-graph-container canvas {
  width: 100%;
  height: 80px;
  display: block;
  cursor: default;
}

/* ============================================
   HOLOGRAM DISPLAY (Advantage Graph Hover)
   ============================================ */

.hologram-active {
  position: relative;
}

.hologram-active .field-slot {
  position: relative;
}

.hologram-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 180, 255, 0.15);
  border: 2px solid rgba(0, 200, 255, 0.6);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  pointer-events: none;
  backdrop-filter: blur(2px);
  animation: hologram-flicker 2s ease-in-out infinite;
}

@keyframes hologram-flicker {
  0%, 100% { opacity: 0.9; }
  50% { opacity: 1; }
  25%, 75% { opacity: 0.85; }
}

.hologram-creature {
  text-align: center;
  color: #00e5ff;
  text-shadow: 0 0 8px rgba(0, 229, 255, 0.8);
}

.hologram-name {
  font-size: var(--font-sm);
  font-weight: 600;
  margin-bottom: 4px;
}

.hologram-stats {
  font-size: var(--font-sm);
  font-family: var(--font-display);
}

.hologram-atk {
  color: #ff6b6b;
  text-shadow: 0 0 6px rgba(255, 107, 107, 0.6);
}

.hologram-atk.buffed {
  color: #4ade80;
  text-shadow: 0 0 6px rgba(74, 222, 128, 0.8);
}

.hologram-atk.debuffed {
  color: #f87171;
  text-shadow: 0 0 6px rgba(248, 113, 113, 0.8);
}

.hologram-hp-stat {
  color: #4ade80;
  text-shadow: 0 0 6px rgba(74, 222, 128, 0.6);
}

.hologram-hp-stat.damaged {
  color: #fbbf24;
  text-shadow: 0 0 6px rgba(251, 191, 36, 0.8);
}

.hologram-hp-stat.buffed {
  color: #22d3ee;
  text-shadow: 0 0 6px rgba(34, 211, 238, 0.8);
}

.hologram-empty {
  color: rgba(0, 200, 255, 0.5);
  font-size: var(--font-xs);
  font-style: italic;
}

.hologram-creature.will-die {
  color: #ff6b6b;
  text-shadow: 0 0 8px rgba(255, 100, 100, 0.8);
}

.hologram-creature.will-die .hologram-name {
  text-decoration: line-through;
  text-decoration-color: rgba(255, 100, 100, 0.6);
}

.hologram-death-marker {
  position: absolute;
  top: 4px;
  right: 4px;
  font-size: 20px;
  z-index: 101;
  animation: death-pulse 1s ease-in-out infinite;
  filter: drop-shadow(0 0 4px rgba(255, 0, 0, 0.8));
}

@keyframes death-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.15); opacity: 0.8; }
}

.hologram-hp {
  font-size: var(--font-xs);
  color: #00e5ff;
  text-shadow: 0 0 6px rgba(0, 229, 255, 0.6);
  margin-top: 4px;
  animation: hologram-flicker 2s ease-in-out infinite;
}

.info-container {
  display: flex;
  flex-direction: column;
  gap: 16px;
  height: 100%;
}

.info-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.info-header h3 {
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  color: var(--gold-light);
}

.info-section {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.info-section h3 {
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  color: var(--gold-light);
}

.inspector-content {
  font-size: 13px;
  color: var(--text-secondary);
  max-height: 900px;
  font-size: 40px;
  overflow-y: auto; /* Allow scrolling if content is too tall */
}

.log-content {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 900px;
  padding-right: 6px;
}

.piles-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.pile-item {
  background: rgba(255, 255, 255, 0.02);
  border-radius: 10px;
  padding: 10px;
  text-align: center;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: background 0.15s ease;
}

.pile-item:hover {
  background: rgba(255, 255, 255, 0.06);
}

.pile-item strong {
  display: inline;
  font-size: 16px;
  color: var(--text-primary);
  margin-top: 4px;
  white-space: nowrap;
}

.action-bar {
  display: flex;
  flex-direction: column;
  gap: clamp(6px, 1vw, 12px);
  padding: clamp(4px, 0.8vw, 8px) clamp(10px, 1.5vw, 20px) clamp(6px, 1vw, 12px);
  height: 0;
  pointer-events: none;
  border-top: none;
  background: transparent;
  width: clamp(320px, 42vw, 680px);
  max-width: 100%;
  position: fixed;
  bottom: calc(0px + var(--safe-bottom));
  left: 50%;
  transform: translateX(-50%);
  right: auto;
  overflow: hidden;
  box-sizing: border-box;
  transform-origin: bottom center;
  z-index: 12;
}

.action-bar.has-selection,
.action-bar.has-actions {
  padding: clamp(6px, 1vw, 12px) clamp(10px, 1.5vw, 20px) clamp(8px, 1.2vw, 16px);
  height: auto;
  max-height: 50vh;
  pointer-events: auto;
  background: rgba(10, 14, 20, 0.96);
  border-top: 1px solid var(--border-subtle);
  overflow-y: auto;
  overflow-x: hidden;
  box-sizing: border-box;
}

/* Widen action bar for card selection grids */
.action-bar.has-selection:has(.selection-card) {
  width: clamp(360px, 85vw, 720px);
  max-width: 90vw;
}

/* Selection blocked animation - shown when trying to advance phase with pending selection */
.action-bar.selection-blocked {
  animation: selection-blocked-shake 0.5s ease-in-out;
}

.action-bar.selection-blocked #selection-panel {
  animation: selection-blocked-glow 0.5s ease-in-out;
}

@keyframes selection-blocked-shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

@keyframes selection-blocked-glow {
  0% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
    border-color: var(--border-subtle);
  }
  50% {
    box-shadow: 0 0 20px 4px rgba(220, 38, 38, 0.6);
    border-color: #dc2626;
  }
  100% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
    border-color: var(--border-subtle);
  }
}

/* Ensure selection panel has border for glow effect */
#selection-panel:not(:empty) {
  border: 2px solid var(--border-subtle);
  border-radius: 8px;
  padding: 8px 12px;
  transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.action-buttons {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: clamp(8px, 1.2vw, 14px);
  width: 100%;
  max-width: min(400px, 90%);
  margin: 0 auto;
}

.action-btn {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: clamp(8px, 1.2vw, 14px);
  padding: clamp(8px, 1.2vw, 14px) clamp(10px, 1.5vw, 18px);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(6px, 1vw, 10px);
  font-weight: 600;
  font-size: var(--font-sm);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  width: 100%;
  min-height: clamp(32px, 5vh, 44px);
}

.action-btn.primary {
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: #2e2211;
  border: none;
}

.action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.action-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
}

.selection-panel,
.action-panel {
  display: flex;
  flex-direction: column;
  gap: clamp(6px, 1vw, 10px);
  font-size: var(--font-base);
  width: 100%;
  max-width: 100%;
}

.action-panel {
  align-items: center;
}

.action-panel .action-buttons {
  width: min(260px, 100%);
  grid-template-columns: minmax(0, 1fr);
  justify-items: center;
  max-width: min(300px, 90%);
}

.action-panel .action-btn {
  padding: clamp(4px, 0.8vw, 8px) clamp(10px, 1.5vw, 16px);
  min-height: clamp(28px, 4vh, 36px);
  width: 100%;
  max-width: 100%;
}

.selection-panel {
  font-size: var(--font-base);
  width: 100%;
  max-width: 100%;
}

/* Selection panel header with title and hide button */
.selection-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.selection-header strong {
  flex: 1;
}

.hide-panel-btn {
  padding: 4px 8px;
  font-size: 11px;
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 4px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.hide-panel-btn:hover {
  background: var(--bg-card);
  color: var(--text-primary);
}

/* Selection panel content wrapper */
.selection-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Minimized state - hide content, show only header */
#selection-panel.minimized .selection-content {
  display: none;
}

#selection-panel.minimized {
  padding: 4px 8px;
}

@keyframes active-breathe {
  0%,
  100% {
    box-shadow: 0 0 0 rgba(240, 208, 120, 0.15);
  }
  50% {
    box-shadow: 0 0 18px rgba(240, 208, 120, 0.45);
  }
}

.selection-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.selection-item {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-card);
  padding: 6px 8px;
  border-radius: 8px;
}

.selection-item.selection-card {
  flex-direction: column;
  align-items: center;
}

.selection-item.selection-card .card {
  width: clamp(140px, 35vw, 200px);
  max-width: 200px;
}

.selection-item button {
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  padding: 4px 8px;
  font-size: 12px;
}

/* Recently drawn card indicator for discard selection */
.selection-item.recently-drawn {
  position: relative;
}

.selection-item.recently-drawn::before {
  content: "NEW";
  position: absolute;
  top: 8px;
  right: 8px;
  background: var(--prey);
  color: var(--bg-main);
  font-size: 10px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: 4px;
  z-index: 10;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Option bubble styles for discrete effect choices */
.selection-item.option-bubble {
  flex-direction: column;
  align-items: stretch;
  padding: 0;
}

.option-bubble-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-card-hover) 100%);
  border: 2px solid var(--border-gold);
  border-radius: 12px;
  padding: 12px 16px;
  min-width: 140px;
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.option-bubble-btn:hover {
  background: linear-gradient(135deg, var(--bg-card-hover) 0%, rgba(212, 168, 83, 0.15) 100%);
  border-color: var(--gold-light);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(212, 168, 83, 0.25);
}

.option-bubble-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

.option-bubble-btn .option-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--gold-light);
  text-align: center;
}

.option-bubble-btn .option-description {
  font-size: 11px;
  color: var(--text-muted);
  text-align: center;
  line-height: 1.3;
}

/* Selection list layout for option bubbles */
.selection-list:has(.option-bubble) {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
}

/* Selection list grid layout for card selections */
.selection-list:has(.selection-card) {
  display: grid;
  grid-template-columns: repeat(2, minmax(130px, 1fr));
  gap: 12px;
  max-width: 100%;
  justify-items: center;
}

/* Tablet: 2-3 columns */
@media (min-width: 540px) {
  .selection-list:has(.selection-card) {
    grid-template-columns: repeat(auto-fit, minmax(150px, 200px));
    justify-content: center;
  }
}

/* Desktop: 3 columns */
@media (min-width: 768px) {
  .selection-list:has(.selection-card) {
    grid-template-columns: repeat(3, minmax(160px, 200px));
    justify-content: center;
  }
}

/* Smaller cards in grid for better fit */
.selection-list:has(.selection-card) .selection-item.selection-card {
  width: 100%;
  max-width: 180px;
  padding: 8px;
}

.selection-list:has(.selection-card) .selection-item.selection-card .card {
  width: 100%;
  max-width: 160px;
}

.selection-list:has(.selection-card) .selection-item.selection-card button {
  width: 100%;
  margin-top: 6px;
  padding: 8px 12px;
}

/* Mobile: ensure cards don't get too small */
@media (max-width: 480px) {
  .selection-list:has(.selection-card) {
    grid-template-columns: repeat(2, minmax(130px, 1fr));
    gap: 8px;
  }

  .selection-list:has(.selection-card) .selection-item.selection-card {
    max-width: 160px;
    padding: 6px;
  }

  .selection-list:has(.selection-card) .selection-item.selection-card .card {
    max-width: 140px;
  }
}

/* Very small screens: single column */
@media (max-width: 320px) {
  .selection-list:has(.selection-card) {
    grid-template-columns: 1fr;
  }
}

/* Selection panel layout for card grids */
.selection-panel:has(.selection-card) {
  align-items: center;
}

/* Title above card selection grid */
.selection-panel:has(.selection-card) > strong {
  text-align: center;
  font-size: 16px;
  margin-bottom: 8px;
  color: var(--gold-light);
}

/* Cancel/Confirm button below card selection grid */
.selection-panel:has(.selection-card) > button {
  margin-top: 12px;
  width: 100%;
  max-width: 200px;
  align-self: center;
  padding: 10px 20px;
}

.secondary {
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  padding: 6px 10px;
  font-size: 12px;
}

.page-nav {
  display: none;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 48px;
  height: 80px;
  border: 1px solid var(--border-gold);
  border-radius: 16px;
  background: rgba(10, 14, 20, 0.7);
  color: var(--gold-light);
  z-index: 6;
  transition: background var(--transition-fast), transform var(--transition-fast);
}

.page-nav svg {
  width: 26px;
  height: 26px;
}

.page-nav:hover {
  background: rgba(212, 168, 83, 0.2);
}

.page-nav:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.page-nav-left {
  left: 8px;
}

.page-nav-right {
  right: 8px;
}

.page-dots {
  display: none;
  position: absolute;
  bottom: 90px;
  left: 50%;
  transform: translateX(-50%);
  gap: 10px;
  z-index: 6;
}

.page-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  border: 1px solid var(--gold);
  background: transparent;
  transition: transform var(--transition-fast), background var(--transition-fast);
}

.page-dot.active {
  transform: scale(1.2);
  background: var(--gold);
}

.card {
  background: var(--bg-card);
  border-radius: var(--card-radius);
  border: 2px solid #000;
  position: relative;
  overflow: hidden;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  aspect-ratio: 5 / 7; /* Standard playing card ratio */
  width: 100%;
}

.card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--mana-blue);
}

.card.type-predator::before {
  background: var(--predator);
}

.card.type-prey::before {
  background: var(--prey);
}

.card.type-spell::before {
  background: var(--spell);
}

.card.type-free-spell::before {
  background: var(--freespell);
}

.card.type-trap::before {
  background: var(--trap);
}

.card-inner {
  padding: 0;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.card-header {
  padding: 8px 10px;
  flex-shrink: 0;
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid var(--border-subtle);
}

/* Card name: ~8% of card height */
.card-name {
  font-weight: 600;
  font-size: 12px;
  text-align: center;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  padding: 4px 6px;
  background: rgba(0, 0, 0, 0.4);
  flex: 0 0 8%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-type-label {
  display: none; /* Type info removed from card UI - handled by card border color */
}

/* Stats row: ~10% of card height */
.card-stats-row {
  display: flex;
  gap: 0;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
  flex: 0 0 10%;
  padding: 0 4px;
  background: rgba(0, 0, 0, 0.3);
}

/* When only 2 stats (no nutrition), split row in half */
.card-stats-row.two-stats {
  justify-content: space-around;
}

.card-stats-row.two-stats .card-stat {
  flex: 1;
  text-align: center;
}

.card-stat {
  font-size: 12px;
  padding: 2px 8px;
  white-space: nowrap;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.card-stat.atk {
  color: var(--atk-yellow);
}

.card-stat.hp {
  color: var(--hp-red);
}

.card-stat.nut {
  color: var(--prey);
}

.card-keywords {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  font-size: 15px;
  color: var(--text-primary);
  justify-content: center;
  text-align: center;
  align-items: center;
}

.card-keywords span {
  font-weight: bold;
  text-decoration: underline;
  padding: 0 2px;
}

.card-keywords .keyword-field-spell {
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  color: white;
  padding: 1px 4px;
  border-radius: 3px;
  text-decoration: none;
  font-size: 9px;
}

.card-keywords .keyword-status-deadly {
  background: linear-gradient(135deg, #7c2d2d, #991b1b);
  color: #fca5a5;
  padding: 1px 4px;
  border-radius: 3px;
  text-decoration: none;
  font-size: 9px;
  animation: pulse-deadly 1.5s ease-in-out infinite;
}

@keyframes pulse-deadly {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.card-effect {
  font-size: 11px;
  color: var(--text-secondary);
  line-height: 1.25;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* SVG effect text - scales perfectly with card */
.card-effect-svg {
  width: 100%;
  height: 100%;
  max-height: 100%;
  min-height: 0; /* Allow SVG to shrink with container */
}

/* SVG name/title - scales proportionally with card */
.card-name-svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* SVG stats - scales proportionally with card */
.card-stats-svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* SVG keywords - scales proportionally with card */
.card-keywords-svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* Image container: ~50% of card height */
.card-image-container {
  flex: 0 0 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  overflow: hidden;
  position: relative;
}

.card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card-image-placeholder {
  font-size: 24px;
  opacity: 0.6;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-footer {
  padding: 8px 10px;
  flex-shrink: 0;
  background: rgba(0, 0, 0, 0.3);
  border-top: 1px solid var(--border-subtle);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.card-footer .card-stats-row {
  display: flex;
  gap: 6px;
  justify-content: center;
  align-items: stretch;
}

.card-stat-box {
  flex: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 2px 4px;
  min-width: 0;
}

.card-stat-box .stat-emoji {
  font-size: 14px;
  line-height: 1;
}

.card-stat-box .stat-value {
  font-size: 14px;
  font-weight: 700;
  line-height: 1;
  color: #fff;
  text-shadow:
    -1px -1px 0 #000,
    1px -1px 0 #000,
    -1px 1px 0 #000,
    1px 1px 0 #000,
    -2px 0 0 #000,
    2px 0 0 #000,
    0 -2px 0 #000,
    0 2px 0 #000;
}

.card-text-area {
  font-size: 12px;
  line-height: 1.3;
  color: var(--text-secondary);
  text-align: center;
  white-space: pre-line;
  word-wrap: break-word;
  overflow-wrap: break-word;
  padding: 2px 6px;
}

.card-text-area strong {
  font-weight: 600;
  color: var(--text-primary);
}

.card-text-area u {
  text-decoration: underline;
  color: var(--text-primary);
}

/* Content area: ~42% of card height (stats + keywords + effect) */
.card-content-area {
  flex: 0 0 42%;
  display: flex;
  flex-direction: column;
  gap: 0;
  overflow: hidden;
  min-height: 0; /* Allow flex item to shrink below content size */
}

.card-content-area .card-stats-row {
  flex: 0 0 auto; /* Fixed height based on content */
  min-height: 20px;
  max-height: 24px;
}

.card-content-area .card-keywords {
  flex: 0 0 auto; /* Fixed height based on content */
  padding: 2px 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  /*min-height: 16px; taking this out so it doesn't unnecessarily take up space*/
}

.card-content-area .card-effect {
  flex: 1 1 auto; /* Effect takes ALL remaining space */
  overflow: hidden;
  padding: 2px 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  word-wrap: break-word;
  overflow-wrap: break-word;
  min-height: 0; /* Allow flex item to shrink below content size */
}

.card-actions {
  margin-top: auto;
  display: flex;
  gap: 6px;
}

.card-actions button {
  flex: 1;
  padding: 5px 6px;
  border-radius: 6px;
  font-size: 11px;
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
}

/* Disable CSS hover for hand cards - JS proximity detection handles this via .hand-focus class */
/* Keep base transform to prevent hover-induced movement */
.hand-grid .card:hover:not(.hand-focus) {
  transform: translateY(calc(10% + var(--card-offset-y, 0px))) scale(1) rotate(var(--card-rotation, 0deg));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
}

.card.card-selected {
  border: 3px solid var(--gold);
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.8), 0 6px 16px rgba(0, 0, 0, 0.35);
}

.card.back {
  display: grid;
  place-items: center;
  font-size: 12px;
  color: var(--text-muted);
}

.card-status {
  position: absolute;
  top: 6px;
  right: 6px;
  font-size: 12px;
}

.card-hit {
  animation: card-hit 0.4s ease-out;
}

.damage-pop {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: var(--font-display);
  font-size: 26px;
  color: #ff3b3b;
  text-shadow: 0 0 10px rgba(255, 59, 59, 0.75);
  animation: damage-pop 0.9s ease-out forwards;
  pointer-events: none;
  z-index: 3;
}

.attack-ghost {
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: none;
  filter: drop-shadow(0 12px 22px rgba(0, 0, 0, 0.45));
  z-index: 4;
}

.attack-ghost--slot {
  border-radius: var(--card-radius);
  background: rgba(255, 255, 255, 0.08);
  border: 1px dashed rgba(255, 255, 255, 0.2);
}

.impact-ring {
  position: absolute;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 2px solid rgba(255, 165, 120, 0.8);
  box-shadow: 0 0 18px rgba(255, 115, 80, 0.6);
  transform: translate(-50%, -50%);
  animation: impact-ring 0.5s ease-out forwards;
  pointer-events: none;
  z-index: 3;
}

@keyframes damage-pop {
  0% {
    transform: translate(-50%, -50%) scale(0.6);
    opacity: 0;
  }
  25% {
    transform: translate(-50%, -60%) scale(1.15);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -110%) scale(0.9);
    opacity: 0;
  }
}

@keyframes card-hit {
  0% {
    box-shadow: 0 0 0 rgba(255, 80, 80, 0.6);
  }
  50% {
    box-shadow: 0 0 22px rgba(255, 80, 80, 0.8);
  }
  100% {
    box-shadow: 0 0 0 rgba(255, 80, 80, 0);
  }
}

@keyframes impact-ring {
  0% {
    transform: translate(-50%, -50%) scale(0.4);
    opacity: 0.95;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.25);
    opacity: 0;
  }
}

/* Damage shake effect for effect-based damage */
.damage-shake {
  animation: damage-shake 0.5s ease-out;
}

@keyframes damage-shake {
  0%, 100% {
    transform: translateX(0);
    filter: brightness(1);
  }
  10%, 50%, 90% {
    transform: translateX(-4px);
    filter: brightness(0.8) saturate(1.2);
  }
  30%, 70% {
    transform: translateX(4px);
    filter: brightness(0.8) saturate(1.2);
  }
  25%, 75% {
    box-shadow: 0 0 15px rgba(255, 80, 80, 0.6);
  }
}

/* Player damage shake effect */
.player-damage-shake {
  animation: player-damage-shake 0.6s ease-out;
}

@keyframes player-damage-shake {
  0%, 100% {
    transform: translateX(0) scale(1);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-6px) scale(1.05);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(6px) scale(1.05);
  }
  15%, 45%, 75% {
    box-shadow: 0 0 20px rgba(255, 59, 59, 0.8), inset 0 0 10px rgba(255, 59, 59, 0.3);
  }
}

/* Player damage pop number */
.player-damage-pop {
  position: absolute;
  transform: translate(-50%, -50%);
  font-family: var(--font-display);
  font-size: 32px;
  font-weight: bold;
  color: #ff3b3b;
  text-shadow: 0 0 15px rgba(255, 59, 59, 0.9), 2px 2px 4px rgba(0, 0, 0, 0.5);
  animation: player-damage-pop 1s ease-out forwards;
  pointer-events: none;
  z-index: 1000;
}

@keyframes player-damage-pop {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
  20% {
    transform: translate(-50%, -50%) scale(1.3);
    opacity: 1;
  }
  40% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -80%) scale(1.1);
    opacity: 0;
  }
}

/* Heal glow effect */
.heal-glow {
  animation: heal-glow 0.6s ease-out;
}

@keyframes heal-glow {
  0% {
    box-shadow: 0 0 0 rgba(76, 217, 100, 0);
    filter: brightness(1);
  }
  40% {
    box-shadow: 0 0 25px rgba(76, 217, 100, 0.8), inset 0 0 10px rgba(76, 217, 100, 0.3);
    filter: brightness(1.15) saturate(1.1);
  }
  100% {
    box-shadow: 0 0 0 rgba(76, 217, 100, 0);
    filter: brightness(1);
  }
}

/* Heal pop number */
.heal-pop {
  position: absolute;
  transform: translate(-50%, -50%);
  font-family: var(--font-display);
  font-size: 26px;
  color: #4cd964;
  text-shadow: 0 0 10px rgba(76, 217, 100, 0.75);
  animation: heal-pop 0.9s ease-out forwards;
  pointer-events: none;
  z-index: 3;
}

@keyframes heal-pop {
  0% {
    transform: translate(-50%, -50%) scale(0.6);
    opacity: 0;
  }
  25% {
    transform: translate(-50%, -60%) scale(1.15);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -110%) scale(0.9);
    opacity: 0;
  }
}

/* ============================================================================
   CONSUMPTION EFFECTS
   ============================================================================ */

.consumption-ghost {
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: none;
  filter: drop-shadow(0 8px 16px rgba(39, 174, 96, 0.4));
  z-index: 4;
}

.consumption-ghost--slot {
  width: 60px;
  height: 80px;
  background: linear-gradient(135deg, rgba(39, 174, 96, 0.6), rgba(39, 174, 96, 0.3));
  border-radius: var(--card-radius);
  border: 2px solid rgba(39, 174, 96, 0.8);
}

.consumption-complete {
  animation: consumption-complete 0.4s ease-out;
}

@keyframes consumption-complete {
  0% {
    box-shadow: 0 0 0 rgba(39, 174, 96, 0);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 25px rgba(39, 174, 96, 0.8), inset 0 0 15px rgba(39, 174, 96, 0.3);
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 0 rgba(39, 174, 96, 0);
    transform: scale(1);
  }
}

.nutrition-pop {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: var(--font-display);
  font-size: 22px;
  color: #27ae60;
  text-shadow: 0 0 10px rgba(39, 174, 96, 0.8), 0 0 20px rgba(39, 174, 96, 0.5);
  animation: nutrition-pop 1s ease-out forwards;
  pointer-events: none;
  z-index: 5;
  white-space: nowrap;
}

@keyframes nutrition-pop {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
  20% {
    transform: translate(-50%, -60%) scale(1.2);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -120%) scale(1);
    opacity: 0;
  }
}

/* ============================================================================
   KEYWORD TRIGGER EFFECTS
   ============================================================================ */

.keyword-indicator {
  position: absolute;
  font-size: 72px; /* ~100% of typical card width for visibility */
  transform: translate(-50%, -50%);
  animation: keyword-indicator 0.8s ease-out forwards;
  pointer-events: none;
  z-index: 5;
}

@keyframes keyword-indicator {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
  }
  25% {
    transform: translate(-50%, -60%) scale(1.3);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -100%) scale(1);
    opacity: 0;
  }
}

/* Barrier - Blue shield shimmer */
.keyword-barrier {
  animation: keyword-barrier-glow 0.6s ease-out;
}

@keyframes keyword-barrier-glow {
  0% {
    box-shadow: 0 0 0 rgba(79, 195, 247, 0), inset 0 0 0 rgba(79, 195, 247, 0);
  }
  30% {
    box-shadow: 0 0 30px rgba(79, 195, 247, 0.8), inset 0 0 20px rgba(79, 195, 247, 0.4);
  }
  100% {
    box-shadow: 0 0 0 rgba(79, 195, 247, 0), inset 0 0 0 rgba(79, 195, 247, 0);
  }
}

/* Ambush - Orange flash */
.keyword-ambush {
  animation: keyword-ambush-flash 0.5s ease-out;
}

@keyframes keyword-ambush-flash {
  0% {
    box-shadow: 0 0 0 rgba(255, 112, 67, 0);
    filter: brightness(1);
  }
  40% {
    box-shadow: 0 0 25px rgba(255, 112, 67, 0.9);
    filter: brightness(1.3);
  }
  100% {
    box-shadow: 0 0 0 rgba(255, 112, 67, 0);
    filter: brightness(1);
  }
}

/* Toxic - Green poison glow */
.keyword-toxic {
  animation: keyword-toxic-glow 0.6s ease-out;
}

@keyframes keyword-toxic-glow {
  0% {
    box-shadow: 0 0 0 rgba(118, 255, 3, 0);
  }
  30% {
    box-shadow: 0 0 30px rgba(118, 255, 3, 0.8), 0 0 50px rgba(118, 255, 3, 0.4);
  }
  100% {
    box-shadow: 0 0 0 rgba(118, 255, 3, 0);
  }
}

/* Neurotoxic - Ice blue freeze effect */
.keyword-neurotoxic {
  animation: keyword-neurotoxic-freeze 0.7s ease-out;
}

@keyframes keyword-neurotoxic-freeze {
  0% {
    box-shadow: 0 0 0 rgba(128, 222, 234, 0);
    filter: hue-rotate(0deg);
  }
  40% {
    box-shadow: 0 0 35px rgba(128, 222, 234, 0.9), inset 0 0 20px rgba(128, 222, 234, 0.5);
    filter: hue-rotate(-20deg);
  }
  100% {
    box-shadow: 0 0 0 rgba(128, 222, 234, 0);
    filter: hue-rotate(0deg);
  }
}

/* Scavenge - Brown earthy glow */
.keyword-scavenge {
  animation: keyword-scavenge-glow 0.5s ease-out;
}

@keyframes keyword-scavenge-glow {
  0% {
    box-shadow: 0 0 0 rgba(161, 136, 127, 0);
  }
  50% {
    box-shadow: 0 0 25px rgba(161, 136, 127, 0.8);
  }
  100% {
    box-shadow: 0 0 0 rgba(161, 136, 127, 0);
  }
}

/* Haste - Yellow lightning flash */
.keyword-haste {
  animation: keyword-haste-flash 0.4s ease-out;
}

@keyframes keyword-haste-flash {
  0% {
    box-shadow: 0 0 0 rgba(255, 235, 59, 0);
    filter: brightness(1);
  }
  30% {
    box-shadow: 0 0 30px rgba(255, 235, 59, 0.9);
    filter: brightness(1.4);
  }
  100% {
    box-shadow: 0 0 0 rgba(255, 235, 59, 0);
    filter: brightness(1);
  }
}

/* Lure - Pink attractive glow */
.keyword-lure {
  animation: keyword-lure-glow 0.5s ease-out;
}

@keyframes keyword-lure-glow {
  0% {
    box-shadow: 0 0 0 rgba(240, 98, 146, 0);
  }
  50% {
    box-shadow: 0 0 25px rgba(240, 98, 146, 0.8), 0 0 40px rgba(240, 98, 146, 0.4);
  }
  100% {
    box-shadow: 0 0 0 rgba(240, 98, 146, 0);
  }
}

/* Generic keyword trigger fallback */
.keyword-trigger-generic {
  animation: keyword-generic-pulse 0.5s ease-out;
}

@keyframes keyword-generic-pulse {
  0% {
    box-shadow: 0 0 0 rgba(212, 168, 83, 0);
  }
  50% {
    box-shadow: 0 0 20px rgba(212, 168, 83, 0.7);
  }
  100% {
    box-shadow: 0 0 0 rgba(212, 168, 83, 0);
  }
}

/* Ability Cancel - Red cancel effect for ability removal (e.g., Riptide) */
.ability-cancel {
  animation: ability-cancel-flash 0.6s ease-out;
}

@keyframes ability-cancel-flash {
  0% {
    box-shadow: 0 0 0 rgba(231, 76, 60, 0);
    filter: brightness(1);
  }
  30% {
    box-shadow: 0 0 30px rgba(231, 76, 60, 0.8), 0 0 50px rgba(231, 76, 60, 0.4);
    filter: brightness(0.8) saturate(0.5);
  }
  100% {
    box-shadow: 0 0 0 rgba(231, 76, 60, 0);
    filter: brightness(1);
  }
}

/* Cancel emoji indicator that pops up */
.ability-cancel-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  animation: ability-cancel-pop 0.8s ease-out forwards;
  pointer-events: none;
  z-index: 1000;
  text-shadow: 0 0 10px rgba(231, 76, 60, 0.8), 0 0 20px rgba(231, 76, 60, 0.5);
}

@keyframes ability-cancel-pop {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3);
  }
  30% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.3);
  }
  60% {
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1) translateY(-30px);
  }
}

/* ============================================================================
   TURN PULSE - Playable cards glow
   ============================================================================ */

.card.playable-pulse {
  animation: playable-pulse 2s ease-in-out infinite;
}

@keyframes playable-pulse {
  0%, 100% {
    box-shadow: 0 0 0 rgba(212, 168, 83, 0.3);
  }
  50% {
    box-shadow: 0 0 15px rgba(212, 168, 83, 0.6), 0 0 25px rgba(212, 168, 83, 0.3);
  }
}

/* Different pulse for creatures that can attack */
.card.can-attack-pulse {
  animation: can-attack-pulse 1.5s ease-in-out infinite;
}

@keyframes can-attack-pulse {
  0%, 100% {
    box-shadow: 0 0 0 rgba(231, 76, 60, 0.3);
  }
  50% {
    box-shadow: 0 0 12px rgba(231, 76, 60, 0.6), 0 0 20px rgba(231, 76, 60, 0.3);
  }
}

.overlay {
  position: fixed;
  inset: 0;
  background: var(--bg-overlay);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-medium);
  z-index: 20;
  padding: 24px;
}

.overlay.active {
  opacity: 1;
  pointer-events: auto;
}

.overlay.fading-out {
  opacity: 0;
  transition: opacity 1s ease-out;
  pointer-events: none;
}

.overlay-content {
  background: var(--bg-card);
  border: 1px solid var(--border-gold);
  border-radius: 18px;
  padding: 20px;
  width: min(1200px, 100%);
  max-height: 90vh;
  overflow: hidden;
  transform: scale(0.96);
  transition: transform var(--transition-medium);
}

.overlay.active .overlay-content {
  transform: scale(1);
}

.menu-card {
  width: min(520px, 100%);
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.menu-header {
  display: flex;
  gap: 16px;
  align-items: center;
}

.menu-icon {
  font-size: 32px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  padding: 10px 14px;
  border: 1px solid var(--border-subtle);
}

.menu-status {
  font-size: 14px;
  color: var(--text-secondary);
  background: rgba(255, 255, 255, 0.04);
  border-radius: 12px;
  padding: 12px 14px;
  border: 1px solid var(--border-subtle);
}

.menu-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.tutorial-card {
  width: 100%;
  height: 100%;
  max-height: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 24px;
}

.tutorial-overlay {
  padding: 0;
}

.tutorial-overlay .overlay-content {
  width: 100%;
  height: 100%;
  max-height: 100%;
}

.tutorial-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
}

.tutorial-header h2 {
  margin: 6px 0 4px;
  font-family: var(--font-display);
  letter-spacing: 0.04em;
}

.tutorial-eyebrow {
  text-transform: uppercase;
  font-size: 12px;
  letter-spacing: 0.2em;
  color: var(--text-muted);
  margin: 0;
}

.tutorial-scroll {
  flex: 1;
  overflow-y: auto;
  padding-right: 12px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.tutorial-section {
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--border-subtle);
  border-radius: 16px;
  padding: 18px;
}

.tutorial-section h3 {
  margin-top: 0;
  font-size: 20px;
}

.tutorial-diagram {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
}

.focus-diagram .focus-card {
  flex: 1;
  min-width: 180px;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 14px;
  padding: 16px;
  border: 1px solid var(--border-subtle);
}

.focus-card-title {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--text-muted);
}

.focus-card-value {
  font-size: 22px;
  font-weight: 600;
  margin: 8px 0;
}

.focus-card-caption {
  font-size: 13px;
  color: var(--text-secondary);
}

.focus-arrow {
  font-size: 20px;
  color: var(--text-muted);
}

.card-anatomy .stat-card {
  background: rgba(12, 14, 20, 0.7);
  border-radius: 16px;
  padding: 16px;
  border: 1px solid var(--border-subtle);
  min-width: 180px;
}

.stat-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  font-size: 14px;
}

.stat-label {
  color: var(--text-muted);
}

.stat-value {
  font-weight: 700;
  color: #f9d77e;
}

.stat-footer {
  margin-top: 8px;
  font-size: 12px;
  color: var(--text-secondary);
}

.stat-explain {
  flex: 1;
  min-width: 200px;
  font-size: 14px;
  color: var(--text-secondary);
}

.stat-pulse {
  position: relative;
}

.stat-pulse::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: 12px;
  border: 1px solid rgba(249, 215, 126, 0.6);
  box-shadow: 0 0 12px rgba(249, 215, 126, 0.6);
  animation: statPulse 2.4s ease-in-out infinite;
}

@keyframes statPulse {
  0%,
  100% {
    opacity: 0.3;
    transform: scale(0.98);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.02);
  }
}

.zone-diagram .zone-block,
.spell-diagram .spell-card {
  flex: 1;
  min-width: 180px;
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 14px;
}

.turn-flow {
  flex-wrap: nowrap;
  overflow-x: auto;
  padding-bottom: 8px;
}

.flow-step {
  background: rgba(0, 0, 0, 0.35);
  border-radius: 999px;
  padding: 10px 14px;
  border: 1px solid var(--border-subtle);
  white-space: nowrap;
  font-size: 13px;
}

.flow-arrow {
  color: var(--text-muted);
  font-size: 18px;
}

.tutorial-note {
  margin-top: 10px;
  font-size: 13px;
  color: var(--text-secondary);
}

.combat-diagram {
  flex-direction: column;
  align-items: stretch;
}

.combat-card {
  background: rgba(0, 0, 0, 0.4);
  border-radius: 12px;
  padding: 12px 14px;
  border: 1px solid var(--border-subtle);
}

.combat-connector {
  text-align: center;
  font-size: 22px;
}

.combat-result {
  font-size: 13px;
  color: var(--text-secondary);
}

.consume-diagram {
  flex-wrap: wrap;
}

.consume-prey,
.consume-predator {
  background: rgba(0, 0, 0, 0.35);
  border-radius: 12px;
  padding: 12px 14px;
  border: 1px solid var(--border-subtle);
}

.consume-predator {
  background: rgba(76, 29, 149, 0.35);
  border-color: rgba(240, 208, 120, 0.4);
}

.tutorial-list {
  margin: 0;
  padding-left: 20px;
  color: var(--text-secondary);
}

.tutorial-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  font-size: 13px;
  color: var(--text-secondary);
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 12px 16px;
  font-weight: 600;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.btn-primary:hover:not(:disabled),
.btn-secondary:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.3);
}

.menu-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.multiplayer-overlay .menu-form {
  display: none;
}

.multiplayer-overlay .menu-form.active {
  display: flex;
}

.menu-label {
  font-size: 13px;
  color: var(--text-secondary);
}

.menu-input {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 10px 12px;
  color: var(--text-primary);
}

.menu-input:focus {
  outline: 2px solid rgba(240, 208, 120, 0.5);
  outline-offset: 2px;
}

.menu-error {
  min-height: 20px;
  font-size: 13px;
  color: #f87171;
}

.lobby-code {
  font-family: var(--font-display);
  font-size: 28px;
  letter-spacing: 0.2em;
  text-align: center;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid var(--border-subtle);
  background: rgba(255, 255, 255, 0.06);
}

/* ============================================================================
   AI SETUP OVERLAY
   ============================================================================ */

.ai-setup-overlay .menu-card {
  max-width: 480px;
}

.ai-setup-section {
  margin-bottom: 20px;
}

/* AI Difficulty Selector */
.ai-difficulty-section {
  margin-bottom: 16px;
}

.ai-difficulty-label {
  display: block;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.ai-difficulty-options {
  display: flex;
  gap: 8px;
}

.btn-difficulty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 10px 12px;
  border-radius: 8px;
  border: 2px solid var(--border-subtle);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.btn-difficulty:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
  color: var(--text-primary);
}

.btn-difficulty.active {
  background: rgba(212, 168, 83, 0.15);
  border-color: var(--accent-gold);
  color: var(--text-primary);
}

.difficulty-name {
  font-size: 13px;
  font-weight: 500;
}

.difficulty-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  font-size: 8px;
  font-weight: 700;
  padding: 2px 4px;
  border-radius: 4px;
  background: var(--accent-gold);
  color: var(--bg-card);
  letter-spacing: 0.03em;
}

.ai-deck-options {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
}

.btn-deck-option {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  border-radius: 12px;
  border: 2px solid var(--border-subtle);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.btn-deck-option:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.deck-option-icon {
  font-size: 22px;
}

.deck-option-name {
  font-size: 14px;
}

.ai-saved-decks {
  margin-top: 12px;
}

.menu-select {
  width: 100%;
  padding: 12px 16px;
  border-radius: 10px;
  border: 1px solid var(--border-subtle);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-primary);
  font-family: var(--font-body);
  font-size: 14px;
  cursor: pointer;
}

.menu-select:focus {
  outline: none;
  border-color: var(--gold);
}

.menu-select option {
  background: var(--bg-card);
  color: var(--text-primary);
}

/* ============================================================================
   AI VS AI DECK PICKER
   ============================================================================ */

.ai-vs-ai-deck-overlay .menu-card {
  max-width: 800px;
  width: 90vw;
}

.ai-vs-ai-deck-picker {
  display: flex;
  gap: 20px;
  align-items: flex-start;
  justify-content: center;
  margin: 20px 0;
}

.ai-vs-ai-side {
  flex: 1;
  max-width: 300px;
}

.ai-vs-ai-side h3 {
  font-family: var(--font-display);
  font-size: 14px;
  letter-spacing: 0.05em;
  text-align: center;
  margin: 0 0 12px;
  color: var(--text-secondary);
}

.ai-vs-ai-divider {
  font-family: var(--font-display);
  font-size: 24px;
  color: var(--gold);
  padding: 60px 10px;
  letter-spacing: 0.1em;
}

.ai-vs-ai-deck-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.ai-vs-ai-deck-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  border-radius: 10px;
  border: 2px solid var(--border-subtle);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
  width: 100%;
  text-align: left;
}

.ai-vs-ai-deck-btn:hover:not(.selected) {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.ai-vs-ai-deck-btn.selected {
  background: rgba(74, 222, 128, 0.15);
  border-color: #4ade80;
  position: relative;
}

.ai-vs-ai-deck-btn.selected::after {
  content: '';
  position: absolute;
  right: 12px;
  color: #4ade80;
  font-size: 18px;
  font-weight: bold;
}

.ai-vs-ai-deck-btn .deck-emoji {
  font-size: 20px;
}

.ai-vs-ai-deck-btn .deck-name {
  font-size: 14px;
  flex: 1;
}

.ai-vs-ai-deck-btn.experimental {
  position: relative;
}

.ai-vs-ai-deck-btn .deck-experimental-badge {
  position: static;
  font-size: 9px;
  padding: 2px 6px;
  margin-left: auto;
}

/* Bug log styling */
.log-entry.log-bug {
  color: #ff4444;
  text-shadow: 0 0 8px rgba(255, 0, 0, 0.6), 0 0 16px rgba(255, 0, 0, 0.4);
  font-weight: bold;
  animation: bug-pulse 2s ease-in-out infinite;
}

@keyframes bug-pulse {
  0%, 100% {
    text-shadow: 0 0 8px rgba(255, 0, 0, 0.6), 0 0 16px rgba(255, 0, 0, 0.4);
  }
  50% {
    text-shadow: 0 0 12px rgba(255, 0, 0, 0.8), 0 0 24px rgba(255, 0, 0, 0.6);
  }
}

/* AI thinking indicator */
.log-entry.log-ai-thinking {
  color: #8b5cf6;
  font-style: italic;
  border-left-color: #8b5cf6;
}

/* AI strategic thoughts (threat detection, lethal awareness) */
.log-entry.log-ai-strategic {
  color: #f59e0b;
  font-weight: 500;
  border-left-color: #f59e0b;
}

/* AI decision (card played, attack made) */
.log-entry.log-ai-decision {
  color: #10b981;
  font-weight: 600;
  border-left-color: #10b981;
}

/* AI danger warning */
.log-entry.log-ai-danger {
  color: #ef4444;
  font-weight: 600;
  border-left-color: #ef4444;
  animation: ai-danger-pulse 1s ease-in-out;
}

@keyframes ai-danger-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* AI lethal detected */
.log-entry.log-ai-lethal {
  color: #22c55e;
  font-weight: 700;
  text-shadow: 0 0 8px rgba(34, 197, 94, 0.5);
  border-left-color: #22c55e;
}

.deck-select-card {
  display: flex;
  flex-direction: column;
  gap: 20px;
  height: 100%;
}

.deck-select-header {
  display: flex;
  gap: 16px;
  align-items: center;
}

.deck-select-icon {
  font-size: 32px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 14px;
  padding: 10px 14px;
  border: 1px solid var(--border-subtle);
}

.deck-select-header h2 {
  font-family: var(--font-display);
  letter-spacing: 0.05em;
  margin: 0 0 6px;
}

.deck-select-header p {
  margin: 0;
  color: var(--text-secondary);
}

.deck-select-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 16px;
  overflow-y: auto;
  padding-right: 6px;
}

.deck-select-panel {
  border-radius: 16px;
  padding: 16px;
  border: 1px solid transparent;
  min-height: 140px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  text-align: left;
  color: #f4f4f4;
  background: rgba(255, 255, 255, 0.06);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.deck-select-panel .deck-emoji {
  font-size: 28px;
}

.deck-select-panel .deck-name {
  font-size: 18px;
  font-weight: 600;
}

.deck-select-panel .deck-status {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.85);
}

.deck-select-panel .deck-meta {
  margin-top: auto;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.deck-select-panel:hover:not(.disabled),
.deck-select-panel:focus-visible:not(.disabled) {
  transform: translateY(-2px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
  border-color: rgba(255, 255, 255, 0.4);
}

.deck-select-panel.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  border-style: dashed;
}

.deck-select-panel--fish {
  background: linear-gradient(135deg, rgba(54, 108, 180, 0.9), rgba(18, 40, 72, 0.95));
}

.deck-select-panel--bird {
  background: linear-gradient(135deg, rgba(200, 160, 40, 0.85), rgba(83, 52, 12, 0.95));
}

.deck-select-panel--mammal {
  background: linear-gradient(135deg, rgba(140, 92, 68, 0.85), rgba(60, 36, 24, 0.95));
}

.deck-select-panel--reptile {
  background: linear-gradient(135deg, rgba(60, 142, 74, 0.85), rgba(22, 66, 35, 0.95));
}

.deck-select-panel--amphibian {
  background: linear-gradient(135deg, rgba(92, 180, 116, 0.85), rgba(26, 92, 54, 0.95));
}

.deck-select-panel--canine {
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.85), rgba(70, 40, 10, 0.95));
}

.deck-select-panel--arachnid {
  background: linear-gradient(135deg, rgba(48, 48, 48, 0.85), rgba(20, 20, 20, 0.95));
}

/* Experimental deck badge */
.deck-experimental-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  background: linear-gradient(135deg, #ff6b35, #f7931e);
  color: #fff;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 8px;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  z-index: 1;
}

.deck-select-panel.experimental {
  position: relative;
}

.deck-builder {
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow: hidden;
}

/* Hearthstone-style 75/25 layout */
.deck-builder-layout {
  display: flex;
  flex: 1;
  gap: 16px;
  min-height: 0;
  overflow: hidden;
}

.deck-builder-main {
  flex: 3;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-width: 0;
  overflow: hidden;
}

.deck-builder-sidebar {
  flex: 1;
  max-width: 280px;
  min-width: 220px;
  display: flex;
  flex-direction: column;
  background: linear-gradient(180deg, rgba(20, 25, 35, 0.95), rgba(15, 20, 28, 0.98));
  border: 2px solid var(--border-subtle);
  border-radius: 12px;
  overflow: hidden;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.deck-builder-sidebar.drag-active {
  border-color: var(--gold);
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.3), inset 0 0 30px rgba(212, 168, 83, 0.1);
}

.deck-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(212, 168, 83, 0.15), rgba(212, 168, 83, 0.05));
  border-bottom: 1px solid var(--border-gold);
}

.deck-list-title {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 600;
  color: var(--gold-light);
  letter-spacing: 0.05em;
}

.deck-list-count {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
}

.deck-list-count.complete {
  color: #4caf50;
}

.deck-list-cards {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 0;
}

/* Individual deck list card row - Hearthstone-style with art background */
.deck-list-row {
  position: relative;
  display: flex;
  align-items: center;
  height: 36px;
  padding: 0 10px;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
  background-size: cover;
  background-position: center 30%;
  border-radius: 4px;
  margin: 2px 6px;
  overflow: hidden;
}

/* Dark gradient overlay for text readability */
.deck-list-row::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.4) 50%, rgba(0, 0, 0, 0.2) 100%);
  z-index: 1;
}

.deck-list-row:hover {
  transform: scale(1.02);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

.deck-list-row.drag-over {
  box-shadow: 0 0 8px var(--gold);
}

/* Color banner at top of row */
.deck-list-row-banner {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  z-index: 2;
}

.deck-list-row-name {
  position: relative;
  z-index: 2;
  font-size: 13px;
  font-weight: 600;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Color-coded top banner by card type */
.deck-list-row[data-type="Prey"] .deck-list-row-banner {
  background: var(--type-prey);
}

.deck-list-row[data-type="Predator"] .deck-list-row-banner {
  background: var(--type-predator);
}

.deck-list-row[data-type="Spell"] .deck-list-row-banner {
  background: var(--type-spell);
}

.deck-list-row[data-type="Free Spell"] .deck-list-row-banner {
  background: var(--type-free-spell);
}

.deck-list-row[data-type="Trap"] .deck-list-row-banner {
  background: var(--type-trap);
}

/* Drop zone indicator when dragging */
.deck-list-cards.drag-active {
  background: rgba(212, 168, 83, 0.05);
}

.deck-list-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 24px;
  color: var(--text-secondary);
  text-align: center;
  font-size: 13px;
}

.deck-list-empty-icon {
  font-size: 32px;
  margin-bottom: 8px;
  opacity: 0.5;
}

/* Dragging states for deck cards */
.deck-card.dragging {
  opacity: 0.5;
  transform: scale(0.95);
}

.deck-list-row.dragging {
  opacity: 0.5;
  transform: scale(0.98);
}

/* Cursor hint for deck cards */
.deck-grid .deck-card {
  cursor: pointer;
}

.deck-grid .deck-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
}

.deck-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-shrink: 0;
}

.deck-header h2 {
  font-family: var(--font-display);
  letter-spacing: 0.05em;
}

.deck-status {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 12px;
  color: var(--text-secondary);
}

.deck-status-item.invalid {
  color: var(--hp-red);
}

.deck-status-success {
  color: #4caf50;
  font-weight: 600;
  padding: 4px 8px;
  background: rgba(76, 175, 80, 0.15);
  border-radius: 4px;
  margin-top: 4px;
}

.deck-status-error {
  color: var(--hp-red);
  font-weight: 600;
  padding: 4px 8px;
  background: rgba(244, 67, 54, 0.15);
  border-radius: 4px;
  margin-top: 4px;
}

.deck-name-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.deck-name-row label {
  font-weight: 600;
  white-space: nowrap;
}

.deck-name-input {
  flex: 1;
  padding: 4px 8px;
  font-size: 14px;
  font-family: inherit;
  border: 1px solid var(--border-subtle);
  border-radius: 4px;
  background: var(--bg-primary);
  color: var(--text-primary);
  max-width: 200px;
}

.deck-name-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

/* Deck Filter Input */
.deck-filter-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.deck-filter-input {
  flex: 1;
  padding: 8px 12px;
  font-size: 14px;
  font-family: inherit;
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  background: var(--bg-primary);
  color: var(--text-primary);
}

.deck-filter-input::placeholder {
  color: var(--text-secondary);
  opacity: 0.7;
}

.deck-filter-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.deck-filter-clear {
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  background: var(--bg-card);
  color: var(--text-secondary);
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.deck-filter-clear:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
  border-color: var(--primary);
}

.deck-filter-clear.hidden {
  display: none;
}

.deck-tabs {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.deck-tab {
  flex: 1;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid var(--border-subtle);
  background: var(--bg-card);
  color: var(--text-secondary);
}

.deck-tab.active {
  color: var(--gold-light);
  border-color: var(--border-gold);
}

.deck-tab.hidden {
  display: none;
}

.deck-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

.deck-panel {
  display: none;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.deck-panel.active {
  display: flex;
}

.deck-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  grid-auto-rows: min-content;
  gap: 12px;
  flex: 1;
  overflow: auto;
  padding: 4px;
  padding-right: 8px;
  align-content: start;
}

/* Hide drawer toggle and backdrop on desktop (will be overridden by mobile media query) */
.deck-drawer-toggle {
  display: none;
}

.deck-drawer-backdrop {
  display: none;
}

/* Mobile deck builder - 2 column grid with properly sized cards */
@media (max-width: 768px) {
  .deck-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    padding: 4px;
    align-items: start;
  }

  .deck-grid .card {
    width: 100%;
    /* min-height as fallback for browsers where aspect-ratio doesn't work in grid context */
    min-height: 200px;
    aspect-ratio: 5 / 7;
  }

  /* Mobile drawer sidebar */
  .deck-builder-layout {
    position: relative;
  }

  .deck-builder-main {
    flex: 1;
    width: 100%;
  }

  .deck-builder-sidebar {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 260px;
    max-width: 80vw;
    min-width: unset;
    flex: none;
    z-index: 1000;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    border-radius: 12px 0 0 12px;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.5);
  }

  .deck-builder-sidebar.drawer-open {
    transform: translateX(0);
  }

  /* Drawer backdrop */
  .deck-drawer-backdrop {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
  }

  .deck-drawer-backdrop.visible {
    display: block;
  }

  /* Floating toggle button for mobile drawer */
  .deck-drawer-toggle {
    display: flex;
    position: fixed;
    bottom: 100px;
    right: 12px;
    z-index: 998;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--gold), var(--gold-dark));
    border: 2px solid var(--gold-light);
    color: var(--bg-primary);
    font-size: 14px;
    font-weight: 700;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .deck-drawer-toggle:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5);
  }

  .deck-drawer-toggle:active {
    transform: scale(0.95);
  }
}

.deck-card {
  cursor: pointer;
}

.deck-card.highlighted {
  border-color: var(--gold);
  box-shadow: 0 0 12px rgba(212, 168, 83, 0.6);
}

.deck-card.selected::after {
  content: "Selected";
  position: absolute;
  bottom: 6px;
  right: 6px;
  background: rgba(0, 0, 0, 0.5);
  padding: 2px 6px;
  font-size: 10px;
  border-radius: 6px;
}

/* Old inspector - hidden, replaced by click-to-expand overlay */
.deck-inspector {
  display: none;
}

.deck-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  flex-shrink: 0;
  padding-top: 8px;
}

.deck-actions button {
  flex: 1;
  min-width: 100px;
}

.deck-exit {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 600;
  color: var(--text-secondary);
}

.deck-save {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.deck-save.hidden {
  display: none;
}

.deck-load {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.deck-load.hidden {
  display: none;
}

.deck-load-list,
.deck-manage-list {
  display: grid;
  gap: 12px;
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding-right: 4px;
}

.deck-slot {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.deck-slot-header {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-weight: 600;
}

.deck-slot-meta {
  font-size: 12px;
  color: var(--text-secondary);
}

.deck-slot-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.deck-slot-actions button {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid var(--border-subtle);
  background: var(--bg-card-hover);
  font-size: 12px;
  color: var(--text-secondary);
}

.deck-slot-actions button.primary {
  color: var(--text-primary);
  border-color: var(--border-gold);
}

.deck-slot-actions button.danger {
  color: var(--hp-red);
  border-color: rgba(255, 89, 89, 0.6);
}

/* ============================================================================
   DECK CATALOG HOME SCREEN
   Card-based layout for deck management
   ============================================================================ */

.deck-catalog-home {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: flex-start;
  gap: 20px;
  width: 100%;
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
}

.deck-catalog-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 24px 16px;
  min-height: 180px;
  width: 180px;
  flex: 0 0 180px;
  background: var(--bg-card);
  border: 2px solid var(--border-subtle);
  border-radius: 16px;
  transition: all 0.2s ease;
  text-align: center;
}

.deck-catalog-card:hover {
  border-color: var(--border-gold);
  background: var(--bg-card-hover);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.deck-catalog-card--view-all {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
  border-color: rgba(59, 130, 246, 0.4);
}

.deck-catalog-card--view-all:hover {
  border-color: rgba(59, 130, 246, 0.8);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2));
}

.deck-catalog-card--filled {
  border-color: var(--border-gold);
}

.deck-catalog-card--empty {
  border-style: dashed;
  opacity: 0.7;
}

.deck-catalog-card--empty:hover {
  opacity: 1;
}

.deck-catalog-card__icon {
  font-size: 48px;
  line-height: 1;
}

.deck-catalog-card__title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.deck-catalog-card__subtitle {
  font-size: 12px;
  color: var(--text-secondary);
}

.deck-catalog-card__actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.deck-catalog-card__btn {
  padding: 8px 12px;
  font-size: 18px;
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.deck-catalog-card__btn:hover {
  transform: scale(1.1);
}

.deck-catalog-card__btn--edit:hover {
  border-color: var(--border-gold);
  background: rgba(255, 215, 0, 0.1);
}

.deck-catalog-card__btn--delete:hover {
  border-color: var(--hp-red);
  background: rgba(255, 89, 89, 0.1);
}

.deck-catalog-back-container {
  flex: 0 0 100%;
  display: flex;
  justify-content: center;
  padding-top: 16px;
}

.deck-catalog-back-btn {
  padding: 12px 32px;
  font-size: 14px;
  font-weight: 600;
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.deck-catalog-back-btn:hover {
  color: var(--text-primary);
  border-color: var(--border-gold);
  background: var(--bg-card-hover);
}

.deck-select-back-btn {
  padding: 10px 20px;
  font-size: 14px;
  font-weight: 500;
  background: transparent;
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
  margin-bottom: 8px;
}

.deck-select-back-btn:hover {
  color: var(--text-primary);
  border-color: var(--border-gold);
}

.deck-actions .btn-primary {
  flex: 1;
}

.deck-random {
  flex: 0 0 25%;
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 10px 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-secondary);
}

.deck-random:hover {
  color: var(--gold-light);
  border-color: var(--border-gold);
}

.btn-primary {
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: #2e2211;
  border-radius: 10px;
  padding: 10px 16px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.setup-card,
.pass-card {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
  text-align: center;
}

.setup-icon,
.pass-icon {
  font-size: 32px;
}

.setup-rolls {
  display: flex;
  flex-direction: column;
  gap: 8px;
  font-size: 14px;
}

.setup-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
}

.setup-button-row {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.setup-actions button {
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 8px 12px;
}

/* Reaction Overlay (trap/discard decisions) */
.reaction-card {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
  text-align: center;
  width: min(360px, 90%);
}

.reaction-icon {
  font-size: 32px;
}

.reaction-timer {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 24px;
  font-weight: bold;
  color: var(--text-muted);
}

.reaction-timer.urgent {
  color: var(--text-danger, #e74c3c);
  animation: pulse-urgent 0.5s ease-in-out infinite;
}

@keyframes pulse-urgent {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.reaction-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
}

.reaction-actions button {
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 12px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}

.reaction-actions button:hover:not(:disabled) {
  background: var(--bg-card-selected, var(--bg-card-hover));
  border-color: var(--border-gold);
}

.reaction-actions button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.reaction-actions button.primary {
  background: var(--bg-accent, #2ecc71);
  border-color: var(--border-accent, #27ae60);
  color: white;
}

.reaction-actions button.secondary {
  background: transparent;
}

/* Extreme zoom / very small viewports */
@media (max-height: 500px) {
  .game-container {
    min-height: 500px; /* Force minimum height */
    overflow: hidden; /* Never scroll - let content clip at edges */
  }

  .battlefield-layout {
    grid-template-rows: minmax(120px, 2.33fr) minmax(80px, 1fr); /* 70/30 ratio, ensure player field stays visible */
    min-height: 200px; /* Reduced but still visible */
  }

  .battlefield-center-column {
    gap: clamp(6px, 1vw, 12px); /* Tighter gap at extreme zoom */
    overflow-x: visible;
  }

  .field-slot {
    min-height: 10vh;
  }

  .card-inspector-panel,
  .game-log-panel {
    min-height: 120px; /* Reduce minimum heights */
  }

  .piles-section {
    min-height: 60px; /* Compact piles */
  }
}

/* Mobile portrait mode - tab-based layout */
@media (max-width: 767px) and (orientation: portrait) {
  /* Compact top bar for mobile portrait */
  .top-bar {
    padding: 8px 10px;
    gap: 6px;
  }

  .player-badge {
    padding: 4px 8px;
    gap: 6px;
  }

  .player-info {
    flex-direction: column;
    align-items: flex-start;
    gap: 2px;
  }

  .player-info.right {
    flex-direction: column;
    align-items: flex-end;
    position: relative;
  }

  /* Position AI speed toggle to left of name on mobile */
  .player-info.right .ai-speed-toggle {
    position: absolute;
    left: -20px;
    top: 0;
    margin: 0;
    font-size: 14px;
  }

  .player-name {
    font-size: 12px;
  }

  .player-stats {
    font-size: 11px;
    gap: 4px;
  }

  .turn-badge {
    padding: 4px 10px;
    min-width: 70px;
  }

  .turn-number {
    font-size: 12px;
  }

  .phase-label {
    font-size: 10px;
  }

  /* Hide surrender button on mobile - tap player name instead */
  .surrender-btn {
    display: none;
  }

  /* Mobile field divider layout - prevent overlap with nav buttons */
 .field-divider { /* mobile */
    padding-left: 48px; /* Space for left nav button */
    padding-right: 48px; /* Space for right nav button */
    justify-content: flex-start; /* Left-align content */
  }

  .field-divider-text {
    text-align: left;
    flex-shrink: 1;
    margin-right: auto; /* Push controls to the right */
  }

  .field-controls {
    position: relative; /* Remove absolute positioning on mobile */
    right: auto;
    top: auto;
    transform: none;
    flex-shrink: 0;
  }

  /* Hide field buttons on mobile - tap player name instead for surrender */
  .field-surrender-btn,
  .field-resync-btn {
    display: none;
  }

  /* Mobile scoreboard: prevent opponent hand from pushing player names off-screen */
  .scoreboard-row {
    overflow: visible; /* Allow cards to overflow visually */
  }

  .scoreboard-left,
  .scoreboard-right {
    flex-shrink: 0; /* Don't shrink player info */
    z-index: 10; /* Above opponent hand cards */
    position: relative; /* Enable z-index */
  }

  .scoreboard-center {
    flex: 1 1 0; /* Can shrink to 0 width */
    min-width: 0; /* Allow shrinking below content size */
    overflow: visible; /* Cards can overflow visually */
    position: relative;
  }

  .opponent-hand-cards {
    position: absolute; /* Take out of flow so it doesn't expand parent */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 1; /* Below player names/badges */
  }

  .emote-toggle {
    width: 28px;
    height: 28px;
  }

  .emote-toggle-left {
    margin-left: 4px;
  }

  .emote-toggle-right {
    margin-right: 4px;
  }

  .emote-toggle-icon {
    font-size: 0.9rem;
  }

  .battlefield-layout-three-column {
    grid-template-columns: 1fr;
    overflow: hidden;
    position: relative;
  }

  .battlefield-left-column,
  .battlefield-right-column {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-dark);
    z-index: 200; /* Above everything including hand panel */
    overflow-y: auto;
    padding: 12px;
  }

  .battlefield-layout-three-column.show-inspector .battlefield-left-column {
    display: flex;
    flex-direction: column;
  }

  .battlefield-layout-three-column.show-history .battlefield-right-column {
    display: flex;
    flex-direction: column;
  }

  .battlefield-center-column {
    width: 100%;
    overflow-y: visible; /* Allow hand cards to extend upward */
  }

  .battlefield-layout {
    grid-template-rows: auto minmax(0, 0.9fr) auto; /* Slightly less field space to give room to hand */
    min-height: 0;
  }

  .mobile-nav-left,
  .mobile-nav-right {
    display: flex;
  }

  .pages-container {
    padding: 14px 0 0;
    min-height: 450px;
  }

  .hand-panel {
    padding-bottom: calc(var(--safe-bottom) + 6px);
  }

  .hand-grid {
    padding: 0 8px;
  }

  .hand-grid.is-dragging,
  .battlefield-center-column.is-dragging {
    overflow: visible !important;
  }

  /* Smaller card text for hand cards on mobile */
  .hand-grid .card .card-name {
    font-size: 9px !important;
    padding-top: 6px !important; /* Clear the colored header stripe */
    flex: 0 0 auto !important; /* Allow natural height instead of fixed % */
    min-height: 18px;
  }

  /* Reduce color stripe height on mobile hand cards */
  .hand-grid .card::before {
    height: 3px;
  }

  .hand-grid .card .card-header {
    padding: 3px 4px !important;
  }

  /* SVG effect text scales automatically - no font-size override needed */
  .hand-grid .card .card-effect {
    padding: 0;
  }

  .hand-grid .card .card-stat {
    font-size: 9px !important;
    padding: 1px 3px;
  }

  .hand-grid .card .card-footer {
    padding: 3px 4px !important;
    gap: 2px;
  }

  .hand-grid .card .card-stat-box {
    padding: 2px 4px !important;
    gap: 2px;
  }

  .hand-grid .card .card-stat-box .stat-emoji {
    font-size: 10px !important;
  }

  .hand-grid .card .card-stat-box .stat-value {
    font-size: 10px !important;
  }

  .hand-grid .card .card-text-area {
    font-size: 7px !important;
    line-height: 1.1;
  }

  .hand-grid .card .card-keywords {
    font-size: 9px !important;
    gap: 1px;
  }

  .hand-grid .card .card-keywords span {
    padding: 0 1px;
  }

  /* Mobile hand cards: rely on desktop layout - SVG effect text scales automatically */

  .hand-grid .card .card-actions button {
    font-size: 9px !important;
    padding: 2px 4px;
  }

  .card-inspector-panel,
  .game-log-panel {
    min-height: 150px;
    height: 100%;
  }

  /* Mobile panel close button */
  .mobile-panel-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--border-gold);
    color: var(--gold-light);
    font-size: 18px;
    cursor: pointer;
    transition: all var(--transition-fast);
  }

  .mobile-panel-close:hover {
    background: rgba(212, 168, 83, 0.3);
  }

  .inspector-header,
  .log-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* Fix action bar visibility on mobile */
  .action-bar.has-selection,
  .action-bar.has-actions {
    max-height: 45dvh; /* Use dynamic viewport height for browser UI */
    padding-bottom: calc(var(--safe-bottom) + 12px); /* Account for iOS home indicator */
  }
}

/* Mobile landscape or wider screens */
@media (max-width: 767px) and (orientation: landscape) {
  .battlefield-layout-three-column {
    grid-template-columns: 1fr 2fr 1fr;
    min-width: 100vw;
    min-height: 400px;
    overflow-x: auto;
  }

  .battlefield-left-column,
  .battlefield-center-column,
  .battlefield-right-column {
    min-width: 280px;
  }

  .pages-container {
    padding: 14px 0 0;
    min-height: 450px;
    overflow-x: auto;
  }

  .card-inspector-panel,
  .game-log-panel {
    min-height: 150px;
  }
}

@media (min-width: 768px) {
  .page-nav,
  .page-dots {
    display: flex;
  }

  .pages-container {
    padding: clamp(16px, 2.5vw, 30px) clamp(30px, 4vw, 80px) 0;
  }

  .action-bar {
    padding: clamp(8px, 1.5vw, 16px) clamp(30px, 4vw, 80px) clamp(12px, 2vw, 24px);
  }

  .overlay-content {
    border-radius: 24px;
  }
}

@media (min-width: 1200px) {
  .pages-container {
    padding: clamp(20px, 3vw, 40px) clamp(60px, 5vw, 120px) 0;
  }

  .field-row {
    gap: clamp(12px, 2vw, 24px);
  }

  .field-slot {
    min-height: clamp(140px, 18vh, 220px);
  }

  .action-bar {
    padding: clamp(12px, 2vw, 24px) clamp(60px, 5vw, 120px) clamp(16px, 2.5vw, 32px);
  }
}

/* Desktop: NEVER allow vertical scrollbar on battle UI */
@media (min-width: 768px) and (hover: hover) {
  html, body {
    overflow: hidden !important;
    height: 100vh;
    height: 100dvh;
    max-height: 100vh;
    max-height: 100dvh;
  }

  .game-container {
    height: 100vh;
    height: 100dvh;
    max-height: 100vh;
    max-height: 100dvh;
    min-height: 0; /* Remove min-height constraint on desktop */
    overflow: hidden !important;
  }

  .pages-container {
    min-height: 0; /* Remove min-height - let flex handle sizing */
    overflow: hidden;
  }

  .page {
    overflow: hidden;
  }

  .battlefield-layout-two-column,
  .battlefield-layout-three-column {
    min-height: 0; /* Remove min-height constraint */
    max-height: 100%;
    overflow: hidden;
  }

  .battlefield-center-column {
    min-height: 0;
    overflow: hidden;
  }

  .battlefield-right-column,
  .battlefield-left-column {
    min-height: 0;
    overflow: hidden; /* Don't scroll - fit to viewport */
  }

  .game-log-panel {
    flex: 1;
    min-height: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .log-content {
    flex: 1;
    min-height: 0;
    overflow-y: auto; /* Only log content scrolls, not the panel */
  }

  .battlefield-layout {
    min-height: 0;
    overflow: hidden;
  }

  .piles-section {
    flex-shrink: 0;
    min-height: auto;
  }

}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.03);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes glow {
  0% {
    box-shadow: 0 0 8px rgba(212, 168, 83, 0.3);
  }
  50% {
    box-shadow: 0 0 18px rgba(212, 168, 83, 0.6);
  }
  100% {
    box-shadow: 0 0 8px rgba(212, 168, 83, 0.3);
  }
}

/* Start Phase - Attention-grabbing glow */
.turn-badge.phase-start {
  animation: glow-start 1.2s ease-in-out infinite;
  transform: translate(-50%, -50%) scale(1.05);
}

@keyframes glow-start {
  0% {
    box-shadow: 0 0 15px rgba(212, 168, 83, 0.5), 0 0 30px rgba(212, 168, 83, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(212, 168, 83, 0.9), 0 0 50px rgba(212, 168, 83, 0.5), 0 0 70px rgba(212, 168, 83, 0.3);
  }
  100% {
    box-shadow: 0 0 15px rgba(212, 168, 83, 0.5), 0 0 30px rgba(212, 168, 83, 0.3);
  }
}

/* Drag and Drop Styles */
.draggable-card {
  cursor: grab;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

/* Prevent child elements from interfering with card drag */
.draggable-card * {
  -webkit-user-drag: none;
  user-drag: none;
}

.draggable-card img {
  pointer-events: none;
}

.draggable-card:hover {
  transform: translateY(-2px);
}

.draggable-card.dragging {
  cursor: grabbing;
  opacity: 0.5;
  transform: rotate(5deg) scale(1.05);
  z-index: 1000;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

/* Valid target highlighting */
.valid-target {
  box-shadow: 0 0 20px rgba(231, 76, 60, 0.8), inset 0 0 20px rgba(231, 76, 60, 0.3);
  border: 2px solid #e74c3c;
  animation: target-pulse 1s infinite;
}

.invalid-target {
  opacity: 0.5;
  pointer-events: none;
}

.consumption-target {
  box-shadow: 0 0 20px rgba(241, 196, 15, 0.8), inset 0 0 20px rgba(241, 196, 15, 0.3);
  border: 2px solid #f1c40f;
  animation: consumption-pulse 1s infinite;
}

@keyframes target-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(231, 76, 60, 0.8), inset 0 0 20px rgba(231, 76, 60, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(231, 76, 60, 1), inset 0 0 30px rgba(231, 76, 60, 0.5);
  }
}

@keyframes consumption-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(241, 196, 15, 0.8), inset 0 0 20px rgba(241, 196, 15, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(241, 196, 15, 1), inset 0 0 30px rgba(241, 196, 15, 0.5);
  }
}

/* Extended consumption - predator that can consume more prey */
.extended-consumption-active {
  box-shadow: 0 0 25px rgba(39, 174, 96, 0.9), inset 0 0 15px rgba(39, 174, 96, 0.4);
  border: 2px solid #27ae60;
  animation: extended-consumption-pulse 1.5s infinite;
  cursor: grab;
}

.extended-consumption-active:active {
  cursor: grabbing;
}

@keyframes extended-consumption-pulse {
  0%, 100% {
    box-shadow: 0 0 25px rgba(39, 174, 96, 0.9), inset 0 0 15px rgba(39, 174, 96, 0.4);
  }
  50% {
    box-shadow: 0 0 35px rgba(39, 174, 96, 1), inset 0 0 25px rgba(39, 174, 96, 0.6);
  }
}

/* Drop zone styles */
.field-slot.valid-drop-zone {
  background: rgba(46, 204, 113, 0.2);
  border: 2px dashed #2ecc71;
  animation: drop-zone-pulse 1s infinite;
}

.player-badge.valid-drop-zone {
  background: rgba(231, 76, 60, 0.2);
  border: 2px dashed #e74c3c;
  animation: player-target-pulse 1s infinite;
}

@keyframes drop-zone-pulse {
  0%, 100% {
    background: rgba(46, 204, 113, 0.2);
    border: 2px dashed #2ecc71;
  }
  50% {
    background: rgba(46, 204, 113, 0.4);
    border: 2px dashed #27ae60;
  }
}

@keyframes player-target-pulse {
  0%, 100% {
    background: rgba(231, 76, 60, 0.2);
    border: 2px dashed #e74c3c;
  }
  50% {
    background: rgba(231, 76, 60, 0.4);
    border: 2px dashed #c0392b;
  }
}

/* Spell target highlighting (blue) */
.spell-target {
  box-shadow: 0 0 20px rgba(52, 152, 219, 0.8), inset 0 0 20px rgba(52, 152, 219, 0.3);
  border: 2px solid #3498db !important;
  animation: spell-target-pulse 1s infinite;
}

.spell-target.card {
  transform: scale(1.02);
}

@keyframes spell-target-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(52, 152, 219, 0.8), inset 0 0 20px rgba(52, 152, 219, 0.3);
    border-color: #3498db;
  }
  50% {
    box-shadow: 0 0 30px rgba(52, 152, 219, 1), inset 0 0 30px rgba(52, 152, 219, 0.5);
    border-color: #2980b9;
  }
}

/* Spell drop zone (player field area) */
.spell-drop-zone {
  background: rgba(52, 152, 219, 0.15) !important;
  border: 2px dashed #3498db !important;
  animation: spell-drop-zone-pulse 1s infinite;
  border-radius: var(--radius);
}

.player-field.spell-drop-zone {
  background: rgba(52, 152, 219, 0.1) !important;
  box-shadow: inset 0 0 30px rgba(52, 152, 219, 0.2);
}

.field-slot.spell-drop-zone {
  background: rgba(52, 152, 219, 0.2) !important;
}

@keyframes spell-drop-zone-pulse {
  0%, 100% {
    background: rgba(52, 152, 219, 0.15);
    border: 2px dashed #3498db;
  }
  50% {
    background: rgba(52, 152, 219, 0.25);
    border: 2px dashed #2980b9;
  }
}

/* Epic Victory Screen Styles */
.victory-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.95) 100%);
  display: none;  /* Hard hide by default to prevent flash on page load */
  align-items: center;
  justify-content: center;
  z-index: 10000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease;
}

.victory-overlay.show {
  display: flex;
  opacity: 1;
  pointer-events: auto;
}

.victory-container {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  perspective: 1000px;
}

.victory-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  pointer-events: none;
}

.victory-rays {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 200%;
  height: 200%;
  transform: translate(-50%, -50%);
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(212, 168, 83, 0.1) 10deg,
    rgba(212, 168, 83, 0.3) 20deg,
    transparent 30deg,
    transparent 60deg,
    rgba(212, 168, 83, 0.1) 70deg,
    rgba(212, 168, 83, 0.3) 80deg,
    transparent 90deg,
    transparent 120deg,
    rgba(212, 168, 83, 0.1) 130deg,
    rgba(212, 168, 83, 0.3) 140deg,
    transparent 150deg,
    transparent 180deg,
    rgba(212, 168, 83, 0.1) 190deg,
    rgba(212, 168, 83, 0.3) 200deg,
    transparent 210deg,
    transparent 240deg,
    rgba(212, 168, 83, 0.1) 250deg,
    rgba(212, 168, 83, 0.3) 260deg,
    transparent 270deg,
    transparent 300deg,
    rgba(212, 168, 83, 0.1) 310deg,
    rgba(212, 168, 83, 0.3) 320deg,
    transparent 330deg,
    transparent 360deg
  );
  animation: victory-rotate 20s linear infinite;
  opacity: 0;
  transition: opacity 2s ease;
}

.victory-overlay.show .victory-rays {
  opacity: 1;
}

@keyframes victory-rotate {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

.victory-particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.victory-particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--gold);
  border-radius: 50%;
  box-shadow: 0 0 6px var(--gold);
  animation: victory-particle-float 3s ease-in-out infinite;
  pointer-events: none;
}

@keyframes victory-particle-float {
  0%, 100% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100vh) rotate(720deg);
    opacity: 0;
  }
}

.victory-content {
  position: relative;
  text-align: center;
  color: var(--text-primary);
  z-index: 10;
  transform: scale(0.5) rotateX(90deg);
  opacity: 0;
  transition: all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  pointer-events: auto;
  /* Viewport-relative sizing to fit any screen */
  max-height: 90vh;
  max-width: 90vw;
  overflow-y: auto;
  padding: 2vh 4vw;
}

.victory-overlay.show .victory-content {
  transform: scale(1) rotateX(0deg);
  opacity: 1;
}

.victory-crown {
  font-size: min(12vh, 100px);
  margin-bottom: 1.5vh;
  animation: victory-crown-bounce 2s ease-in-out infinite;
  text-shadow: 0 0 30px var(--gold), 0 0 60px var(--gold);
  filter: drop-shadow(0 0 20px var(--gold));
}

@keyframes victory-crown-bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-2vh);
  }
  60% {
    transform: translateY(-1vh);
  }
}

.victory-title {
  font-family: var(--font-display);
  font-size: min(8vh, 5rem);
  font-weight: 900;
  letter-spacing: 0.15em;
  margin: 0 0 1.5vh 0;
  background: linear-gradient(45deg, var(--gold), var(--gold-light), var(--gold));
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 30px rgba(212, 168, 83, 0.5);
  animation: victory-title-glow 2s ease-in-out infinite alternate;
}

@keyframes victory-title-glow {
  from {
    filter: drop-shadow(0 0 20px var(--gold));
  }
  to {
    filter: drop-shadow(0 0 40px var(--gold-light)) drop-shadow(0 0 60px var(--gold));
  }
}

.victory-winner {
  font-family: var(--font-display);
  font-size: min(4vh, 2.5rem);
  font-weight: 600;
  margin: 0 0 1vh 0;
  color: var(--gold-light);
  text-shadow: 0 0 20px var(--gold);
}

.victory-subtitle {
  font-size: min(2.5vh, 1.25rem);
  margin: 0 0 3vh 0;
  color: var(--text-secondary);
  font-weight: 500;
}

.victory-stats {
  display: flex;
  justify-content: center;
  gap: min(4vw, 30px);
  margin: 2vh 0;
  opacity: 0;
  transform: translateY(30px);
  transition: all 1s ease 0.5s;
  flex-wrap: wrap;
}

.victory-overlay.show .victory-stats {
  opacity: 1;
  transform: translateY(0);
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: min(2vh, 15px) min(2vw, 15px);
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid var(--border-gold);
  border-radius: 12px;
  backdrop-filter: blur(10px);
  min-width: min(15vw, 100px);
}

.stat-label {
  font-size: min(1.5vh, 0.8rem);
  color: var(--text-secondary);
  margin-bottom: 0.5vh;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.stat-value {
  font-family: var(--font-display);
  font-size: min(3vh, 1.5rem);
  font-weight: 700;
  color: var(--gold);
  text-shadow: 0 0 10px var(--gold);
}

/* Victory Pack Reward */
.victory-reward {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5vh;
  margin: 2vh 0;
  padding: min(2vh, 15px) min(4vw, 30px);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2));
  border: 2px solid #60a5fa;
  border-radius: 12px;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.victory-overlay.show .victory-reward {
  opacity: 1;
  transform: scale(1);
}

.victory-reward.animate {
  animation: reward-pulse 2s ease-in-out infinite;
}

@keyframes reward-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
  }
  50% {
    box-shadow: 0 0 40px rgba(96, 165, 250, 0.7), 0 0 60px rgba(147, 51, 234, 0.4);
  }
}

.victory-reward-icon {
  font-size: min(4vh, 2.5rem);
  animation: reward-bounce 1s ease-in-out infinite;
}

@keyframes reward-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-0.5vh); }
}

.victory-reward-text {
  font-size: min(2vh, 1rem);
  font-weight: 700;
  color: #60a5fa;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.victory-actions {
  display: flex;
  gap: min(2vw, 15px);
  justify-content: center;
  opacity: 0;
  transform: translateY(30px);
  transition: all 1s ease 1s;
  margin-top: 2vh;
}

.victory-overlay.show .victory-actions {
  opacity: 1;
  transform: translateY(0);
}

.victory-menu {
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: #2e2211;
  box-shadow: 0 10px 30px rgba(212, 168, 83, 0.3);
  padding: min(1.5vh, 12px) min(4vw, 30px);
  font-size: min(2vh, 1rem);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  z-index: 100;
  pointer-events: auto;
}

.victory-menu:hover {
  transform: translateY(-2px);
  box-shadow: 0 15px 40px rgba(212, 168, 83, 0.5);
}

/* AI vs AI Auto-restart Countdown */
.victory-countdown {
  margin-top: 20px;
  padding: 15px 25px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 10px;
  border: 1px solid rgba(100, 200, 255, 0.3);
  cursor: pointer;
  transition: all 0.3s ease;
}

.victory-countdown:hover {
  background: rgba(0, 0, 0, 0.7);
  border-color: rgba(255, 100, 100, 0.5);
}

.countdown-text {
  font-size: 1.1rem;
  color: #a0d8ff;
  font-weight: 500;
}

.countdown-number {
  display: inline-block;
  font-size: 1.4rem;
  font-weight: 700;
  color: #64d8ff;
  min-width: 1.5em;
  text-align: center;
  animation: countdown-pulse 1s ease-in-out infinite;
}

@keyframes countdown-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.8;
  }
}

.countdown-hint {
  font-size: 0.85rem;
  color: #888;
  margin-top: 5px;
  transition: color 0.3s ease;
}

.victory-countdown:hover .countdown-hint {
  color: #ff8888;
}

/* Victory screen entrance animations */
.victory-overlay.show .victory-crown {
  animation-delay: 0.5s;
}

.victory-overlay.show .victory-title {
  animation-delay: 0.8s;
}

.victory-overlay.show .victory-winner {
  animation-delay: 1.1s;
}

.victory-overlay.show .victory-subtitle {
  animation-delay: 1.4s;
}

/* ============================================================================
   EMOTE SYSTEM
   ============================================================================ */

/* Emote Toggle Button */
.emote-toggle {
  display: none;  /* Hidden by default, shown only in online mode */
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, #4a5568, #2d3748);
  border: 2px solid #718096;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
}

.emote-toggle-left {
  margin-left: 8px;
  margin-right: auto;
}

.emote-toggle-right {
  margin-right: 8px;
  margin-left: auto;
}

.emote-toggle:hover {
  background: linear-gradient(135deg, #5a6578, #3d4758);
  border-color: #a0aec0;
  transform: scale(1.05);
}

.emote-toggle:active {
  transform: scale(0.95);
}

.emote-toggle.active {
  background: linear-gradient(135deg, #4299e1, #3182ce);
  border-color: #63b3ed;
}

.emote-toggle-icon {
  font-size: 1.1rem;
}

/* Show emote toggles in online mode */
.online-mode .emote-toggle {
  display: flex;
}

/* Emote Panel */
.emote-panel {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
  border: 2px solid #4a5568;
  border-radius: 16px;
  padding: 16px;
  z-index: 1000;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
  opacity: 0;
  pointer-events: none;
  transition: all 0.2s ease;
  min-width: 280px;
}

.emote-panel.active {
  display: block;
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
  pointer-events: auto;
}

.emote-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid #4a5568;
}

.emote-panel-title {
  color: #e2e8f0;
  font-weight: 600;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.emote-squelch-btn {
  background: transparent;
  border: 1px solid #4a5568;
  border-radius: 8px;
  padding: 4px 8px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.2s ease;
}

.emote-squelch-btn:hover {
  background: #4a5568;
}

.emote-squelch-btn.active {
  background: #e53e3e;
  border-color: #fc8181;
}

.emote-buttons {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.emote-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 12px 8px;
  background: linear-gradient(135deg, #2d3748, #1a202c);
  border: 1px solid #4a5568;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.emote-btn:hover {
  background: linear-gradient(135deg, #4a5568, #2d3748);
  border-color: #718096;
  transform: translateY(-2px);
}

.emote-btn:active {
  transform: translateY(0);
}

.emote-btn-emoji {
  font-size: 1.5rem;
}

.emote-btn-label {
  color: #a0aec0;
  font-size: 0.75rem;
  font-weight: 500;
}

/* Emote Bubble */
.emote-bubble {
  position: absolute;
  top: 50%;
  left: 100%;
  transform: translateY(-50%) translateX(-10px);
  background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
  border: 2px solid #63b3ed;
  border-radius: 16px;
  padding: 6px 12px;
  display: flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
  z-index: 500;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 4px 16px rgba(66, 153, 225, 0.4);
  margin-left: 8px;
}

.emote-bubble::before {
  content: '';
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-right: 8px solid #63b3ed;
}

.emote-bubble::after {
  content: '';
  position: absolute;
  left: -6px;
  top: 50%;
  transform: translateY(-50%);
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-right: 6px solid #4299e1;
}

.emote-bubble.visible {
  opacity: 1;
  transform: translateY(-50%) translateX(0);
  animation: emote-bubble-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.emote-bubble.fading {
  opacity: 0;
  transform: translateY(-50%) translateX(10px);
}

@keyframes emote-bubble-pop {
  0% {
    transform: translateY(-50%) translateX(0) scale(0.3);
    opacity: 0;
  }
  30% {
    transform: translateY(-50%) translateX(0) scale(1.2);
    opacity: 1;
  }
  45% {
    transform: translateY(-50%) translateX(-4px) scale(1.1);
  }
  55% {
    transform: translateY(-50%) translateX(4px) scale(1.05);
  }
  65% {
    transform: translateY(-50%) translateX(-3px) scale(1.02);
  }
  75% {
    transform: translateY(-50%) translateX(2px) scale(1.01);
  }
  100% {
    transform: translateY(-50%) translateX(0) scale(1);
  }
}

/* Player 1 (right side) - bubble appears to the LEFT */
.emote-bubble-player-1 {
  left: auto;
  right: 100%;
  margin-left: 0;
  margin-right: 8px;
  transform: translateY(-50%) translateX(10px);
}

.emote-bubble-player-1::before {
  left: auto;
  right: -8px;
  border-right: none;
  border-left: 8px solid #63b3ed;
}

.emote-bubble-player-1::after {
  left: auto;
  right: -6px;
  border-right: none;
  border-left: 6px solid #4299e1;
}

.emote-bubble-player-1.visible {
  transform: translateY(-50%) translateX(0);
  animation: emote-bubble-pop-right 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.emote-bubble-player-1.fading {
  transform: translateY(-50%) translateX(-10px);
}

@keyframes emote-bubble-pop-right {
  0% {
    transform: translateY(-50%) translateX(0) scale(0.3);
    opacity: 0;
  }
  30% {
    transform: translateY(-50%) translateX(0) scale(1.2);
    opacity: 1;
  }
  45% {
    transform: translateY(-50%) translateX(4px) scale(1.1);
  }
  55% {
    transform: translateY(-50%) translateX(-4px) scale(1.05);
  }
  65% {
    transform: translateY(-50%) translateX(3px) scale(1.02);
  }
  75% {
    transform: translateY(-50%) translateX(-2px) scale(1.01);
  }
  100% {
    transform: translateY(-50%) translateX(0) scale(1);
  }
}

.emote-bubble-emoji {
  font-size: 1.25rem;
}

.emote-bubble-text {
  color: #fff;
  font-size: 0.875rem;
  font-weight: 600;
}

/* Emote panel backdrop (click outside to close) */
.emote-panel-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 999;
}

.emote-panel-backdrop.active {
  display: block;
}

/* ============================================================================
   CARD RARITY SYSTEM
   ============================================================================ */

/* Rarity title text effects */
.card-title.rarity-common {
  color: #4ade80;
  text-shadow: 0 0 4px rgba(74, 222, 128, 0.3);
}

.card-title.rarity-uncommon {
  color: #60a5fa;
  text-shadow: 0 0 6px rgba(96, 165, 250, 0.4);
}

.card-title.rarity-rare {
  color: #c084fc;
  text-shadow: 0 0 8px rgba(192, 132, 252, 0.5);
}

.card-title.rarity-legendary {
  color: #fb923c;
  text-shadow:
    0 0 8px rgba(251, 146, 60, 0.6),
    0 0 16px rgba(251, 146, 60, 0.4);
  animation: legendary-glow 2s ease-in-out infinite;
}

@keyframes legendary-glow {
  0%, 100% {
    text-shadow:
      0 0 8px rgba(251, 146, 60, 0.6),
      0 0 16px rgba(251, 146, 60, 0.4);
  }
  50% {
    text-shadow:
      0 0 12px rgba(251, 146, 60, 0.8),
      0 0 24px rgba(251, 146, 60, 0.5);
  }
}

.card-title.rarity-pristine {
  background: linear-gradient(
    90deg,
    #ffffff 0%,
    #ffd4e5 15%,
    #d4f1ff 30%,
    #e8d4ff 45%,
    #ffffff 60%,
    #d4ffe8 75%,
    #fff4d4 90%,
    #ffffff 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: pristine-shimmer 3s ease-in-out infinite;
  filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
}

@keyframes pristine-shimmer {
  0% { background-position: 200% 50%; }
  100% { background-position: -200% 50%; }
}

/* Rarity indicator gem (optional - for card corners) */
.rarity-gem {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  position: absolute;
  top: 4px;
  right: 4px;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.rarity-gem.common { background: #4ade80; }
.rarity-gem.uncommon { background: #60a5fa; }
.rarity-gem.rare { background: #c084fc; }
.rarity-gem.legendary {
  background: #fb923c;
  box-shadow: 0 0 6px rgba(251, 146, 60, 0.6);
}
.rarity-gem.pristine {
  background: linear-gradient(135deg, #fff, #ffd4e5, #d4f1ff, #e8d4ff);
  animation: pristine-gem-spin 2s linear infinite;
}

@keyframes pristine-gem-spin {
  from { filter: hue-rotate(0deg); }
  to { filter: hue-rotate(360deg); }
}

/* ============================================================================
   IN-GAME CARD RARITY BORDERS
   Applied to cards in hand and on battlefield
   ============================================================================ */

/* Rarity borders for in-game cards - similar to collection but subtler */
.card.rarity-common {
  border-color: #4ade80;
  box-shadow: 0 0 6px rgba(74, 222, 128, 0.25);
}

.card.rarity-uncommon {
  border-color: #60a5fa;
  box-shadow: 0 0 8px rgba(96, 165, 250, 0.3);
}

.card.rarity-rare {
  border-color: #c084fc;
  box-shadow: 0 0 10px rgba(192, 132, 252, 0.35);
}

.card.rarity-legendary {
  border-color: #fb923c;
  box-shadow: 0 0 12px rgba(251, 146, 60, 0.4);
  animation: card-legendary-pulse 2s ease-in-out infinite;
}

@keyframes card-legendary-pulse {
  0%, 100% { box-shadow: 0 0 12px rgba(251, 146, 60, 0.4); }
  50% { box-shadow: 0 0 18px rgba(251, 146, 60, 0.6); }
}

.card.rarity-pristine {
  border-color: #fff;
  box-shadow:
    0 0 15px rgba(255, 255, 255, 0.3),
    0 0 30px rgba(192, 132, 252, 0.15);
  animation: card-pristine-border 3s linear infinite;
}

@keyframes card-pristine-border {
  0% { border-color: #fff; }
  25% { border-color: #ffd4e5; }
  50% { border-color: #d4f1ff; }
  75% { border-color: #e8d4ff; }
  100% { border-color: #fff; }
}

/* Rarity name styling for in-game cards (using .card-name class) */
.card-name.rarity-common {
  color: #4ade80;
  text-shadow: 0 0 4px rgba(74, 222, 128, 0.3);
}

.card-name.rarity-uncommon {
  color: #60a5fa;
  text-shadow: 0 0 6px rgba(96, 165, 250, 0.4);
}

.card-name.rarity-rare {
  color: #c084fc;
  text-shadow: 0 0 8px rgba(192, 132, 252, 0.5);
}

.card-name.rarity-legendary {
  color: #fb923c;
  text-shadow:
    0 0 8px rgba(251, 146, 60, 0.6),
    0 0 16px rgba(251, 146, 60, 0.4);
  animation: legendary-glow 2s ease-in-out infinite;
}

.card-name.rarity-pristine {
  background: linear-gradient(
    90deg,
    #ffffff 0%,
    #ffd4e5 15%,
    #d4f1ff 30%,
    #e8d4ff 45%,
    #ffffff 60%,
    #d4ffe8 75%,
    #fff4d4 90%,
    #ffffff 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: pristine-shimmer 3s ease-in-out infinite;
  filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
}

/* ============================================================================
   GAME HISTORY LOG RARITY COLORS
   ============================================================================ */

.log-card-link.rarity-common {
  color: #4ade80;
}

.log-card-link.rarity-uncommon {
  color: #60a5fa;
}

.log-card-link.rarity-rare {
  color: #c084fc;
}

.log-card-link.rarity-legendary {
  color: #fb923c;
  text-shadow: 0 0 4px rgba(251, 146, 60, 0.4);
}

.log-card-link.rarity-pristine {
  background: linear-gradient(
    90deg,
    #ffffff 0%,
    #ffd4e5 20%,
    #d4f1ff 40%,
    #e8d4ff 60%,
    #ffffff 80%,
    #d4ffe8 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: pristine-shimmer 3s ease-in-out infinite;
}

/* ============================================================================
   PROFILE OVERLAY
   ============================================================================ */

.profile-overlay {
  background: rgba(0, 0, 0, 0.9);
}

.profile-overlay .overlay-content {
  max-width: 1200px;
  width: 95%;
  max-height: 90vh;
  padding: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.profile-container {
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 0;
  height: 100%;
  min-height: 500px;
}

/* Left Panel - Stats & Packs */
.profile-left-panel {
  background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
  border-right: 1px solid #334155;
  display: flex;
  flex-direction: column;
  padding: 20px;
  gap: 16px;
  overflow: hidden;
  min-height: 0;
}

.profile-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-bottom: 16px;
  border-bottom: 1px solid #334155;
}

.profile-avatar {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, #4299e1, #3182ce);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.profile-username {
  font-size: 1.25rem;
  font-weight: 600;
  color: #f1f5f9;
}

/* Profile Tabs */
.profile-tabs {
  display: flex;
  gap: 8px;
  margin-top: 16px;
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
  flex-shrink: 0;
}

.profile-tab {
  flex: 1;
  padding: 10px 16px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: transparent;
  color: #94a3b8;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.profile-tab:hover {
  background: rgba(51, 65, 85, 0.3);
  color: #e2e8f0;
}

.profile-tab.active {
  background: rgba(59, 130, 246, 0.2);
  border-color: #3b82f6;
  color: #60a5fa;
}

/* Profile Tab Content */
.profile-tab-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  flex: 1;
  overflow-y: auto;
  min-height: 0;
}

/* Friends Tab Styles */
.friends-add-section {
  display: flex;
  gap: 8px;
}

.friends-add-input {
  flex: 1;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: rgba(15, 23, 42, 0.8);
  color: #f1f5f9;
  font-size: 0.875rem;
}

.friends-add-input:focus {
  outline: none;
  border-color: #3b82f6;
}

.friends-add-input::placeholder {
  color: #64748b;
}

.friends-add-btn {
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  background: #3b82f6;
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.friends-add-btn:hover {
  background: #2563eb;
}

.friends-add-btn:disabled {
  background: #475569;
  cursor: not-allowed;
}

.friends-add-error {
  color: #f87171;
  font-size: 0.75rem;
  min-height: 18px;
  margin-top: 4px;
}

.friends-add-error.success {
  color: #4ade80;
}

/* Friends Section */
.friends-section {
  background: rgba(30, 41, 59, 0.5);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 12px;
}

.friends-section-title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #64748b;
  margin-bottom: 12px;
}

.friends-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.friends-empty {
  color: #64748b;
  font-size: 0.875rem;
  text-align: center;
  padding: 16px;
}

/* Friend Item */
.friend-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: rgba(15, 23, 42, 0.5);
  border-radius: 8px;
  transition: background 0.2s;
}

.friend-item:hover {
  background: rgba(30, 41, 59, 0.8);
}

.friend-status-indicator {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.friend-status-indicator.online {
  background: #4ade80;
  box-shadow: 0 0 8px rgba(74, 222, 128, 0.5);
}

.friend-status-indicator.offline {
  background: #475569;
}

.friend-info {
  flex: 1;
  min-width: 0;
}

.friend-username {
  display: block;
  color: #f1f5f9;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.friend-request-status,
.friend-online-status {
  font-size: 0.75rem;
  color: #64748b;
}

.friend-online-status.online {
  color: #4ade80;
}

.friend-actions {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.friend-actions button {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  border: 1px solid #334155;
  background: transparent;
  color: #94a3b8;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.friend-actions button:hover {
  background: rgba(51, 65, 85, 0.5);
  color: #e2e8f0;
}

.friend-accept-btn:hover {
  background: rgba(74, 222, 128, 0.2) !important;
  border-color: #4ade80 !important;
  color: #4ade80 !important;
}

.friend-reject-btn:hover,
.friend-remove-btn:hover,
.friend-cancel-btn:hover {
  background: rgba(248, 113, 113, 0.2) !important;
  border-color: #f87171 !important;
  color: #f87171 !important;
}

.friend-view-btn:hover {
  background: rgba(59, 130, 246, 0.2) !important;
  border-color: #3b82f6 !important;
  color: #60a5fa !important;
}

.friend-challenge-btn:hover {
  background: rgba(251, 191, 36, 0.2) !important;
  border-color: #fbbf24 !important;
  color: #fbbf24 !important;
}

/* Duel Invite Popup */
.duel-invite-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  animation: fadeIn 0.2s ease;
}

.duel-invite-popup {
  background: var(--bg-card);
  border: 2px solid var(--gold);
  border-radius: 12px;
  padding: 24px;
  min-width: 300px;
  max-width: 400px;
  text-align: center;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  animation: popIn 0.3s ease;
}

@keyframes popIn {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.duel-invite-header h3 {
  margin: 0 0 16px 0;
  color: var(--gold);
  font-family: var(--font-display);
  font-size: 24px;
  letter-spacing: 1px;
}

.duel-invite-content {
  margin-bottom: 20px;
}

.duel-invite-content p {
  margin: 0 0 16px 0;
  color: var(--text-primary);
  font-size: 16px;
}

.duel-invite-timer {
  font-size: 32px;
  font-weight: bold;
  color: var(--hp-red);
  font-family: var(--font-display);
}

.duel-invite-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.duel-invite-accept,
.duel-invite-decline,
.duel-invite-dismiss {
  padding: 10px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s ease;
}

.duel-invite-accept {
  background: var(--prey);
  border: none;
  color: white;
}

.duel-invite-accept:hover {
  background: #2ecc71;
  transform: scale(1.05);
}

.duel-invite-decline {
  background: transparent;
  border: 1px solid var(--hp-red);
  color: var(--hp-red);
}

.duel-invite-decline:hover {
  background: rgba(231, 76, 60, 0.2);
}

.duel-invite-dismiss {
  background: var(--bg-card-hover);
  border: 1px solid var(--border-subtle);
  color: var(--text-primary);
}

.duel-invite-dismiss:hover {
  background: var(--bg-card);
}

.duel-invite-cancel {
  padding: 10px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s ease;
  background: transparent;
  border: 1px solid var(--text-secondary);
  color: var(--text-secondary);
}

.duel-invite-cancel:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--text-primary);
  color: var(--text-primary);
}

.duel-invite-starting {
  color: var(--prey);
  font-weight: bold;
  margin-top: 8px;
  animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Friend Profile Modal */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1100;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal.active {
  opacity: 1;
  visibility: visible;
}

.modal-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
}

.modal-content {
  position: relative;
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  border: 1px solid #334155;
  border-radius: 16px;
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  padding: 24px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.friend-profile-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-bottom: 16px;
  border-bottom: 1px solid #334155;
  margin-bottom: 16px;
}

.friend-profile-avatar {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, #4299e1, #3182ce);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.friend-profile-username {
  font-size: 1.25rem;
  font-weight: 600;
  color: #f1f5f9;
  flex: 1;
}

.friend-profile-close {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  border: 1px solid #334155;
  background: transparent;
  color: #94a3b8;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.friend-profile-close:hover {
  background: rgba(248, 113, 113, 0.2);
  border-color: #f87171;
  color: #f87171;
}

.friend-profile-stats {
  background: rgba(30, 41, 59, 0.5);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}

.friend-profile-stats-title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #94a3b8;
  margin-bottom: 12px;
}

.friend-profile-stat-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.5);
  font-size: 0.875rem;
}

.friend-profile-stat-row:last-child {
  border-bottom: none;
}

.friend-profile-stat-label {
  color: #94a3b8;
}

.friend-profile-stat-value {
  color: #f1f5f9;
  font-weight: 500;
}

.friend-profile-collection {
  background: rgba(30, 41, 59, 0.5);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px;
}

.friend-profile-collection-title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #94a3b8;
  margin-bottom: 12px;
}

.friend-profile-collection-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 8px;
  max-height: 250px;
  overflow-y: auto;
}

.friend-profile-collection-grid .collection-card-wrapper {
  transform: scale(0.8);
  transform-origin: top left;
}

.friend-profile-collection-empty {
  color: #64748b;
  font-size: 0.875rem;
  text-align: center;
  padding: 24px;
}

/* Stats Section */
.profile-stats {
  background: rgba(30, 41, 59, 0.5);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px;
}

.profile-stats-title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #94a3b8;
  margin-bottom: 12px;
}

.profile-stat-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.5);
  font-size: 0.875rem;
}

.profile-stat-row:last-child {
  border-bottom: none;
}

.profile-stat-label {
  color: #94a3b8;
}

.profile-stat-value {
  color: #f1f5f9;
  font-weight: 500;
}

/* Match History */
.profile-match-history {
  background: rgba(30, 41, 59, 0.5);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px;
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  min-height: 120px;
  max-height: 150px;
}

.profile-match-history-title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #94a3b8;
  margin-bottom: 12px;
  flex-shrink: 0;
}

#profile-match-list {
  flex: 1;
  overflow-y: auto;
}

.profile-match-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
  background: rgba(15, 23, 42, 0.5);
  border-radius: 6px;
  margin-bottom: 6px;
  font-size: 0.8rem;
}

.profile-match-item:last-child {
  margin-bottom: 0;
}

.profile-match-players {
  color: #e2e8f0;
}

.profile-match-result {
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.7rem;
}

.profile-match-result.win {
  background: rgba(74, 222, 128, 0.2);
  color: #4ade80;
}

.profile-match-result.loss {
  background: rgba(248, 113, 113, 0.2);
  color: #f87171;
}

.profile-match-hp {
  font-weight: 500;
  color: #94a3b8;
  min-width: 60px;
}

.profile-match-hp .hp-win {
  color: #4ade80;
  font-weight: 600;
}

.profile-match-hp .hp-loss {
  color: #f87171;
  font-weight: 600;
}

.profile-match-opponent {
  flex: 1;
  color: #e2e8f0;
}

.profile-match-opponent .match-deck {
  color: #22d3ee;
}

.profile-match-date {
  color: #64748b;
  font-size: 0.75rem;
}

/* Packs Section */
.profile-packs {
  background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
  border: 2px solid #3b82f6;
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.profile-packs:hover {
  border-color: #60a5fa;
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
}

.profile-packs-label {
  font-size: 0.875rem;
  color: #94a3b8;
  margin-bottom: 8px;
}

.profile-packs-count {
  font-size: 2.5rem;
  font-weight: 700;
  color: #60a5fa;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.profile-packs-icon {
  font-size: 2rem;
}

.profile-packs-hint {
  font-size: 0.75rem;
  color: #64748b;
  margin-top: 8px;
}

.profile-packs.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.profile-packs.disabled:hover {
  transform: none;
  box-shadow: none;
}

/* Back Button */
.profile-back-btn {
  margin-top: auto;
  padding: 12px;
  background: transparent;
  border: 1px solid #475569;
  border-radius: 8px;
  color: #94a3b8;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.875rem;
}

.profile-back-btn:hover {
  background: rgba(71, 85, 105, 0.3);
  border-color: #64748b;
  color: #e2e8f0;
}

/* Right Panel - Card Collection */
.profile-right-panel {
  background: #0f172a;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.collection-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: rgba(30, 41, 59, 0.5);
  border-bottom: 1px solid #334155;
}

.collection-title {
  font-size: 1rem;
  font-weight: 600;
  color: #f1f5f9;
}

.collection-filter {
  display: flex;
  align-items: center;
  gap: 8px;
}

.collection-filter-label {
  font-size: 0.75rem;
  color: #94a3b8;
}

.collection-filter-select {
  background: #1e293b;
  border: 1px solid #475569;
  border-radius: 6px;
  padding: 6px 12px;
  color: #e2e8f0;
  font-size: 0.875rem;
  cursor: pointer;
}

.collection-filter-select:hover {
  border-color: #64748b;
}

/* Card Grid */
.collection-grid {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
  align-content: start;
}

/* Collection Card */
.collection-card {
  position: relative;
  aspect-ratio: 3/4;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 2px solid transparent;
}

.collection-card:hover {
  transform: translateY(-4px);
  z-index: 1;
}

.collection-card.not-owned {
  opacity: 0.1;
  filter: grayscale(100%);
}

.collection-card.not-owned:hover {
  opacity: 0.25;
}

/* Rarity borders for collection cards */
.collection-card.rarity-common {
  border-color: #4ade80;
  box-shadow: 0 0 8px rgba(74, 222, 128, 0.3);
}

.collection-card.rarity-uncommon {
  border-color: #60a5fa;
  box-shadow: 0 0 10px rgba(96, 165, 250, 0.4);
}

.collection-card.rarity-rare {
  border-color: #c084fc;
  box-shadow: 0 0 12px rgba(192, 132, 252, 0.5);
}

.collection-card.rarity-legendary {
  border-color: #fb923c;
  box-shadow: 0 0 16px rgba(251, 146, 60, 0.5);
  animation: legendary-border-pulse 2s ease-in-out infinite;
}

@keyframes legendary-border-pulse {
  0%, 100% { box-shadow: 0 0 16px rgba(251, 146, 60, 0.5); }
  50% { box-shadow: 0 0 24px rgba(251, 146, 60, 0.7); }
}

.collection-card.rarity-pristine {
  border-color: #fff;
  box-shadow:
    0 0 20px rgba(255, 255, 255, 0.4),
    0 0 40px rgba(192, 132, 252, 0.2);
  animation: pristine-border 3s linear infinite;
}

@keyframes pristine-border {
  0% { border-color: #fff; }
  25% { border-color: #ffd4e5; }
  50% { border-color: #d4f1ff; }
  75% { border-color: #e8d4ff; }
  100% { border-color: #fff; }
}

/* Collection card inner content */
.collection-card-inner {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.collection-card-image {
  flex: 1;
  background-size: cover;
  background-position: center;
  background-color: #1e293b;
}

.collection-card-info {
  padding: 6px 8px;
  background: rgba(15, 23, 42, 0.9);
}

.collection-card-name {
  font-size: 0.7rem;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: #e2e8f0;
}

/* Collection card wrapper */
.collection-card-wrapper {
  position: relative;
}

/* Empty collection state */
.collection-empty {
  grid-column: 1 / -1;
  text-align: center;
  padding: 48px 24px;
  color: #64748b;
  font-size: 0.9rem;
}

/* Rarity gem positioning on collection cards */
.collection-card .rarity-gem {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 2;
}

/* ============================================================================
   PACK OPENING OVERLAY
   ============================================================================ */

.pack-opening-overlay {
  background: rgba(0, 0, 0, 0.95);
}

.pack-opening-overlay .overlay-content {
  max-width: 900px;
  width: 95%;
  padding: 32px;
  text-align: center;
}

.pack-opening-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #f1f5f9;
  margin-bottom: 8px;
}

.pack-opening-subtitle {
  font-size: 0.875rem;
  color: #94a3b8;
  margin-bottom: 32px;
}

/* ============================================================================
   UNOPENED PACK PHASE
   ============================================================================ */

.pack-unopened-phase {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
}

.pack-unopened {
  position: relative;
  width: 200px;
  height: 240px;
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  --shake-intensity: 0;
}

.pack-unopened-glow {
  position: absolute;
  inset: -20px;
  background: radial-gradient(circle, rgba(59, 130, 246, 0.4) 0%, transparent 70%);
  border-radius: 50%;
  opacity: 0.5;
  transition: opacity 0.3s ease;
}

.pack-unopened.shaking .pack-unopened-glow {
  opacity: 1;
  animation: pack-glow-pulse 0.3s ease-in-out infinite;
}

@keyframes pack-glow-pulse {
  0%, 100% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.1); opacity: 1; }
}

.pack-unopened-box {
  position: relative;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #1e3a5f 0%, #3b82f6 50%, #1e3a5f 100%);
  border: 3px solid #60a5fa;
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 10px 40px rgba(59, 130, 246, 0.3),
    inset 0 0 30px rgba(255, 255, 255, 0.1);
  transition: transform 0.1s ease;
}

.pack-unopened.shaking .pack-unopened-box {
  animation: pack-shake 0.1s ease-in-out infinite;
  animation-duration: calc(0.15s - var(--shake-intensity) * 0.1s);
}

@keyframes pack-shake {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(calc(-5px * var(--shake-intensity, 1))) rotate(calc(-2deg * var(--shake-intensity, 1))); }
  75% { transform: translateX(calc(5px * var(--shake-intensity, 1))) rotate(calc(2deg * var(--shake-intensity, 1))); }
}

.pack-unopened-icon {
  font-size: 4rem;
  margin-bottom: 8px;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.pack-unopened-label {
  font-size: 1.5rem;
  font-weight: 700;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* Progress Ring */
.pack-progress-ring {
  position: absolute;
  inset: -15px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.pack-unopened.shaking .pack-progress-ring {
  opacity: 1;
}

.pack-progress-ring svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.pack-progress-ring .progress-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 4;
}

.pack-progress-ring .progress-fill {
  fill: none;
  stroke: #60a5fa;
  stroke-width: 4;
  stroke-linecap: round;
  transition: stroke-dashoffset 0.05s linear;
  filter: drop-shadow(0 0 6px rgba(96, 165, 250, 0.8));
}

/* Burst Animation */
.pack-unopened.bursting .pack-unopened-box {
  animation: pack-burst 0.6s ease-out forwards;
}

.pack-unopened.bursting .pack-unopened-glow {
  animation: pack-burst-glow 0.6s ease-out forwards;
}

@keyframes pack-burst {
  0% { transform: scale(1); opacity: 1; }
  30% { transform: scale(1.2); }
  100% { transform: scale(0); opacity: 0; }
}

@keyframes pack-burst-glow {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(2); opacity: 1; }
  100% { transform: scale(3); opacity: 0; }
}

/* Hold hint text */
.pack-hold-hint {
  margin-top: 24px;
  font-size: 1rem;
  color: #64748b;
  transition: color 0.3s ease;
}

.pack-unopened.shaking ~ .pack-hold-hint {
  color: #60a5fa;
}

/* Cards phase */
.pack-cards-phase {
  animation: cards-phase-enter 0.5s ease-out;
}

@keyframes cards-phase-enter {
  0% { opacity: 0; transform: scale(0.9); }
  100% { opacity: 1; transform: scale(1); }
}

/* Pack Cards Container */
.pack-cards-container {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin-bottom: 32px;
  flex-wrap: wrap;
  position: relative; /* For halo effect positioning */
}

/* Individual Pack Card */
.pack-card {
  width: 180px;
  height: 252px;
  perspective: 1000px;
  cursor: pointer;
  position: relative; /* Contain the rarity glow */
}

.pack-card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.pack-card.revealed .pack-card-inner {
  transform: rotateY(180deg);
}

.pack-card-front,
.pack-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 10px;
  overflow: hidden;
}

.pack-card-front {
  background: linear-gradient(135deg, #1e3a5f 0%, #3b82f6 50%, #1e3a5f 100%);
  border: 2px solid #60a5fa;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
}

.pack-card-front::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    transparent 40%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 60%
  );
  animation: pack-shimmer 2s ease-in-out infinite;
}

@keyframes pack-shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.pack-card-back {
  background: #1e293b;
  border: 2px solid #475569;
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.pack-card-back .collection-card-inner {
  height: 100%;
}

/* Pack card logo */
.pack-card-logo {
  font-size: 3rem;
  color: rgba(255, 255, 255, 0.8);
}

/* Pack card revealed content */
.pack-card-name {
  font-size: 1rem;
  font-weight: 700;
  padding: 16px 12px 8px;
  text-align: center;
}

.pack-card-type {
  font-size: 0.75rem;
  color: #94a3b8;
  text-align: center;
  padding: 4px 12px;
}

.pack-card-rarity {
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  padding: 8px 12px;
  margin-top: auto;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Pack revealed card (actual card rendering) */
.pack-revealed-card {
  width: 100%;
  height: 100%;
}

.pack-revealed-card.card {
  width: 100%;
  height: 100%;
}

.pack-card-rarity-badge {
  position: absolute;
  bottom: 6px;
  left: 50%;
  transform: translateX(-50%);
  font-weight: 700;
  text-transform: uppercase;
  font-size: 0.7rem;
  letter-spacing: 0.05em;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9);
  white-space: nowrap;
}

/* Pack card name rarity colors */
.pack-card-name.rarity-common { color: #4ade80; }
.pack-card-name.rarity-uncommon { color: #60a5fa; }
.pack-card-name.rarity-rare { color: #c084fc; }
.pack-card-name.rarity-legendary {
  color: #fb923c;
  text-shadow: 0 0 8px rgba(251, 146, 60, 0.5);
}
.pack-card-name.rarity-pristine {
  background: linear-gradient(90deg, #fff, #ffd4e5, #d4f1ff, #e8d4ff, #fff);
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: pristine-shimmer 3s ease-in-out infinite;
}

/* Pack save status */
.pack-save-status {
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  min-height: 20px;
  margin: 8px 0;
  transition: color 0.3s ease;
}

/* Pack opening actions */
.pack-opening-actions {
  display: flex;
  justify-content: center;
  gap: 16px;
}

.pack-reveal-all-btn {
  padding: 12px 32px;
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  border: none;
  border-radius: 8px;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pack-reveal-all-btn:hover {
  background: linear-gradient(135deg, #60a5fa, #3b82f6);
  transform: translateY(-2px);
}

.pack-done-btn {
  padding: 12px 32px;
  background: transparent;
  border: 1px solid #475569;
  border-radius: 8px;
  color: #94a3b8;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pack-done-btn:hover {
  border-color: #64748b;
  color: #e2e8f0;
}

/* ============================================================================
   RARITY REVEAL EFFECTS
   ============================================================================ */

/* Common - simple flip */
.pack-card.revealed.rarity-common {
  animation: common-card-enter 0.6s ease-out;
}

@keyframes common-card-enter {
  0% { transform: scale(0.9); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.pack-card.revealed.rarity-common .pack-card-back {
  border-color: #4ade80;
  box-shadow: 0 0 15px rgba(74, 222, 128, 0.4);
}

/* Uncommon - subtle glow */
.pack-card.revealed.rarity-uncommon {
  animation: uncommon-card-enter 0.6s ease-out;
}

@keyframes uncommon-card-enter {
  0% { transform: scale(0.9); }
  50% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

.pack-card.revealed.rarity-uncommon .pack-card-back {
  border-color: #60a5fa;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.5);
  animation: uncommon-glow 2s ease-in-out infinite;
}

@keyframes uncommon-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.4); }
  50% { box-shadow: 0 0 30px rgba(96, 165, 250, 0.6); }
}

/* Rare - purple burst */
.pack-card.rare-reveal {
  animation: rare-card-enter 0.7s ease-out;
}

@keyframes rare-card-enter {
  0% { transform: scale(0.8) rotate(-5deg); }
  40% { transform: scale(1.15) rotate(2deg); }
  60% { transform: scale(1.1) rotate(-1deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.pack-card.revealed.rarity-rare .pack-card-back {
  border-color: #c084fc;
  box-shadow: 0 0 30px rgba(192, 132, 252, 0.6);
  animation: rare-glow 1.5s ease-in-out infinite;
}

@keyframes rare-glow {
  0%, 100% { box-shadow: 0 0 25px rgba(192, 132, 252, 0.5); }
  50% { box-shadow: 0 0 40px rgba(192, 132, 252, 0.8); }
}

/* Legendary - golden explosion */
.pack-card.legendary-reveal {
  animation: legendary-card-enter 0.8s ease-out;
}

@keyframes legendary-card-enter {
  0% { transform: scale(0.5) rotate(-10deg); filter: brightness(2); }
  30% { transform: scale(1.3) rotate(5deg); filter: brightness(1.5); }
  50% { transform: scale(1.2) rotate(-3deg); }
  70% { transform: scale(1.15) rotate(1deg); }
  100% { transform: scale(1) rotate(0deg); filter: brightness(1); }
}

.pack-card.revealed.rarity-legendary .pack-card-back {
  border-color: #fb923c;
  box-shadow:
    0 0 40px rgba(251, 146, 60, 0.7),
    0 0 60px rgba(251, 146, 60, 0.4);
  animation: legendary-glow 1.2s ease-in-out infinite;
}

@keyframes legendary-glow {
  0%, 100% {
    box-shadow:
      0 0 30px rgba(251, 146, 60, 0.6),
      0 0 50px rgba(251, 146, 60, 0.3);
  }
  50% {
    box-shadow:
      0 0 50px rgba(251, 146, 60, 0.9),
      0 0 80px rgba(251, 146, 60, 0.5);
  }
}

/* Pristine - rainbow shimmer explosion */
.pack-card.pristine-reveal {
  animation: pristine-card-enter 1s ease-out;
}

@keyframes pristine-card-enter {
  0% { transform: scale(0.3) rotate(-15deg); filter: brightness(3) saturate(2); }
  20% { transform: scale(1.4) rotate(8deg); filter: brightness(2) saturate(1.5); }
  40% { transform: scale(1.25) rotate(-5deg); }
  60% { transform: scale(1.2) rotate(3deg); }
  80% { transform: scale(1.1) rotate(-1deg); }
  100% { transform: scale(1) rotate(0deg); filter: brightness(1) saturate(1); }
}

.pack-card.revealed.rarity-pristine .pack-card-back {
  border-color: #fff;
  box-shadow:
    0 0 30px rgba(255, 255, 255, 0.8),
    0 0 60px rgba(255, 212, 229, 0.5),
    0 0 90px rgba(212, 241, 255, 0.3);
  animation: pristine-glow 2s ease-in-out infinite;
}

@keyframes pristine-glow {
  0%, 100% {
    box-shadow:
      0 0 30px rgba(255, 255, 255, 0.7),
      0 0 50px rgba(255, 212, 229, 0.4),
      0 0 70px rgba(212, 241, 255, 0.3);
  }
  33% {
    box-shadow:
      0 0 40px rgba(212, 241, 255, 0.8),
      0 0 60px rgba(232, 212, 255, 0.5),
      0 0 80px rgba(255, 212, 229, 0.3);
  }
  66% {
    box-shadow:
      0 0 35px rgba(232, 212, 255, 0.8),
      0 0 55px rgba(255, 255, 255, 0.5),
      0 0 75px rgba(212, 241, 255, 0.3);
  }
}

/* ============================================================================
   TILT EFFECT SYSTEM
   ============================================================================ */

/* Card tilt base styles */
.pack-card {
  transform-style: preserve-3d;
}

.pack-card:not(.revealed) {
  cursor: pointer;
}

.pack-card.tilting {
  z-index: 10;
}

/* Shine overlay for tilt effect */
.pack-card-shine {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at var(--shine-x, 50%) var(--shine-y, 50%),
    rgba(255, 255, 255, 0.25) 0%,
    rgba(255, 255, 255, 0.1) 20%,
    transparent 50%
  );
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease;
  border-radius: 10px;
  z-index: 5;
}

.pack-card.tilting .pack-card-shine {
  opacity: 1;
}

/* ============================================================================
   REVEALED CARD INSPECT HOVER EFFECT
   ============================================================================ */

/* Revealed cards can be hovered to inspect (scale up ~50%) */
.pack-card.revealed {
  cursor: zoom-in;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), z-index 0s;
}

.pack-card.revealed:hover {
  transform: scale(1.5);
  z-index: 100;
}

/* Ensure the flip transform is preserved when hovering */
.pack-card.revealed:hover .pack-card-inner {
  transform: rotateY(180deg);
}

/* Add subtle shadow lift when inspecting */
.pack-card.revealed:hover .pack-card-back {
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.4),
    0 0 30px rgba(0, 0, 0, 0.2);
}

/* ============================================================================
   PRE-REVEAL RARITY GLOW (FACE-DOWN CARDS)
   ============================================================================ */

/* Rarity glow element - positioned behind card at wrapper level */
.pack-card-rarity-glow {
  position: absolute;
  inset: -12px;
  border-radius: 16px;
  pointer-events: none;
  z-index: 0;
  transform: translate(var(--glow-offset-x, 0px), var(--glow-offset-y, 0px));
  transition: transform 0.1s ease-out, opacity 0.3s ease;
}

/* Ensure card inner is above glow */
.pack-card-inner {
  z-index: 1;
}

/* Common - very subtle, barely visible */
.pack-card-rarity-glow.glow-common {
  box-shadow: 0 0 8px rgba(74, 222, 128, 0.15);
}

/* Uncommon - soft blue pulse */
.pack-card-rarity-glow.glow-uncommon {
  box-shadow:
    0 0 15px rgba(96, 165, 250, 0.3),
    0 0 25px rgba(96, 165, 250, 0.15);
  animation: pre-reveal-uncommon 2.5s ease-in-out infinite;
}

@keyframes pre-reveal-uncommon {
  0%, 100% {
    box-shadow:
      0 0 12px rgba(96, 165, 250, 0.25),
      0 0 20px rgba(96, 165, 250, 0.1);
  }
  50% {
    box-shadow:
      0 0 18px rgba(96, 165, 250, 0.4),
      0 0 30px rgba(96, 165, 250, 0.2);
  }
}

/* Rare - purple glow, more noticeable */
.pack-card-rarity-glow.glow-rare {
  box-shadow:
    0 0 20px rgba(192, 132, 252, 0.4),
    0 0 35px rgba(192, 132, 252, 0.2);
  animation: pre-reveal-rare 2s ease-in-out infinite;
}

@keyframes pre-reveal-rare {
  0%, 100% {
    box-shadow:
      0 0 15px rgba(192, 132, 252, 0.35),
      0 0 25px rgba(192, 132, 252, 0.15);
  }
  50% {
    box-shadow:
      0 0 25px rgba(192, 132, 252, 0.55),
      0 0 45px rgba(192, 132, 252, 0.3);
  }
}

/* Legendary - strong orange glow, eye-catching */
.pack-card-rarity-glow.glow-legendary {
  box-shadow:
    0 0 25px rgba(251, 146, 60, 0.5),
    0 0 45px rgba(251, 146, 60, 0.25),
    0 0 60px rgba(251, 191, 36, 0.15);
  animation: pre-reveal-legendary 1.8s ease-in-out infinite;
}

@keyframes pre-reveal-legendary {
  0%, 100% {
    box-shadow:
      0 0 20px rgba(251, 146, 60, 0.4),
      0 0 35px rgba(251, 146, 60, 0.2),
      0 0 50px rgba(251, 191, 36, 0.1);
  }
  50% {
    box-shadow:
      0 0 35px rgba(251, 146, 60, 0.65),
      0 0 55px rgba(251, 146, 60, 0.35),
      0 0 75px rgba(251, 191, 36, 0.2);
  }
}

/* Pristine - rainbow shimmer, unmistakable */
.pack-card-rarity-glow.glow-pristine {
  box-shadow:
    0 0 30px rgba(255, 255, 255, 0.6),
    0 0 50px rgba(255, 212, 229, 0.3),
    0 0 70px rgba(212, 241, 255, 0.2);
  animation: pre-reveal-pristine 2.5s ease-in-out infinite;
}

@keyframes pre-reveal-pristine {
  0%, 100% {
    box-shadow:
      0 0 25px rgba(255, 255, 255, 0.5),
      0 0 40px rgba(255, 212, 229, 0.25),
      0 0 55px rgba(212, 241, 255, 0.15);
  }
  33% {
    box-shadow:
      0 0 35px rgba(212, 241, 255, 0.6),
      0 0 55px rgba(232, 212, 255, 0.35),
      0 0 75px rgba(255, 212, 229, 0.2);
  }
  66% {
    box-shadow:
      0 0 30px rgba(232, 212, 255, 0.55),
      0 0 50px rgba(255, 255, 255, 0.3),
      0 0 65px rgba(212, 241, 255, 0.2);
  }
}

/* Hide rarity glow once revealed */
.pack-card.revealed .pack-card-rarity-glow {
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* ============================================================================
   EXPANDING HALO REVEAL EFFECTS (HEARTHSTONE-STYLE)
   ============================================================================ */

/* Halo container - positioned at card center */
.pack-halo-container {
  position: absolute;
  pointer-events: none;
  z-index: 100;
  transform: translate(-50%, -50%);
}

/* Individual expanding ring */
.pack-halo-ring {
  position: absolute;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: radial-gradient(
    circle,
    var(--ring-color) 0%,
    transparent 70%
  );
  box-shadow:
    0 0 20px var(--ring-color),
    0 0 40px var(--ring-color),
    inset 0 0 20px var(--ring-color);
  animation: halo-expand var(--ring-duration) ease-out forwards;
  animation-delay: var(--ring-delay);
}

@keyframes halo-expand {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  60% {
    opacity: 0.8;
  }
  100% {
    transform: translate(-50%, -50%) scale(calc(var(--ring-size) / 20));
    opacity: 0;
  }
}

/* Particles for legendary/pristine */
.pack-halo-particle {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  left: 50%;
  top: 50%;
  background: var(--particle-color);
  box-shadow:
    0 0 6px var(--particle-color),
    0 0 12px var(--particle-color);
  transform: translate(-50%, -50%);
  animation: particle-burst 0.8s ease-out forwards;
  animation-delay: var(--particle-delay);
}

@keyframes particle-burst {
  0% {
    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateY(calc(-1 * var(--particle-distance)));
    opacity: 0;
  }
}

/* Legendary halo - golden fire burst */
.pack-halo-container.halo-legendary .pack-halo-ring {
  background: radial-gradient(
    circle,
    rgba(251, 191, 36, 0.9) 0%,
    rgba(251, 146, 60, 0.6) 40%,
    transparent 70%
  );
  box-shadow:
    0 0 30px rgba(251, 146, 60, 0.8),
    0 0 60px rgba(251, 191, 36, 0.5),
    inset 0 0 25px rgba(251, 146, 60, 0.6);
}

/* Pristine halo - white/rainbow burst */
.pack-halo-container.halo-pristine .pack-halo-ring {
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 1) 0%,
    rgba(255, 212, 229, 0.7) 30%,
    rgba(212, 241, 255, 0.4) 60%,
    transparent 80%
  );
  box-shadow:
    0 0 40px rgba(255, 255, 255, 0.9),
    0 0 80px rgba(255, 212, 229, 0.6),
    0 0 120px rgba(212, 241, 255, 0.3),
    inset 0 0 30px rgba(255, 255, 255, 0.8);
}

/* Screen flash for pristine reveals */
.pack-screen-flash {
  position: fixed;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.9) 0%,
    rgba(255, 255, 255, 0.4) 30%,
    transparent 70%
  );
  pointer-events: none;
  z-index: 10000;
  animation: screen-flash 0.6s ease-out forwards;
}

@keyframes screen-flash {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  20% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(1.2);
  }
}

/* Uncommon reveal animation */
.pack-card.uncommon-reveal {
  animation: uncommon-card-enter 0.6s ease-out;
}

/* ============================================================================
   PLAYER NAME STYLING EFFECTS
   ============================================================================ */

/* Wave Effect - Per-letter animation */
.name-effect-wave {
  display: inline-flex;
}

.name-wave-char {
  display: inline-block;
  animation: name-wave 1.2s ease-in-out infinite;
}

@keyframes name-wave {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

/* Glow Effect - Pulsing shadow */
.name-effect-glow {
  animation: name-glow 2s ease-in-out infinite;
}

@keyframes name-glow {
  0%, 100% {
    text-shadow: 0 0 5px currentColor, 0 0 10px currentColor;
    filter: brightness(1);
  }
  50% {
    text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor;
    filter: brightness(1.2);
  }
}

/* Rainbow Effect - Shimmer gradient */
.name-effect-rainbow {
  background: linear-gradient(
    90deg,
    #ff6b6b 0%,
    #feca57 20%,
    #48dbfb 40%,
    #ff9ff3 60%,
    #54a0ff 80%,
    #ff6b6b 100%
  );
  background-size: 200% 100%;
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  animation: name-rainbow-shimmer 3s linear infinite;
}

@keyframes name-rainbow-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: 0 0; }
}

/* Pulse Effect - Size breathing */
.name-effect-pulse {
  animation: name-pulse 2s ease-in-out infinite;
  transform-origin: center;
  display: inline-block;
}

@keyframes name-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* Shadow Effect - Drop shadow */
.name-effect-shadow {
  text-shadow:
    2px 2px 4px rgba(0, 0, 0, 0.5),
    -1px -1px 2px rgba(255, 255, 255, 0.1);
}

/* Gradient text support */
.name-gradient {
  background-size: 200% 100%;
  animation: name-gradient-shift 3s linear infinite;
}

@keyframes name-gradient-shift {
  0% { background-position: 200% 0; }
  100% { background-position: 0 0; }
}

/* ============================================================================
   NAME STYLE PICKER UI
   ============================================================================ */

.style-preview-section {
  background: rgba(15, 23, 42, 0.8);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 20px;
  text-align: center;
  margin-bottom: 16px;
}

.style-preview-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #64748b;
  margin-bottom: 12px;
}

.style-preview-name {
  font-size: 1.5rem;
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.style-section {
  background: rgba(30, 41, 59, 0.5);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
}

.style-section-title {
  font-size: 0.875rem;
  font-weight: 500;
  color: #94a3b8;
  margin-bottom: 12px;
}

.style-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.style-option {
  padding: 8px 16px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: rgba(15, 23, 42, 0.5);
  color: #94a3b8;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.style-option:hover {
  background: rgba(51, 65, 85, 0.5);
  color: #e2e8f0;
}

.style-option.selected {
  background: rgba(59, 130, 246, 0.2);
  border-color: #3b82f6;
  color: #60a5fa;
}

.style-color-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 8px;
}

.style-color-swatch {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 8px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease;
}

.style-color-swatch:hover {
  transform: scale(1.1);
}

.style-color-swatch.selected {
  border-color: #fff;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
}

/* Responsive */
@media (max-width: 768px) {
  .profile-container {
    grid-template-columns: 1fr;
  }

  .profile-left-panel {
    border-right: none;
    border-bottom: 1px solid #334155;
  }

  .collection-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  }

  .pack-card {
    width: 130px;
    height: 182px;
  }

  .style-color-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* ============================================================================
   CARD HOVER TOOLTIP SYSTEM (Hearthstone-style)
   ============================================================================ */

.card-hover-tooltip {
  position: fixed;
  z-index: 100000 !important;
  pointer-events: none;
  display: flex;
  gap: 12px;
  opacity: 0;
  transition: opacity 0.15s ease-in-out;
}

.card-hover-tooltip.visible {
  opacity: 1;
}

.card-hover-tooltip.position-left {
  flex-direction: row-reverse;
}

.card-hover-tooltip.position-right {
  flex-direction: row;
}

/* Enlarged card preview - uses dynamic width from JS */
.tooltip-card-preview {
  width: var(--tooltip-card-width, 320px);
  flex-shrink: 0;
}

.tooltip-card-preview .card {
  width: 100%;
  height: auto;
  aspect-ratio: 5 / 7;
  transform: none !important;
  margin: 0;
  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.7),
              0 0 30px rgba(212, 168, 83, 0.4);
  border: 2px solid var(--gold);
}

.tooltip-card-preview .card.tooltip-card {
  pointer-events: none;
}

/* Info-only mode (hand cards) - no card preview, just info boxes */
.card-hover-tooltip.info-only .tooltip-card-preview {
  display: none;
}

/* Info boxes container */
.tooltip-info-boxes {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 260px;
  overflow-y: visible;
}

/* Individual info box */
.tooltip-info-box {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  padding: 10px 14px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
  min-width: 180px;
}

.tooltip-info-box.keyword-box {
  border-left: 4px solid var(--gold);
}

.tooltip-info-box.status-box {
  border-left: 4px solid var(--hp-red);
}

.tooltip-info-box-title {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 600;
  color: var(--gold-light);
  margin-bottom: 6px;
}

.tooltip-info-box-description {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* Trigger keyword info box (Slain, Defending, etc.) */
.tooltip-info-box.trigger-box {
  border-left: 4px solid #5bc0de; /* Cyan accent for triggers */
}

/* Token section header */
.tooltip-token-header {
  font-family: var(--font-display);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 8px;
  margin-bottom: 4px;
  padding: 0 4px;
}

/* Token preview container */
.tooltip-token-preview {
  display: flex;
  justify-content: center;
  padding: 4px;
}

/* Mini token card */
.tooltip-token-card {
  transform: scale(1);
  transform-origin: top center;
  pointer-events: none;
  margin-bottom: -40px; /* Compensate for scale leaving empty space */
}

/* Ensure token cards maintain 5:7 proportion */
.tooltip-token-preview .card {
  height: 250px;
  width: auto;
  aspect-ratio: 5 / 7;
  overflow: visible;
}

/* Mobile tooltip - smaller, centered, tappable */
@media (max-width: 768px) {
  .card-hover-tooltip {
    /* Center on screen */
    left: 50% !important;
    top: 50% !important;
    right: auto !important;
    transform: translate(-50%, -50%);
    flex-direction: column;
    align-items: center;
    max-width: 90vw;
    max-height: 85vh;
    /* Enable pointer events so user can tap to add card */
    pointer-events: auto;
  }

  .tooltip-card-preview {
    width: min(280px, 70vw);
  }

  .tooltip-card-preview .card.tooltip-card {
    /* Enable tapping on the card */
    pointer-events: auto;
    cursor: pointer;
  }

  /* Stack info boxes below card on mobile */
  .tooltip-info-boxes {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 90vw;
    max-height: 30vh;
    overflow-y: auto;
  }

  .tooltip-info-box {
    min-width: 140px;
    max-width: 45%;
    font-size: 11px;
    padding: 8px 10px;
  }

  .tooltip-info-box-title {
    font-size: 11px;
  }

  .tooltip-info-box-description {
    font-size: 10px;
  }
}

/* ============================================================================
   BUG REPORTING FEATURE
   ============================================================================ */

/* Floating Action Button Container */
.bug-button-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  pointer-events: none; /* Allow clicks to pass through to elements below */
}

/* Bug FAB Button */
.bug-fab {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  pointer-events: auto; /* Re-enable clicks on the button itself */
}

.bug-fab:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
}

.bug-fab.active {
  transform: rotate(45deg);
}

.bug-fab-icon {
  font-size: 24px;
  line-height: 1;
}

/* Bug Menu (Popout) */
.bug-menu {
  display: flex;
  flex-direction: column;
  gap: 6px;
  opacity: 0;
  transform: translateY(10px) scale(0.95);
  pointer-events: none;
  transition: opacity var(--transition-fast), transform var(--transition-fast);
}

.bug-menu.active {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.bug-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border-gold);
  border-radius: 10px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
  transition: background var(--transition-fast), transform var(--transition-fast);
}

.bug-menu-item:hover {
  background: rgba(212, 168, 83, 0.15);
  transform: translateX(-4px);
}

.bug-menu-icon {
  font-size: 16px;
}

/* Bug Report Overlay */
.bug-report-overlay {
  z-index: 50;
}

.bug-report-overlay .overlay-content {
  max-width: 600px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.bug-report-card {
  background: var(--bg-card);
  border: 1px solid var(--border-gold);
  border-radius: 18px;
  padding: 0;
  overflow: hidden;
}

/* Bug Report Header */
.bug-report-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: rgba(212, 168, 83, 0.1);
  border-bottom: 1px solid var(--border-subtle);
}

.bug-report-header h2 {
  margin: 0;
  font-size: 20px;
  color: var(--gold-light);
}

.bug-overlay-close {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: transparent;
  border: 1px solid var(--border-subtle);
  color: var(--text-secondary);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.bug-overlay-close:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

/* Bug Tabs */
.bug-tabs {
  display: flex;
  border-bottom: 1px solid var(--border-subtle);
}

.bug-tab {
  flex: 1;
  padding: 12px 16px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.bug-tab:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.05);
}

.bug-tab.active {
  color: var(--gold);
}

.bug-tab.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--gold);
}

/* Bug Report Content */
.bug-report-content,
.bug-list-content {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.bug-form-title {
  margin: 0 0 16px;
  font-size: 16px;
  color: var(--text-primary);
}

.bug-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.bug-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.bug-textarea {
  resize: vertical;
  min-height: 80px;
  max-height: 200px;
}

.bug-form-error {
  min-height: 20px;
  font-size: 13px;
  color: #f87171;
}

.bug-form-error.success {
  color: #4ade80;
}

.bug-form-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 8px;
}

.bug-submit-btn,
.bug-cancel-btn {
  padding: 10px 20px;
}

/* Bug List */
.bug-list-loading,
.bug-list-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-secondary);
}

.bug-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Bug Item */
.bug-item {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 14px;
  transition: border-color var(--transition-fast);
}

.bug-item:hover {
  border-color: var(--border-gold);
}

/* Status colors */
.bug-item.bug-status-open {
  border-left: 3px solid #fbbf24;
}

.bug-item.bug-status-acknowledged {
  border-left: 3px solid #60a5fa;
}

.bug-item.bug-status-fixed {
  border-left: 3px solid #4ade80;
}

.bug-item.bug-status-wont-fix {
  border-left: 3px solid #94a3b8;
}

.bug-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.bug-category {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  background: rgba(255, 255, 255, 0.05);
  padding: 2px 8px;
  border-radius: 4px;
}

.bug-status {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.bug-status-open .bug-status { color: #fbbf24; }
.bug-status-acknowledged .bug-status { color: #60a5fa; }
.bug-status-fixed .bug-status { color: #4ade80; }
.bug-status-wont-fix .bug-status { color: #94a3b8; }

.bug-title {
  margin: 0 0 6px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.bug-description {
  margin: 0 0 10px;
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.4;
  /* Clamp to 3 lines */
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.bug-item-footer {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 10px;
}

.bug-item-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

/* Vote Button */
.bug-vote-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.bug-vote-btn:hover:not(:disabled) {
  background: rgba(212, 168, 83, 0.15);
  border-color: var(--border-gold);
  color: var(--gold);
}

.bug-vote-btn.voted {
  background: rgba(212, 168, 83, 0.2);
  border-color: var(--gold);
  color: var(--gold);
}

.bug-vote-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.vote-count {
  font-weight: 700;
}

/* Status Select */
.bug-status-select {
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  color: var(--text-primary);
  font-size: 12px;
  cursor: pointer;
}

.bug-status-select:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Edit/Delete Buttons */
.bug-edit-btn,
.bug-delete-btn {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  color: var(--text-secondary);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.bug-edit-btn:hover {
  background: rgba(96, 165, 250, 0.15);
  border-color: #60a5fa;
  color: #60a5fa;
}

.bug-delete-btn:hover {
  background: rgba(248, 113, 113, 0.15);
  border-color: #f87171;
  color: #f87171;
}

/* Mobile responsiveness */
@media (max-width: 600px) {
  .bug-button-container {
    bottom: 16px;
    right: 16px;
  }

  .bug-fab {
    width: 44px;
    height: 44px;
  }

  .bug-fab-icon {
    font-size: 20px;
  }

  .bug-report-overlay .overlay-content {
    max-height: 90vh;
    margin: 10px;
  }

  .bug-item-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .bug-vote-btn,
  .bug-status-select,
  .bug-edit-btn,
  .bug-delete-btn {
    width: 100%;
    justify-content: center;
  }
}

/* ============================================================================
   SIMULATION DASHBOARD
   ============================================================================ */

.simulation-dashboard-overlay {
  z-index: 60;
}

.simulation-dashboard-overlay .overlay-content {
  max-width: 700px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.simulation-dashboard {
  background: var(--bg-card);
  border: 1px solid var(--border-gold);
  border-radius: 18px;
  padding: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  max-height: 85vh;
}

/* Dashboard Header */
.sim-dash-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: rgba(52, 152, 219, 0.1);
  border-bottom: 1px solid var(--border-subtle);
}

.sim-dash-header h2 {
  margin: 0;
  font-size: 20px;
  color: var(--mana-blue);
}

.sim-dash-close {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: transparent;
  border: 1px solid var(--border-subtle);
  color: var(--text-secondary);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.sim-dash-close:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

/* Status Bar */
.sim-status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background: rgba(0, 0, 0, 0.2);
  border-bottom: 1px solid var(--border-subtle);
  font-size: 13px;
}

.sim-status-indicator {
  padding: 4px 12px;
  border-radius: 12px;
  font-weight: 600;
  text-transform: uppercase;
  font-size: 11px;
  letter-spacing: 0.05em;
}

.sim-status-indicator.stopped {
  background: rgba(148, 163, 184, 0.2);
  color: var(--text-secondary);
}

.sim-status-indicator.running {
  background: rgba(74, 222, 128, 0.2);
  color: #4ade80;
  animation: pulse 2s ease-in-out infinite;
}

.sim-status-indicator.paused {
  background: rgba(251, 191, 36, 0.2);
  color: #fbbf24;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.sim-game-count,
.sim-runtime {
  color: var(--text-secondary);
}

/* Tabs */
.sim-tabs {
  display: flex;
  border-bottom: 1px solid var(--border-subtle);
}

.sim-tab {
  flex: 1;
  padding: 12px 16px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.sim-tab:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.05);
}

.sim-tab.active {
  color: var(--mana-blue);
}

.sim-tab.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--mana-blue);
}

/* Tab Content */
.sim-tab-content {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.sim-section {
  margin-bottom: 24px;
}

.sim-section:last-child {
  margin-bottom: 0;
}

.sim-section h3 {
  margin: 0 0 12px;
  font-size: 14px;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 600;
}

/* Stats Grid */
.sim-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

.sim-stat {
  background: rgba(255, 255, 255, 0.03);
  border-radius: 8px;
  padding: 12px;
  text-align: center;
}

.sim-stat-value {
  display: block;
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
  font-family: var(--font-display);
}

.sim-stat-label {
  display: block;
  font-size: 11px;
  color: var(--text-secondary);
  text-transform: uppercase;
  margin-top: 4px;
}

/* Stats Row */
.sim-stats-row {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  font-size: 14px;
  color: var(--text-secondary);
}

.sim-stats-row strong {
  color: var(--text-primary);
}

/* Win Bar */
.sim-win-bar {
  display: flex;
  height: 32px;
  border-radius: 6px;
  overflow: hidden;
  font-size: 12px;
  font-weight: 600;
}

.sim-win-p0 {
  background: rgba(74, 222, 128, 0.3);
  color: #4ade80;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 60px;
}

.sim-win-p1 {
  background: rgba(248, 113, 113, 0.3);
  color: #f87171;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 60px;
}

/* Bug List in Dashboard */
.sim-bug-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sim-bug-item {
  background: rgba(255, 255, 255, 0.03);
  border-radius: 8px;
  padding: 12px;
  border-left: 3px solid var(--text-secondary);
}

.sim-bug-item.sev-critical {
  border-left-color: #ef4444;
}

.sim-bug-item.sev-high {
  border-left-color: #f97316;
}

.sim-bug-item.sev-medium {
  border-left-color: #fbbf24;
}

.sim-bug-item.sev-low {
  border-left-color: #94a3b8;
}

.sim-bug-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.sim-bug-type {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 13px;
}

.sim-bug-count {
  background: rgba(255, 255, 255, 0.1);
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 12px;
  font-weight: 600;
  color: var(--gold);
}

.sim-bug-message {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 6px;
  line-height: 1.4;
}

.sim-bug-meta {
  display: flex;
  gap: 12px;
  font-size: 11px;
  color: var(--text-muted);
}

.sim-bug-severity {
  text-transform: uppercase;
  font-weight: 600;
}

/* Severity Bar */
.sim-severity-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.sim-severity-bar span {
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.sev-critical {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
}

.sev-high {
  background: rgba(249, 115, 22, 0.2);
  color: #f97316;
}

.sev-medium {
  background: rgba(251, 191, 36, 0.2);
  color: #fbbf24;
}

.sev-low {
  background: rgba(148, 163, 184, 0.2);
  color: #94a3b8;
}

/* Card List */
.sim-card-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sim-card-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
  font-size: 13px;
}

.sim-card-rank {
  color: var(--text-muted);
  font-weight: 600;
  min-width: 24px;
}

.sim-card-name {
  flex: 1;
  color: var(--text-primary);
}

.sim-card-winrate {
  font-weight: 700;
  min-width: 50px;
  text-align: right;
}

.sim-card-winrate.win-high {
  color: #4ade80;
}

.sim-card-winrate.win-low {
  color: #f87171;
}

.sim-card-games {
  color: var(--text-muted);
  font-size: 12px;
  min-width: 70px;
  text-align: right;
}

.sim-card-bugs {
  color: #fbbf24;
  font-weight: 600;
}

.sim-card-item.bug-involved {
  border-left: 2px solid #fbbf24;
}

/* Synergy List */
.sim-synergy-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sim-synergy-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
  font-size: 13px;
}

.sim-synergy-item.synergy-good {
  border-left: 2px solid #4ade80;
}

.sim-synergy-item.synergy-bad {
  border-left: 2px solid #f87171;
}

.sim-synergy-cards {
  flex: 1;
  color: var(--text-primary);
}

.sim-synergy-score {
  font-weight: 700;
  min-width: 50px;
  text-align: right;
  color: #4ade80;
}

.sim-synergy-item.synergy-bad .sim-synergy-score {
  color: #f87171;
}

.sim-synergy-record {
  color: var(--text-muted);
  font-size: 12px;
  min-width: 70px;
  text-align: right;
}

/* Empty State */
.sim-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-secondary);
}

.sim-empty-hint {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 8px;
}

.sim-note {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 12px;
}

/* Actions */
.sim-actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 20px;
  border-top: 1px solid var(--border-subtle);
}

/* Responsive */
@media (max-width: 600px) {
  .sim-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .sim-status-bar {
    flex-direction: column;
    gap: 8px;
    text-align: center;
  }

  .sim-card-item,
  .sim-synergy-item {
    flex-wrap: wrap;
  }
}
